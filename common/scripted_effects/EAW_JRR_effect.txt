clear_monarchist_spirts = {
    remove_ideas = JRR_MPA_resistance
	remove_ideas = JRR_MPA_resistance_2
	remove_ideas = JRR_MPA_resistance_3
	remove_ideas = JRR_marquess_resistance
	remove_ideas = JRR_marquess_resistance_2
	remove_ideas = JRR_right_of_counsel
	remove_ideas = JRR_hounds_of_angaz_barak
	remove_ideas = JRR_fighting_against_mob_rule
	remove_ideas = JRR_insurgent_army
	remove_ideas = JRR_insurgent_army_2
	remove_ideas = JRR_flower_of_chivalry
	remove_ideas = JRR_flower_of_chivalry_2
	remove_ideas = JRR_feathisian_connection
	clr_country_flag = JRR_monarchist
}
clear_republican_spirits = {
    remove_ideas = JRR_marquess_resistance
	remove_ideas = JRR_marquess_resistance_2
	remove_ideas = JRR_MPA_resistance
	remove_ideas = JRR_MPA_resistance_2
	remove_ideas = JRR_MPA_resistance_3
	remove_ideas = JRR_bulwark_strategy
	remove_ideas = JRR_bulwark_strategy_2
	remove_ideas = JRR_talons_bared
	remove_ideas = JRR_talons_bared_2
	remove_ideas = JRR_craftshounds
	remove_ideas = JRR_talking_with_landlords
	remove_ideas = JRR_not_talking_with_landlords
	remove_ideas = JRR_anti_landlord_action
	remove_ideas = JRR_camaris_route
	remove_ideas = JRR_emergency_grain_depo
	remove_ideas = JRR_shock_troops
	clr_country_flag = JRR_revolutionary
}
bring_to_aquileian_level = {
    remove_ideas = JRR_cottage_gunsmiths
	remove_ideas = JRR_morale_optimisation
	remove_ideas = JRR_the_final_push
	remove_ideas = JRR_legacy_of_serfdom
	remove_ideas = JRR_legacy_of_serfdom_2
	remove_ideas = JRR_MPA_resistance
	remove_ideas = JRR_MPA_resistance_2
	remove_ideas = JRR_MPA_resistance_3
	remove_ideas = JRR_marquess_resistance
	remove_ideas = JRR_marquess_resistance_2
	remove_ideas = JRR_right_of_counsel
	remove_ideas = JRR_hounds_of_angaz_barak
	remove_ideas = JRR_fighting_against_mob_rule
	remove_ideas = JRR_insurgent_army
	remove_ideas = JRR_insurgent_army_2
	remove_ideas = JRR_flower_of_chivalry
	remove_ideas = JRR_flower_of_chivalry_2
	remove_ideas = JRR_feathisian_connection
	remove_ideas = JRR_marquess_resistance
	remove_ideas = JRR_marquess_resistance_2
	remove_ideas = JRR_MPA_resistance
	remove_ideas = JRR_MPA_resistance_2
	remove_ideas = JRR_MPA_resistance_3
	remove_ideas = JRR_bulwark_strategy
	remove_ideas = JRR_bulwark_strategy_2
	remove_ideas = JRR_talons_bared
	remove_ideas = JRR_talons_bared_2
	remove_ideas = JRR_craftshounds
	remove_ideas = JRR_talking_with_landlords
	remove_ideas = JRR_not_talking_with_landlords
	remove_ideas = JRR_anti_landlord_action
	remove_ideas = JRR_camaris_route
	remove_ideas = JRR_emergency_grain_depo
	remove_ideas = JRR_shock_troops
	add_ideas = outdated_industry 
	add_ideas = lack_of_scientists 
	add_ideas = proper_science_base
	every_state = {
		limit = {
		    OR = {
				is_core_of = JEB
				is_core_of = JER
				is_core_of = VIN
				is_core_of = JFT
			}
		}
		add_core_of = ROOT
	}
	set_capital = {
        state = 345 
        remember_old_capital = no
    }
	if = {
	    limit = {
		    has_country_flag = JRR_revolutionary
		}
		clr_country_flag = JRR_revolutionary
	}
	if = {
	    limit = {
		    has_country_flag = JRR_monarchist
		}
		clr_country_flag = JRR_monarchist
	}
	JER = { 
		JRR = {
			transfer_technology = yes 
		} 
	}
}

### Thank you Scars, very cool ###

# Index

# 0 - Evolutionary
# 1 - Orthodox
# 2 - Pragmatist

# How to use

# set_temp_variable = { t_change = 10 }
# set_temp_variable = { t_index = 1 }
# JRR_change_directorate_Influence = yes

# This will change Orthodox influence by 10, adjusting the others accordingly.

JRR_change_directorate_Influence = {
	set_temp_variable = { v_check = JRR_Directorate_Influence^t_index }
	add_to_temp_variable = { v_check = t_change }

	if = {
		limit = {
			check_variable = { v_check < 0 }
		}
		subtract_from_temp_variable = { t_change = v_check }
	}
	else_if = {
		limit = {
			check_variable = { v_check > 100 }
		}
		set_temp_variable = { n_100 = v_check }
		subtract_from_temp_variable = { n_100 = 100 }
		subtract_from_temp_variable = { t_change = n_100 }
	}
	
	custom_effect_tooltip = CVA_CTH_Pol_Influence_CET
	
	if = {
		limit = {
			NOT = {
				check_variable = { t_change = 0 }
			}
		}
		add_to_variable = { JRR_Directorate_Influence^t_index = t_change }
		divide_temp_variable = { t_change = 2 }
		set_temp_variable = { excess = 0 }
		for_each_loop = {
			array = JRR_Directorate_Influence
			if = {
				limit = {
					NOT = {
						check_variable = { i = t_index }
					}
				}
				subtract_from_variable = { JRR_Directorate_Influence^i = t_change }
			}
			if = {
				limit = { check_variable = { JRR_Directorate_Influence^i < 0 } }
				add_to_temp_variable = { excess = JRR_Directorate_Influence^i }
				set_variable = { JRR_Directorate_Influence^i = 0 }
				add_to_temp_array = { zero_value = i }
			}
		}
		for_each_loop = {
			array = JRR_Directorate_Influence
			if = {
				limit = {
					NOT = {
						is_in_array = { array = zero_value value = i }
						check_variable = { i = t_index }
					}
				}
				add_to_variable = { JRR_Directorate_Influence^i = excess }
			}
		}
	}

	# Display pie chart

	set_variable = { orthodox_frame = JRR_Directorate_Influence^0 }
	add_to_variable = { orthodox_frame = JRR_Directorate_Influence^1 }
}