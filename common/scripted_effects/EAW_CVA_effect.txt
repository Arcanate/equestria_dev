CVA_clear_local_ideas = {
    remove_ideas = CVA_the_fight_for_independence
	remove_ideas = CVA_the_fight_for_independence_2
	remove_ideas = CVA_monopoly_issue
    remove_ideas = CVA_urban_rural_divide
	remove_ideas = CVA_urban_rural_divide_2
	remove_ideas = CVA_insurrectionary_army
	remove_ideas = CVA_buildup_fishing_industry_idea
	remove_ideas = CVA_the_flying_jaguars_idea
    remove_ideas = CVA_militia_army
	remove_ideas = CVA_elected_officers_idea
	remove_ideas = CVA_militia_army_2
	remove_ideas = CVA_professional_army
	remove_ideas = CVA_actual_officers_idea
    remove_ideas = CVA_professional_army_2
	remove_ideas = CVA_partisan_legacy_idea
	remove_ideas = CVA_feed_the_people_idea
	remove_ideas = CVA_feed_the_people_idea_2
	remove_ideas = CVA_develop_coffee_fields_idea
    remove_ideas = CVA_develop_coffee_fields_idea_2
	remove_ideas = CVA_develop_silver_mines_idea
	remove_ideas = CVA_major_development_idea
	remove_ideas = CVA_follow_through_with_our_promises_idea
    remove_ideas = CVA_deradicalise_the_LAE_idea
	remove_ideas = CVA_really_modern_labour_laws_idea
	remove_ideas = CVA_autonomous_regions_idea
    remove_ideas = CVA_the_principle_of_federalisation_idea
}
CVA_clear_advisors = {
    remove_ideas = CVA_advisor_1
	remove_ideas = CVA_advisor_2
	remove_ideas = CVA_advisor_3
    remove_ideas = CVA_advisor_4
	remove_ideas = CVA_advisor_5
	remove_ideas = CVA_advisor_6
}

#X - Evolutionaries
#Y - Orthodox
#Z - Pragmatists
CVA_X_plus_Y_minus_Z_divided_by_1500 = { #((Orthodox + Evolutionary) - Pragmatist)/1500
    set_temp_variable = { X = CVA_left_zapatistas }
	set_temp_variable = { Y = CVA_orthodox_zapatistas }
	set_temp_variable = { Z = CVA_right_zapatistas }
	add_to_temp_variable = { X = Y }
	subtract_from_temp_variable = { X = Z }
	divide_temp_variable = { X = -1500 }
	add_stability = X
}
CVA_Z_plus_Y_minus_X_divided_by_1500 = { #((Pragmatist + Orthodox) - Evolutionary))/1500
    set_temp_variable = { X = CVA_left_zapatistas }
	set_temp_variable = { Y = CVA_orthodox_zapatistas }
	set_temp_variable = { Z = CVA_right_zapatistas }
	add_to_temp_variable = { Z = Y }
	subtract_from_temp_variable = { Z = X }
	divide_temp_variable = { Z = -1500 }
	add_stability = Z
}
CVA_X_plus_Z_minus_Y_divided_by_1500 = { #((Evolutionary + Pragmatist) - Orthodox))/1500
    set_temp_variable = { X = CVA_left_zapatistas }
	set_temp_variable = { Y = CVA_orthodox_zapatistas }
	set_temp_variable = { Z = CVA_right_zapatistas }
	add_to_temp_variable = { X = Z }
	subtract_from_temp_variable = { X = Y }
	divide_temp_variable = { X = -1500 }
	add_stability = X
}
CVA_X_divided_by_1500 = {
    set_temp_variable = { X = CVA_left_zapatistas }
	divide_temp_variable = { X = -1500 }
	add_stability = X
}
CVA_Y_divided_by_1500 = {
    set_temp_variable = { Y = CVA_orthodox_zapatistas }
	divide_temp_variable = { Y = -1500 }
	add_stability = Y
}
CVA_Z_divided_by_1500 = {
    set_temp_variable = { Z = CVA_right_zapatistas }
	divide_temp_variable = { Z = -1500 }
	add_stability = Z
}

CVA_X_plus_Y_minus_Z_divided_by_1000 = { #((Orthodox + Evolutionary) - Pragmatist)/1000
    set_temp_variable = { X = CVA_left_zapatistas }
	set_temp_variable = { Y = CVA_orthodox_zapatistas }
	set_temp_variable = { Z = CVA_right_zapatistas }
	add_to_temp_variable = { X = Y }
	subtract_from_temp_variable = { X = Z }
	divide_temp_variable = { X = -1000 }
	add_stability = X
}
CVA_Z_plus_Y_minus_X_divided_by_1000 = { #((Pragmatist + Orthodox) - Evolutionary))/1000
    set_temp_variable = { X = CVA_left_zapatistas }
	set_temp_variable = { Y = CVA_orthodox_zapatistas }
	set_temp_variable = { Z = CVA_right_zapatistas }
	add_to_temp_variable = { Z = Y }
	subtract_from_temp_variable = { Z = X }
	divide_temp_variable = { Z = -1000 }
	add_stability = Z
}
CVA_X_plus_Z_minus_Y_divided_by_1000 = { #((Evolutionary + Pragmatist) - Orthodox))/1000
    set_temp_variable = { X = CVA_left_zapatistas }
	set_temp_variable = { Y = CVA_orthodox_zapatistas }
	set_temp_variable = { Z = CVA_right_zapatistas }
	add_to_temp_variable = { X = Z }
	subtract_from_temp_variable = { X = Y }
	divide_temp_variable = { X = -1000 }
	add_stability = X
}
CVA_X_divided_by_1000 = {
    set_temp_variable = { X = CVA_left_zapatistas }
	divide_temp_variable = { X = -1000 }
	add_stability = X
}
CVA_Y_divided_by_1000 = {
    set_temp_variable = { Y = CVA_orthodox_zapatistas }
	divide_temp_variable = { Y = -1000 }
	add_stability = Y
}
CVA_Z_divided_by_1000 = {
    set_temp_variable = { Z = CVA_right_zapatistas }
	divide_temp_variable = { Z = -1000 }
	add_stability = Z
}
CVA_update_military_system = {
    if = {
		limit = {
			has_idea = CVA_CTH_pragmatist_military_policy_idea_3
			check_variable = { 
				CVA.CVA_right_zapatistas > CVA.CVA_left_zapatistas
			}
			check_variable = { 
				CVA.CVA_right_zapatistas > CVA.CVA_orthodox_zapatistas
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_pragmatist_military_policy_idea_3
			add_idea = CVA_CTH_pragmatist_military_policy_idea_4
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_pragmatist_military_policy_idea_2
			check_variable = { 
				CVA.CVA_right_zapatistas > CVA.CVA_left_zapatistas
			}
			check_variable = { 
				CVA.CVA_right_zapatistas > CVA.CVA_orthodox_zapatistas
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_pragmatist_military_policy_idea_2
			add_idea = CVA_CTH_pragmatist_military_policy_idea_3
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_pragmatist_military_policy_idea_1
			check_variable = { 
				CVA.CVA_right_zapatistas > CVA.CVA_left_zapatistas
			}
			check_variable = { 
				CVA.CVA_right_zapatistas > CVA.CVA_orthodox_zapatistas
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_pragmatist_military_policy_idea_1
			add_idea = CVA_CTH_pragmatist_military_policy_idea_2
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_pragmatist_military_policy_idea_3
			OR = {
				check_variable = { 
					CVA.CVA_left_zapatistas > CVA.CVA_right_zapatistas
				}
				check_variable = { 
					CVA.CVA_orthodox_zapatistas > CVA.CVA_right_zapatistas
				}
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_pragmatist_military_policy_idea_3
			add_idea = CVA_CTH_pragmatist_military_policy_idea_2
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_pragmatist_military_policy_idea_2
			OR = {
				check_variable = { 
					CVA.CVA_left_zapatistas > CVA.CVA_right_zapatistas
				}
				check_variable = { 
					CVA.CVA_orthodox_zapatistas > CVA.CVA_right_zapatistas
				}
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_pragmatist_military_policy_idea_2
			add_idea = CVA_CTH_pragmatist_military_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_pragmatist_military_policy_idea_1
			check_variable = { 
			    CVA.CVA_left_zapatistas > CVA.CVA_right_zapatistas
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_pragmatist_military_policy_idea_1
			add_idea = CVA_CTH_evolutionary_military_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_pragmatist_military_policy_idea_1
			check_variable = { 
				CVA.CVA_orthodox_zapatistas > CVA.CVA_right_zapatistas
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_pragmatist_military_policy_idea_1
			add_idea = CVA_CTH_orthodox_military_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_orthodox_military_policy_idea_3
			check_variable = { 
				CVA.CVA_orthodox_zapatistas > CVA.CVA_left_zapatistas
			}
			check_variable = { 
				CVA.CVA_orthodox_zapatistas > CVA.CVA_right_zapatistas
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_orthodox_military_policy_idea_3
			add_idea = CVA_CTH_orthodox_military_policy_idea_4
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_orthodox_military_policy_idea_2
			check_variable = { 
				CVA.CVA_orthodox_zapatistas > CVA.CVA_left_zapatistas
			}
			check_variable = { 
				CVA.CVA_orthodox_zapatistas > CVA.CVA_right_zapatistas
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_orthodox_military_policy_idea_2
			add_idea = CVA_CTH_orthodox_military_policy_idea_3
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_orthodox_military_policy_idea_1
			check_variable = { 
				CVA.CVA_orthodox_zapatistas > CVA.CVA_left_zapatistas
			}
			check_variable = { 
				CVA.CVA_orthodox_zapatistas > CVA.CVA_right_zapatistas
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_orthodox_military_policy_idea_1
			add_idea = CVA_CTH_orthodox_military_policy_idea_2
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_orthodox_military_policy_idea_3
			OR = {
				check_variable = { 
					CVA.CVA_left_zapatistas > CVA.CVA_orthodox_zapatistas
				}
				check_variable = { 
					CVA.CVA_right_zapatistas > CVA.CVA_orthodox_zapatistas
				}
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_orthodox_military_policy_idea_3
			add_idea = CVA_CTH_orthodox_military_policy_idea_2
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_orthodox_military_policy_idea_2
			OR = {
				check_variable = { 
					CVA.CVA_left_zapatistas > CVA.CVA_orthodox_zapatistas
				}
				check_variable = { 
					CVA.CVA_right_zapatistas > CVA.CVA_orthodox_zapatistas
				}
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_orthodox_military_policy_idea_2
			add_idea = CVA_CTH_orthodox_military_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_orthodox_military_policy_idea_1
			check_variable = { 
				CVA.CVA_left_zapatistas > CVA.CVA_orthodox_zapatistas
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_orthodox_military_policy_idea_1
			add_idea = CVA_CTH_evolutionary_military_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_orthodox_military_policy_idea_1
			check_variable = { 
				CVA.CVA_right_zapatistas > CVA.CVA_orthodox_zapatistas
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_orthodox_military_policy_idea_1
			add_idea = CVA_CTH_pragmatist_military_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_evolutionary_military_policy_idea_3
			check_variable = { 
				CVA.CVA_left_zapatistas > CVA.CVA_orthodox_zapatistas
			}
			check_variable = { 
				CVA.CVA_left_zapatistas > CVA.CVA_right_zapatistas
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_evolutionary_military_policy_idea_3
			add_idea = CVA_CTH_evolutionary_military_policy_idea_4
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_evolutionary_military_policy_idea_2
			check_variable = { 
				CVA.CVA_left_zapatistas > CVA.CVA_orthodox_zapatistas
			}
			check_variable = { 
				CVA.CVA_left_zapatistas > CVA.CVA_right_zapatistas
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_evolutionary_military_policy_idea_2
			add_idea = CVA_CTH_evolutionary_military_policy_idea_3
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_evolutionary_military_policy_idea_1
			check_variable = { 
				CVA.CVA_left_zapatistas > CVA.CVA_orthodox_zapatistas
			}
			check_variable = { 
				CVA.CVA_left_zapatistas > CVA.CVA_right_zapatistas
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_evolutionary_military_policy_idea_1
			add_idea = CVA_CTH_evolutionary_military_policy_idea_2
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_evolutionary_military_policy_idea_1
			check_variable = { 
				CVA.CVA_orthodox_zapatistas > CVA.CVA_left_zapatistas
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_evolutionary_military_policy_idea_1
			add_idea = CVA_CTH_orthodox_military_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_evolutionary_military_policy_idea_1
			check_variable = { 
				CVA.CVA_right_zapatistas > CVA.CVA_left_zapatistas
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_evolutionary_military_policy_idea_1
			add_idea = CVA_CTH_pragmatist_military_policy_idea_1
		}
	}
	else_if = {
	    limit = {
	    check_variable = {
			var = CVA_CTH_military_system_variable
			value = 6
			compare = greater_than_or_equals
			}
		}
		hidden_effect = {
	    	remove_ideas = CVA_CTH_evolutionary_military_policy_idea_1
			remove_ideas = CVA_CTH_evolutionary_military_policy_idea_2
			remove_ideas = CVA_CTH_evolutionary_military_policy_idea_3
			remove_ideas = CVA_CTH_orthodox_military_policy_idea_1
			remove_ideas = CVA_CTH_orthodox_military_policy_idea_2
			remove_ideas = CVA_CTH_orthodox_military_policy_idea_3
			remove_ideas = CVA_CTH_pragmatist_military_policy_idea_1
			remove_ideas = CVA_CTH_pragmatist_military_policy_idea_2
			remove_ideas = CVA_CTH_pragmatist_military_policy_idea_3
		}
		add_ideas = CVA_CTH_perfect_military_system_idea
	}
}

CVA_update_military_system_event_evolutionary = {
    if = {
		limit = {
			has_idea = CVA_CTH_pragmatist_military_policy_idea_3
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_pragmatist_military_policy_idea_3
			add_idea = CVA_CTH_pragmatist_military_policy_idea_2
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_pragmatist_military_policy_idea_2
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_pragmatist_military_policy_idea_2
			add_idea = CVA_CTH_pragmatist_military_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_pragmatist_military_policy_idea_1
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_pragmatist_military_policy_idea_1
			add_idea = CVA_CTH_evolutionary_military_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_orthodox_military_policy_idea_3
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_orthodox_military_policy_idea_3
			add_idea = CVA_CTH_orthodox_military_policy_idea_2
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_orthodox_military_policy_idea_2
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_orthodox_military_policy_idea_2
			add_idea = CVA_CTH_orthodox_military_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_orthodox_military_policy_idea_1
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_orthodox_military_policy_idea_1
			add_idea = CVA_CTH_evolutionary_military_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_evolutionary_military_policy_idea_1
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_evolutionary_military_policy_idea_1
			add_idea = CVA_CTH_evolutionary_military_policy_idea_2
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_evolutionary_military_policy_idea_2
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_evolutionary_military_policy_idea_2
			add_idea = CVA_CTH_evolutionary_military_policy_idea_3
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_evolutionary_military_policy_idea_3
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_evolutionary_military_policy_idea_3
			add_idea = CVA_CTH_evolutionary_military_policy_idea_4
		}
	}
	else_if = {
	    limit = {
	    check_variable = {
			var = CVA_CTH_military_system_variable
			value = 6
			compare = greater_than_or_equals
			}
		}
		hidden_effect = {
	    	remove_ideas = CVA_CTH_evolutionary_military_policy_idea_1
			remove_ideas = CVA_CTH_evolutionary_military_policy_idea_2
			remove_ideas = CVA_CTH_evolutionary_military_policy_idea_3
			remove_ideas = CVA_CTH_orthodox_military_policy_idea_1
			remove_ideas = CVA_CTH_orthodox_military_policy_idea_2
			remove_ideas = CVA_CTH_orthodox_military_policy_idea_3
			remove_ideas = CVA_CTH_pragmatist_military_policy_idea_1
			remove_ideas = CVA_CTH_pragmatist_military_policy_idea_2
			remove_ideas = CVA_CTH_pragmatist_military_policy_idea_3
		}
		add_ideas = CVA_CTH_perfect_military_system_idea
	}
}

CVA_update_military_system_event_orthodox = {
    if = {
		limit = {
			has_idea = CVA_CTH_pragmatist_military_policy_idea_3
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_pragmatist_military_policy_idea_3
			add_idea = CVA_CTH_pragmatist_military_policy_idea_2
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_pragmatist_military_policy_idea_2
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_pragmatist_military_policy_idea_2
			add_idea = CVA_CTH_pragmatist_military_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_pragmatist_military_policy_idea_1
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_pragmatist_military_policy_idea_1
			add_idea = CVA_CTH_orthodox_military_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_evolutionary_military_policy_idea_3
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_evolutionary_military_policy_idea_3
			add_idea = CVA_CTH_evolutionary_military_policy_idea_2
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_evolutionary_military_policy_idea_2
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_evolutionary_military_policy_idea_2
			add_idea = CVA_CTH_evolutionary_military_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_evolutionary_military_policy_idea_1
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_evolutionary_military_policy_idea_1
			add_idea = CVA_CTH_orthodox_military_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_orthodox_military_policy_idea_1
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_orthodox_military_policy_idea_1
			add_idea = CVA_CTH_orthodox_military_policy_idea_2
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_orthodox_military_policy_idea_2
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_orthodox_military_policy_idea_2
			add_idea = CVA_CTH_orthodox_military_policy_idea_3
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_orthodox_military_policy_idea_3
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_orthodox_military_policy_idea_3
			add_idea = CVA_CTH_orthodox_military_policy_idea_4
		}
	}
	else_if = {
	    limit = {
	    check_variable = {
			var = CVA_CTH_military_system_variable
			value = 6
			compare = greater_than_or_equals
			}
		}
		hidden_effect = {
	    	remove_ideas = CVA_CTH_evolutionary_military_policy_idea_1
			remove_ideas = CVA_CTH_evolutionary_military_policy_idea_2
			remove_ideas = CVA_CTH_evolutionary_military_policy_idea_3
			remove_ideas = CVA_CTH_orthodox_military_policy_idea_1
			remove_ideas = CVA_CTH_orthodox_military_policy_idea_2
			remove_ideas = CVA_CTH_orthodox_military_policy_idea_3
			remove_ideas = CVA_CTH_pragmatist_military_policy_idea_1
			remove_ideas = CVA_CTH_pragmatist_military_policy_idea_2
			remove_ideas = CVA_CTH_pragmatist_military_policy_idea_3
		}
		add_ideas = CVA_CTH_perfect_military_system_idea
	}
}

CVA_update_military_system_event_pragmatist = {
    if = {
		limit = {
			has_idea = CVA_CTH_orthodox_military_policy_idea_3
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_orthodox_military_policy_idea_3
			add_idea = CVA_CTH_orthodox_military_policy_idea_2
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_orthodox_military_policy_idea_2
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_orthodox_military_policy_idea_2
			add_idea = CVA_CTH_orthodox_military_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_orthodox_military_policy_idea_1 
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_orthodox_military_policy_idea_1
			add_idea = CVA_CTH_pragmatist_military_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_evolutionary_military_policy_idea_3
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_evolutionary_military_policy_idea_3
			add_idea = CVA_CTH_evolutionary_military_policy_idea_2
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_evolutionary_military_policy_idea_2
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_evolutionary_military_policy_idea_2
			add_idea = CVA_CTH_evolutionary_military_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_evolutionary_military_policy_idea_1
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_evolutionary_military_policy_idea_1
			add_idea = CVA_CTH_pragmatist_military_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_pragmatist_military_policy_idea_1
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_pragmatist_military_policy_idea_1
			add_idea = CVA_CTH_pragmatist_military_policy_idea_2
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_pragmatist_military_policy_idea_2
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_pragmatist_military_policy_idea_2
			add_idea = CVA_CTH_pragmatist_military_policy_idea_3
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_pragmatist_military_policy_idea_3
			NOT = {
			    check_variable = {
					var = CVA_CTH_military_system_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_pragmatist_military_policy_idea_3
			add_idea = CVA_CTH_pragmatist_military_policy_idea_4
		}
	}
	else_if = {
	    limit = {
	    check_variable = {
			var = CVA_CTH_military_system_variable
			value = 6
			compare = greater_than_or_equals
			}
		}
		hidden_effect = {
	    	remove_ideas = CVA_CTH_evolutionary_military_policy_idea_1
			remove_ideas = CVA_CTH_evolutionary_military_policy_idea_2
			remove_ideas = CVA_CTH_evolutionary_military_policy_idea_3
			remove_ideas = CVA_CTH_orthodox_military_policy_idea_1
			remove_ideas = CVA_CTH_orthodox_military_policy_idea_2
			remove_ideas = CVA_CTH_orthodox_military_policy_idea_3
			remove_ideas = CVA_CTH_pragmatist_military_policy_idea_1
			remove_ideas = CVA_CTH_pragmatist_military_policy_idea_2
			remove_ideas = CVA_CTH_pragmatist_military_policy_idea_3
		}
		add_ideas = CVA_CTH_perfect_military_system_idea
	}
}

CVA_update_law_code = {
    if = {
		limit = {
			has_idea = CVA_CTH_pragmatist_internal_policy_idea_3
			check_variable = { 
				CVA.CVA_right_zapatistas > CVA.CVA_left_zapatistas
			}
			check_variable = { 
				CVA.CVA_right_zapatistas > CVA.CVA_orthodox_zapatistas
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_pragmatist_internal_policy_idea_3
			add_idea = CVA_CTH_pragmatist_internal_policy_idea_4
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_pragmatist_internal_policy_idea_2
			check_variable = { 
				CVA.CVA_right_zapatistas > CVA.CVA_left_zapatistas
			}
			check_variable = { 
				CVA.CVA_right_zapatistas > CVA.CVA_orthodox_zapatistas
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_pragmatist_internal_policy_idea_2
			add_idea = CVA_CTH_pragmatist_internal_policy_idea_3
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_pragmatist_internal_policy_idea_1
			check_variable = { 
				CVA.CVA_right_zapatistas > CVA.CVA_left_zapatistas
			}
			check_variable = { 
				CVA.CVA_right_zapatistas > CVA.CVA_orthodox_zapatistas
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_pragmatist_internal_policy_idea_1
			add_idea = CVA_CTH_pragmatist_internal_policy_idea_2
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_pragmatist_internal_policy_idea_3
			OR = {
				check_variable = { 
					CVA.CVA_left_zapatistas > CVA.CVA_right_zapatistas
				}
				check_variable = { 
					CVA.CVA_orthodox_zapatistas > CVA.CVA_right_zapatistas
				}
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_pragmatist_internal_policy_idea_3
			add_idea = CVA_CTH_pragmatist_internal_policy_idea_2
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_pragmatist_internal_policy_idea_2
			OR = {
				check_variable = { 
					CVA.CVA_left_zapatistas > CVA.CVA_right_zapatistas
				}
				check_variable = { 
					CVA.CVA_orthodox_zapatistas > CVA.CVA_right_zapatistas
				}
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_pragmatist_internal_policy_idea_2
			add_idea = CVA_CTH_pragmatist_internal_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_pragmatist_internal_policy_idea_1
			check_variable = { 
			    CVA.CVA_left_zapatistas > CVA.CVA_right_zapatistas
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_pragmatist_internal_policy_idea_1
			add_idea = CVA_CTH_evolutionary_internal_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_pragmatist_internal_policy_idea_1
			check_variable = { 
				CVA.CVA_orthodox_zapatistas > CVA.CVA_right_zapatistas
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_pragmatist_internal_policy_idea_1
			add_idea = CVA_CTH_orthodox_internal_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_orthodox_internal_policy_idea_3
			check_variable = { 
				CVA.CVA_orthodox_zapatistas > CVA.CVA_left_zapatistas
			}
			check_variable = { 
				CVA.CVA_orthodox_zapatistas > CVA.CVA_right_zapatistas
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_orthodox_internal_policy_idea_3
			add_idea = CVA_CTH_orthodox_internal_policy_idea_4
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_orthodox_internal_policy_idea_2
			check_variable = { 
				CVA.CVA_orthodox_zapatistas > CVA.CVA_left_zapatistas
			}
			check_variable = { 
				CVA.CVA_orthodox_zapatistas > CVA.CVA_right_zapatistas
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_orthodox_internal_policy_idea_2
			add_idea = CVA_CTH_orthodox_internal_policy_idea_3
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_orthodox_internal_policy_idea_1
			check_variable = { 
				CVA.CVA_orthodox_zapatistas > CVA.CVA_left_zapatistas
			}
			check_variable = { 
				CVA.CVA_orthodox_zapatistas > CVA.CVA_right_zapatistas
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_orthodox_internal_policy_idea_1
			add_idea = CVA_CTH_orthodox_internal_policy_idea_2
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_orthodox_internal_policy_idea_3
			OR = {
				check_variable = { 
					CVA.CVA_left_zapatistas > CVA.CVA_orthodox_zapatistas
				}
				check_variable = { 
					CVA.CVA_right_zapatistas > CVA.CVA_orthodox_zapatistas
				}
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_orthodox_internal_policy_idea_3
			add_idea = CVA_CTH_orthodox_internal_policy_idea_2
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_orthodox_internal_policy_idea_2
			OR = {
				check_variable = { 
					CVA.CVA_left_zapatistas > CVA.CVA_orthodox_zapatistas
				}
				check_variable = { 
					CVA.CVA_right_zapatistas > CVA.CVA_orthodox_zapatistas
				}
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_orthodox_internal_policy_idea_2
			add_idea = CVA_CTH_orthodox_internal_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_orthodox_internal_policy_idea_1
			check_variable = { 
				CVA.CVA_left_zapatistas > CVA.CVA_orthodox_zapatistas
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_orthodox_internal_policy_idea_1
			add_idea = CVA_CTH_evolutionary_internal_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_orthodox_internal_policy_idea_1
			check_variable = { 
				CVA.CVA_right_zapatistas > CVA.CVA_orthodox_zapatistas
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_orthodox_internal_policy_idea_1
			add_idea = CVA_CTH_pragmatist_internal_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_evolutionary_internal_policy_idea_3
			check_variable = { 
				CVA.CVA_left_zapatistas > CVA.CVA_orthodox_zapatistas
			}
			check_variable = { 
				CVA.CVA_left_zapatistas > CVA.CVA_right_zapatistas
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_evolutionary_internal_policy_idea_3
			add_idea = CVA_CTH_evolutionary_internal_policy_idea_4
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_evolutionary_internal_policy_idea_2
			check_variable = { 
				CVA.CVA_left_zapatistas > CVA.CVA_orthodox_zapatistas
			}
			check_variable = { 
				CVA.CVA_left_zapatistas > CVA.CVA_right_zapatistas
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_evolutionary_internal_policy_idea_2
			add_idea = CVA_CTH_evolutionary_internal_policy_idea_3
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_evolutionary_internal_policy_idea_1
			check_variable = { 
				CVA.CVA_left_zapatistas > CVA.CVA_orthodox_zapatistas
			}
			check_variable = { 
				CVA.CVA_left_zapatistas > CVA.CVA_right_zapatistas
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_evolutionary_internal_policy_idea_1
			add_idea = CVA_CTH_evolutionary_internal_policy_idea_2
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_evolutionary_internal_policy_idea_1
			check_variable = { 
				CVA.CVA_orthodox_zapatistas > CVA.CVA_left_zapatistas
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_evolutionary_internal_policy_idea_1
			add_idea = CVA_CTH_orthodox_internal_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_evolutionary_internal_policy_idea_1
			check_variable = { 
				CVA.CVA_right_zapatistas > CVA.CVA_left_zapatistas
			}
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_evolutionary_internal_policy_idea_1
			add_idea = CVA_CTH_pragmatist_internal_policy_idea_1
		}
	}
	else_if = {
	    limit = {
	    check_variable = {
			var = CVA_CTH_law_code_variable
			value = 6
			compare = greater_than_or_equals
			}
		}
		hidden_effect = {
	    	remove_ideas = CVA_CTH_evolutionary_internal_policy_idea_1
			remove_ideas = CVA_CTH_evolutionary_internal_policy_idea_2
			remove_ideas = CVA_CTH_evolutionary_internal_policy_idea_3
			remove_ideas = CVA_CTH_orthodox_internal_policy_idea_1
			remove_ideas = CVA_CTH_orthodox_internal_policy_idea_2
			remove_ideas = CVA_CTH_orthodox_internal_policy_idea_3
			remove_ideas = CVA_CTH_pragmatist_internal_policy_idea_1
			remove_ideas = CVA_CTH_pragmatist_internal_policy_idea_2
			remove_ideas = CVA_CTH_pragmatist_internal_policy_idea_3
		}
		add_ideas = CVA_CTH_perfect_internal_policy_idea
	}
}

CVA_update_law_code_event_evolutionary = {
    if = {
		limit = {
			has_idea = CVA_CTH_pragmatist_internal_policy_idea_3
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_pragmatist_internal_policy_idea_3
			add_idea = CVA_CTH_pragmatist_internal_policy_idea_2
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_pragmatist_internal_policy_idea_2
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_pragmatist_internal_policy_idea_2
			add_idea = CVA_CTH_pragmatist_internal_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_pragmatist_internal_policy_idea_1
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_pragmatist_internal_policy_idea_1
			add_idea = CVA_CTH_evolutionary_internal_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_orthodox_internal_policy_idea_3
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_orthodox_internal_policy_idea_3
			add_idea = CVA_CTH_orthodox_internal_policy_idea_2
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_orthodox_internal_policy_idea_2
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_orthodox_internal_policy_idea_2
			add_idea = CVA_CTH_orthodox_internal_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_orthodox_internal_policy_idea_1
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_orthodox_internal_policy_idea_1
			add_idea = CVA_CTH_evolutionary_internal_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_evolutionary_internal_policy_idea_1
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_evolutionary_internal_policy_idea_1
			add_idea = CVA_CTH_evolutionary_internal_policy_idea_2
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_evolutionary_internal_policy_idea_2
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_evolutionary_internal_policy_idea_2
			add_idea = CVA_CTH_evolutionary_internal_policy_idea_3
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_evolutionary_internal_policy_idea_3
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_evolutionary_internal_policy_idea_3
			add_idea = CVA_CTH_evolutionary_internal_policy_idea_4
		}
	}
	else_if = {
	    limit = {
	    check_variable = {
			var = CVA_CTH_law_code_variable
			value = 6
			compare = greater_than_or_equals
			}
		}
		hidden_effect = {
	    	remove_ideas = CVA_CTH_evolutionary_internal_policy_idea_1
			remove_ideas = CVA_CTH_evolutionary_internal_policy_idea_2
			remove_ideas = CVA_CTH_evolutionary_internal_policy_idea_3
			remove_ideas = CVA_CTH_orthodox_internal_policy_idea_1
			remove_ideas = CVA_CTH_orthodox_internal_policy_idea_2
			remove_ideas = CVA_CTH_orthodox_internal_policy_idea_3
			remove_ideas = CVA_CTH_pragmatist_internal_policy_idea_1
			remove_ideas = CVA_CTH_pragmatist_internal_policy_idea_2
			remove_ideas = CVA_CTH_pragmatist_internal_policy_idea_3
		}
		add_ideas = CVA_CTH_perfect_internal_policy_idea
	}
}

CVA_update_law_code_event_orthodox = {
    if = {
		limit = {
			has_idea = CVA_CTH_pragmatist_internal_policy_idea_3
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_pragmatist_internal_policy_idea_3
			add_idea = CVA_CTH_pragmatist_internal_policy_idea_2
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_pragmatist_internal_policy_idea_2
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_pragmatist_internal_policy_idea_2
			add_idea = CVA_CTH_pragmatist_internal_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_pragmatist_internal_policy_idea_1
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_pragmatist_internal_policy_idea_1
			add_idea = CVA_CTH_orthodox_internal_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_evolutionary_internal_policy_idea_3
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_evolutionary_internal_policy_idea_3
			add_idea = CVA_CTH_evolutionary_internal_policy_idea_2
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_evolutionary_internal_policy_idea_2
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_evolutionary_internal_policy_idea_2
			add_idea = CVA_CTH_evolutionary_internal_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_evolutionary_internal_policy_idea_1
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_evolutionary_internal_policy_idea_1
			add_idea = CVA_CTH_orthodox_internal_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_orthodox_internal_policy_idea_1
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_orthodox_internal_policy_idea_1
			add_idea = CVA_CTH_orthodox_internal_policy_idea_2
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_orthodox_internal_policy_idea_2
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_orthodox_internal_policy_idea_2
			add_idea = CVA_CTH_orthodox_internal_policy_idea_3
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_orthodox_internal_policy_idea_3
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_orthodox_internal_policy_idea_3
			add_idea = CVA_CTH_orthodox_internal_policy_idea_4
		}
	}
	else_if = {
	    limit = {
	    check_variable = {
			var = CVA_CTH_law_code_variable
			value = 6
			compare = greater_than_or_equals
			}
		}
		hidden_effect = {
	    	remove_ideas = CVA_CTH_evolutionary_internal_policy_idea_1
			remove_ideas = CVA_CTH_evolutionary_internal_policy_idea_2
			remove_ideas = CVA_CTH_evolutionary_internal_policy_idea_3
			remove_ideas = CVA_CTH_orthodox_internal_policy_idea_1
			remove_ideas = CVA_CTH_orthodox_internal_policy_idea_2
			remove_ideas = CVA_CTH_orthodox_internal_policy_idea_3
			remove_ideas = CVA_CTH_pragmatist_internal_policy_idea_1
			remove_ideas = CVA_CTH_pragmatist_internal_policy_idea_2
			remove_ideas = CVA_CTH_pragmatist_internal_policy_idea_3
		}
		add_ideas = CVA_CTH_perfect_internal_policy_idea
	}
}

CVA_update_law_code_event_pragmatist = {
    if = {
		limit = {
			has_idea = CVA_CTH_orthodox_internal_policy_idea_3
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_orthodox_internal_policy_idea_3
			add_idea = CVA_CTH_orthodox_internal_policy_idea_2
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_orthodox_internal_policy_idea_2
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_orthodox_internal_policy_idea_2
			add_idea = CVA_CTH_orthodox_internal_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_orthodox_internal_policy_idea_1 
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_orthodox_internal_policy_idea_1
			add_idea = CVA_CTH_pragmatist_internal_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_evolutionary_internal_policy_idea_3
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_evolutionary_internal_policy_idea_3
			add_idea = CVA_CTH_evolutionary_internal_policy_idea_2
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_evolutionary_internal_policy_idea_2
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_evolutionary_internal_policy_idea_2
			add_idea = CVA_CTH_evolutionary_internal_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_evolutionary_internal_policy_idea_1
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_evolutionary_internal_policy_idea_1
			add_idea = CVA_CTH_pragmatist_internal_policy_idea_1
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_pragmatist_internal_policy_idea_1
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_pragmatist_internal_policy_idea_1
			add_idea = CVA_CTH_pragmatist_internal_policy_idea_2
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_pragmatist_internal_policy_idea_2
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_pragmatist_internal_policy_idea_2
			add_idea = CVA_CTH_pragmatist_internal_policy_idea_3
		}
	}
	else_if = {
	    limit = {
		    has_idea = CVA_CTH_pragmatist_internal_policy_idea_3
			NOT = {
			    check_variable = {
					var = CVA_CTH_law_code_variable
					value = 6
					compare = greater_than_or_equals
				}
			}
		}
		swap_ideas = {
		    remove_idea = CVA_CTH_pragmatist_internal_policy_idea_3
			add_idea = CVA_CTH_pragmatist_internal_policy_idea_4
		}
	}
	else_if = {
	    limit = {
	    check_variable = {
			var = CVA_CTH_law_code_variable
			value = 6
			compare = greater_than_or_equals
			}
		}
		hidden_effect = {
	    	remove_ideas = CVA_CTH_evolutionary_internal_policy_idea_1
			remove_ideas = CVA_CTH_evolutionary_internal_policy_idea_2
			remove_ideas = CVA_CTH_evolutionary_internal_policy_idea_3
			remove_ideas = CVA_CTH_orthodox_internal_policy_idea_1
			remove_ideas = CVA_CTH_orthodox_internal_policy_idea_2
			remove_ideas = CVA_CTH_orthodox_internal_policy_idea_3
			remove_ideas = CVA_CTH_pragmatist_internal_policy_idea_1
			remove_ideas = CVA_CTH_pragmatist_internal_policy_idea_2
			remove_ideas = CVA_CTH_pragmatist_internal_policy_idea_3
		}
		add_ideas = CVA_CTH_perfect_internal_policy_idea
	}
}

calculate_CVA_CTH_consumer_goods = {
	set_variable = {
		CVA_CTH_consumer_goods_factor_var = CVA_CTH_pragmatist_social_services_var
	}
	multiply_variable = {
		CVA_CTH_consumer_goods_factor_var = 0.003
	}
	subtract_from_variable = {
		CVA_CTH_consumer_goods_factor_var = 0.15
	}
	force_update_dynamic_modifier = yes
}
calculate_CVA_CTH_stability_weekly = {
	set_variable = {
		CVA_CTH_stability_weekly_var = CVA_CTH_evolutionary_social_services_var
	}
	multiply_variable = {
		CVA_CTH_stability_weekly_var = 0.002
	}
	force_update_dynamic_modifier = yes
}
calculate_CVA_CTH_monthly_population = {
	set_variable = {
		CVA_CTH_monthly_population_var = CVA_CTH_orthodox_social_services_var
	}
	multiply_variable = {
		CVA_CTH_monthly_population_var = 0.002
	}
	force_update_dynamic_modifier = yes
}
calculate_CVA_CTH_political_power_factor = {
	set_variable = {
		CVA_CTH_political_power_factor_var = CVA_CTH_focuses_taken_var
	}
	multiply_variable = {
		CVA_CTH_political_power_factor_var = 0.025
	}
	force_update_dynamic_modifier = yes
}

# example:
# CVA = { ZES = { CVA_transfer_60_percent_of_THIS_to_PREV = yes } }
CVA_transfer_60_percent_of_THIS_to_PREV = {
	PREV = {
		set_temp_variable = { taker = THIS }
		save_current_manpower = yes
	}

	set_temp_variable = { pop_to_remove_k = 0 }
	set_temp_variable = { civ_factories_to_remove = 0 }
	set_temp_variable = { mil_factories_to_remove = 0 }
	set_temp_variable = { nav_factories_to_remove = 0 }
	set_temp_variable = { factories_total = 0 }
	
	
	for_each_scope_loop = {
		array = original_cores
		if = {
			limit = {
				is_owned_by = var:taker
				is_fully_controlled_by = var:taker
			}
			set_temp_variable = { pop_60 = state_population }
			multiply_temp_variable = { pop_60 = -0.6 }
			add_manpower = pop_60
			multiply_temp_variable = { pop_60 = -0.001 }
			add_to_temp_variable = { pop_to_remove_k = pop_60 }
		
			set_temp_variable = { civ_factories = building_level@industrial_complex }
			multiply_temp_variable = { civ_factories = 0.6 }
			round_temp_variable = civ_factories
			remove_building = {
				type = industrial_complex
				level = civ_factories
			}
			add_to_temp_variable = { civ_factories_to_remove = civ_factories }
		
			set_temp_variable = { mil_factories = building_level@arms_factory }
			multiply_temp_variable = { mil_factories = 0.6 }
			round_temp_variable = mil_factories
			remove_building = {
				type = arms_factory
				level = mil_factories
			}
			add_to_temp_variable = { mil_factories_to_remove = mil_factories }
		
			set_temp_variable = { nav_factories = building_level@dockyard }
			multiply_temp_variable = { nav_factories = 0.6 }
			round_temp_variable = nav_factories
			remove_building = {
				type = dockyard
				level = nav_factories
			}
			add_to_temp_variable = { nav_factories_to_remove = nav_factories }
		}
	}
	
	add_to_temp_variable = { factories_total = civ_factories_to_remove }
	add_to_temp_variable = { factories_total = mil_factories_to_remove }
	add_to_temp_variable = { factories_total = nav_factories_to_remove }
	set_temp_variable = { one_pop_chunk = pop_to_remove_k }
	divide_temp_variable = { one_pop_chunk = factories_total }
	multiply_temp_variable = { one_pop_chunk = 1000 }
	clamp_temp_variable = {
		var = one_pop_chunk
		min = 0
	}

	#log = "pop_to_remove_k: [?pop_to_remove_k] civ_factories_to_remove: [?civ_factories_to_remove] mil_factories_to_remove: [?mil_factories_to_remove] nav_factories_to_remove: [?nav_factories_to_remove]" 
	#log = "one_pop_chunk: [?one_pop_chunk]"

	PREV = {
	
		while_loop_effect = {
			limit = {
				check_variable = { nav_factories_to_remove > 0 }
			}
			set_temp_variable = { break = 1 }
			random_owned_state = {
				limit = {
					is_fully_controlled_by = PREV
					is_core_of = PREV
					is_coastal = yes
					free_building_slots = {
						building = dockyard
						size > 0
						include_locked = yes
					}
				}
				#log = "adding nav to [This.GetName]"
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
				add_manpower = one_pop_chunk
				set_temp_variable = { break = 0 }
				subtract_from_temp_variable = { nav_factories_to_remove = 1 }
			}
		}
	
		
		while_loop_effect = {
			limit = {
				check_variable = { civ_factories_to_remove > 0 }
			}
			set_temp_variable = { break = 1 }
			random_owned_state = {
				limit = {
					is_fully_controlled_by = PREV
					is_core_of = PREV
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				#log = "adding civ to [This.GetName]"
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
				add_manpower = one_pop_chunk
				set_temp_variable = { break = 0 }
				subtract_from_temp_variable = { civ_factories_to_remove = 1 }
			}
		}
		
		while_loop_effect = {
			limit = {
				check_variable = { mil_factories_to_remove > 0 }
			}
			set_temp_variable = { break = 1 }
			random_owned_state = {
				limit = {
					is_fully_controlled_by = PREV
					is_core_of = PREV
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
				}
				#log = "adding mil to [This.GetName]"
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
				add_manpower = one_pop_chunk
				set_temp_variable = { break = 0 }
				subtract_from_temp_variable = { mil_factories_to_remove = 1 }
			}
		}
		
		while_loop_effect = {
			limit = {
				check_variable = { nav_factories_to_remove > 0 }
			}
			set_temp_variable = { break = 1 }
			random_owned_state = {
				limit = {
					is_fully_controlled_by = PREV
					is_core_of = PREV
					is_coastal = yes
				}
				#log = "adding slot nav to [This.GetName]"
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
				add_manpower = one_pop_chunk
				set_temp_variable = { break = 0 }
				subtract_from_temp_variable = { nav_factories_to_remove = 1 }
			}
		}
		
		while_loop_effect = {
			limit = {
				check_variable = { civ_factories_to_remove > 0 }
			}
			set_temp_variable = { break = 1 }
			random_owned_state = {
				limit = {
					is_fully_controlled_by = PREV
					is_core_of = PREV
				}
				#log = "adding slot civ to [This.GetName]"
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
				add_manpower = one_pop_chunk
				set_temp_variable = { break = 0 }
				subtract_from_temp_variable = { civ_factories_to_remove = 1 }
			}
		}

		while_loop_effect = {
			limit = {
				check_variable = { mil_factories_to_remove > 0 }
			}
			set_temp_variable = { break = 1 }
			random_owned_state = {
				limit = {
					is_fully_controlled_by = PREV
					is_core_of = PREV
				}
				#log = "adding slot mil to [This.GetName]"
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
				add_manpower = one_pop_chunk
				set_temp_variable = { break = 0 }
				subtract_from_temp_variable = { mil_factories_to_remove = 1 }
			}
		}
		
		restore_previous_manpower = yes
	}
}
