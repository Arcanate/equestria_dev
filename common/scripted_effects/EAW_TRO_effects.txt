calculate_TRO_CTH_corruption = {
	set_temp_variable = { TRO_CTH_corruption_temp = TRO_CTH_corruption } # Copy variable between 0 and 100
	subtract_from_temp_variable = { TRO_CTH_corruption_temp = 50 } #Variable is now between -50 to 50
	divide_temp_variable = { TRO_CTH_corruption_temp = 50 } #Variable is now -1 to 1

	set_temp_variable = { TRO_CTH_corruption_min_ppf = -0.15 }
	set_temp_variable = { TRO_CTH_corruption_min_wkstab = -0.005 }
	set_temp_variable = { TRO_CTH_corruption_min_indcap = -0.1 }
	set_temp_variable = { TRO_CTH_corruption_min_moralf = -0.1 }

	set_temp_variable = { TRO_CTH_corruption_max_locresf = 0.15 }
	set_temp_variable = { TRO_CTH_corruption_max_compgain = 0.1 }
	set_temp_variable = { TRO_CTH_corruption_max_consgood = -0.1 }
	set_temp_variable = { TRO_CTH_corruption_max_supplycomp = -0.1 }

	multiply_temp_variable = { TRO_CTH_corruption_min_ppf = TRO_CTH_corruption_temp}
	multiply_temp_variable = { TRO_CTH_corruption_min_wkstab = TRO_CTH_corruption_temp}
	multiply_temp_variable = { TRO_CTH_corruption_min_indcap = TRO_CTH_corruption_temp}
	multiply_temp_variable = { TRO_CTH_corruption_min_moralf = TRO_CTH_corruption_temp}
	multiply_temp_variable = { TRO_CTH_corruption_max_locresf = TRO_CTH_corruption_temp}
	multiply_temp_variable = { TRO_CTH_corruption_max_compgain = TRO_CTH_corruption_temp}
	multiply_temp_variable = { TRO_CTH_corruption_max_consgood = TRO_CTH_corruption_temp}
	multiply_temp_variable = { TRO_CTH_corruption_max_supplycomp = TRO_CTH_corruption_temp}

	set_variable = { modif_TRO_CTH_corruption_min_ppf = TRO_CTH_corruption_min_ppf}
	set_variable = { modif_TRO_CTH_corruption_min_wkstab = TRO_CTH_corruption_min_wkstab}
	set_variable = { modif_TRO_CTH_corruption_min_indcap = TRO_CTH_corruption_min_indcap}
	set_variable = { modif_TRO_CTH_corruption_min_moralf = TRO_CTH_corruption_min_moralf}
	set_variable = { modif_TRO_CTH_corruption_max_locresf = TRO_CTH_corruption_max_locresf}
	set_variable = { modif_TRO_CTH_corruption_max_compgain = TRO_CTH_corruption_max_compgain}
	set_variable = { modif_TRO_CTH_corruption_max_consgood = TRO_CTH_corruption_max_consgood}
	set_variable = { modif_TRO_CTH_corruption_max_supplycomp = TRO_CTH_corruption_max_supplycomp}
	force_update_dynamic_modifier = yes
	
	TRO_calculate_corruption_karma_gui = yes
}

# x = 2.62a + 81 where a is the corruption var.
TRO_calculate_corruption_karma_gui = {
	set_temp_variable = { x_calc = TRO_CTH_corruption }
	multiply_temp_variable = { x_calc = 2.62 }
	add_to_temp_variable = { x_calc = 81 }
	set_variable = { TRO_corruption_karma_x = x_calc }
}

calculate_TRO_CTH_army = {
	force_update_dynamic_modifier = yes
}

calculate_TRO_CTH_economy = {
	force_update_dynamic_modifier = yes
}

TRO_modify_army_of_the_republic = {
	custom_effect_tooltip = TRO_CTH_army_reforms_main_tp
	add_to_variable = { TRO_CTH_army_conscription_factor_var = temp_conscription_factor }
	add_to_variable = { TRO_CTH_planning_speed_factor_var = temp_planning }
	add_to_variable = { TRO_CTH_mobilization_speed_var = temp_mob }
	add_to_variable = { TRO_CTH_conscription_var = temp_conscription }
	add_to_variable = { TRO_CTH_army_org_regain_var = temp_army_org_regain }
	add_to_variable = { TRO_CTH_training_time_factor_var = temp_training_time_factor }
	add_to_variable = { TRO_CTH_army_fuel_consumption_factor_var = temp_army_fuel_consumption_factor }
	add_to_variable = { TRO_CTH_industrial_capacity_factory_1_var = temp_industrial_capacity_factory }
	add_to_variable = { TRO_CTH_army_defence_factor_var = temp_army_defence_factor }
	add_to_variable = { TRO_CTH_no_supply_grace_var = temp_no_supply_factor }
	add_to_variable = { TRO_CTH_supply_consumption_factor_var = temp_supply_consumption_factor }
	add_to_variable = { TRO_CTH_modifier_army_sub_unit_spirit_warriors_attack_factor_var = temp_chargers }
	add_to_variable = { TRO_CTH_production_factory_start_efficiency_factor_var = temp_production_start_eff_factor }
	add_to_variable = { TRO_CTH_special_forces_attack_factor_var = temp_sf_attack }
	add_to_variable = { TRO_CTH_army_org_factor_var = temp_army_org_factor }
	add_to_variable = { TRO_CTH_army_speed_factor_var = temp_army_speed_factor }
	add_to_variable = { TRO_CTH_out_of_supply_factor_var = temp_out_of_supply_factor }
	add_to_variable = { TRO_CTH_org_loss_when_moving_var = temp_org_loss_when_moving }
	add_to_variable = { TRO_CTH_army_attack_factor_var = temp_army_attack_factor }
	add_to_variable = { TRO_CTH_special_forces_cap_var = temp_special_forces_cap }
	add_to_variable = { TRO_CTH_army_morale_factor_var = temp_army_morale_factor }
}

TRO_modify_economic_development = {
	custom_effect_tooltip = TRO_CTH_economic_development_main_tp
	add_to_variable = { TRO_CTH_consumer_goods_var = temp_consumer_goods }
	add_to_variable = { TRO_CTH_monthly_population_var = temp_monthly_pop }
	add_to_variable = { TRO_CTH_political_power_factor_1_var = temp_pp_factor }
	add_to_variable = { TRO_CTH_global_building_slots_factor_var = temp_global_building_slots }
	add_to_variable = { TRO_CTH_trade_opinion_factor_var = temp_trade_opinion }
	add_to_variable = { TRO_CTH_min_export_var = temp_min_export }
	add_to_variable = { TRO_CTH_industrial_capacity_factory_2_var = temp_ic }
	add_to_variable = { TRO_CTH_local_resources_factor_var = temp_local_resources }
	add_to_variable = { TRO_CTH_stability_weekly_1_var = temp_weekly_stability }
	add_to_variable = { TRO_CTH_production_factory_start_efficiency_factor_var_2 = temp_start_eff_2 }
	add_to_variable = { TRO_CTH_production_speed_buildings_factor_var = temp_construction }
	add_to_variable = { TRO_CTH_production_factory_efficiency_gain_factor_var = temp_eff_gain }
}
