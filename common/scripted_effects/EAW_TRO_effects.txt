calculate_TRO_CTH_corruption = {
	set_temp_variable = { TRO_CTH_corruption_temp = TRO_CTH_corruption } # Copy variable between 0 and 100
	subtract_from_temp_variable = { TRO_CTH_corruption_temp = 50 } #Variable is now between -50 to 50
	divide_temp_variable = { TRO_CTH_corruption_temp = 50 } #Variable is now -1 to 1

	set_temp_variable = { TRO_CTH_corruption_min_ppf = -0.15 }
	set_temp_variable = { TRO_CTH_corruption_min_wkstab = -0.005 }
	set_temp_variable = { TRO_CTH_corruption_min_indcap = -0.1 }
	set_temp_variable = { TRO_CTH_corruption_min_moralf = -0.1 }

	set_temp_variable = { TRO_CTH_corruption_max_locresf = 0.15 }
	set_temp_variable = { TRO_CTH_corruption_max_compgain = 0.1 }
	set_temp_variable = { TRO_CTH_corruption_max_consgood = -0.1 }
	set_temp_variable = { TRO_CTH_corruption_max_supplycomp = -0.1 }

	multiply_temp_variable = { TRO_CTH_corruption_min_ppf = TRO_CTH_corruption_temp}
	multiply_temp_variable = { TRO_CTH_corruption_min_wkstab = TRO_CTH_corruption_temp}
	multiply_temp_variable = { TRO_CTH_corruption_min_indcap = TRO_CTH_corruption_temp}
	multiply_temp_variable = { TRO_CTH_corruption_min_moralf = TRO_CTH_corruption_temp}
	multiply_temp_variable = { TRO_CTH_corruption_max_locresf = TRO_CTH_corruption_temp}
	multiply_temp_variable = { TRO_CTH_corruption_max_compgain = TRO_CTH_corruption_temp}
	multiply_temp_variable = { TRO_CTH_corruption_max_consgood = TRO_CTH_corruption_temp}
	multiply_temp_variable = { TRO_CTH_corruption_max_supplycomp = TRO_CTH_corruption_temp}

	set_variable = { modif_TRO_CTH_corruption_min_ppf = TRO_CTH_corruption_min_ppf}
	set_variable = { modif_TRO_CTH_corruption_min_wkstab = TRO_CTH_corruption_min_wkstab}
	set_variable = { modif_TRO_CTH_corruption_min_indcap = TRO_CTH_corruption_min_indcap}
	set_variable = { modif_TRO_CTH_corruption_min_moralf = TRO_CTH_corruption_min_moralf}
	set_variable = { modif_TRO_CTH_corruption_max_locresf = TRO_CTH_corruption_max_locresf}
	set_variable = { modif_TRO_CTH_corruption_max_compgain = TRO_CTH_corruption_max_compgain}
	set_variable = { modif_TRO_CTH_corruption_max_consgood = TRO_CTH_corruption_max_consgood}
	set_variable = { modif_TRO_CTH_corruption_max_supplycomp = TRO_CTH_corruption_max_supplycomp}
	force_update_dynamic_modifier = yes
	
	TRO_calculate_corruption_karma_gui = yes
}

# x = 2.62a + 81 where a is the corruption var.
TRO_calculate_corruption_karma_gui = {
	set_temp_variable = { x_calc = TRO_CTH_corruption }
	multiply_temp_variable = { x_calc = 2.62 }
	add_to_temp_variable = { x_calc = 81 }
	set_variable = { TRO_corruption_karma_x = x_calc }
}

calculate_TRO_CTH_army = {
	force_update_dynamic_modifier = yes
}