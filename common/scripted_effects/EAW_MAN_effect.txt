MAN_calculate_owned_and_core_state_ratio = {
	set_temp_variable = { MAN_owned_states_number_TEMP = num_owned_controlled_states }
	set_temp_variable = { MAN_core_states_number_TEMP = num_core_states }
	divide_temp_variable = { MAN_core_states_number_TEMP = MAN_owned_states_number_TEMP }
	set_variable = { MAN_calculate_owned_and_core_state_ratio_scripted_effect_determinant_variable = MAN_core_states_number_TEMP }
	if = {
		limit = {
			check_variable = { MAN_calculate_owned_and_core_state_ratio_scripted_effect_determinant_variable > 0.5 }
		}
		## then nothing happens ##
	}
	else_if = { 
		limit = {
			check_variable = { MAN_calculate_owned_and_core_state_ratio_scripted_effect_determinant_variable < 0.5 }
			NOT = { has_country_flag = MAN_calculate_owned_and_core_state_ratio_scripted_effect_final_warning_triggered }
		}
		## final warning ##
		country_event = { id = MAN_ELF_new.331 hours = 12 }
		set_country_flag = MAN_calculate_owned_and_core_state_ratio_scripted_effect_final_warning_triggered
	}
	else_if = {
		limit = {
			check_variable = { MAN_calculate_owned_and_core_state_ratio_scripted_effect_determinant_variable < 0.5 }
			has_country_flag = MAN_this_is_your_final_warning_dont_lose_any_more_states
			NOT = { has_country_flag = MAN_calculate_owned_and_core_state_ratio_scripted_effect_ELF_uprising_triggered }
		}
		## you've had your chance, now face the consequences ##
		MAN = { country_event = { id = MAN_ELF.131 hours = 12 } } ## change later to a specialised event pls ##
		set_country_flag = MAN_calculate_owned_and_core_state_ratio_scripted_effect_ELF_uprising_triggered
	}
}
MAN_reorganise_the_three_special_ideas = { ## this is to set all the variable ideas at the end of the ideas list for clarity's sake ##
	hidden_effect = {
		if = {
			limit = { has_idea = MAN_collaborator_power }
			remove_ideas = MAN_collaborator_power 
			add_ideas = MAN_collaborator_power
		}
		if = {
			limit = { has_idea = MAN_collaborator_power_1 }
			remove_ideas = MAN_collaborator_power_1 
			add_ideas = MAN_collaborator_power_1
		}
		if = {
			limit = { has_idea = MAN_collaborator_power_2 }
			remove_ideas = MAN_collaborator_power_2 
			add_ideas = MAN_collaborator_power_2
		}
		if = {
			limit = { has_idea = MAN_resistances_power }
			remove_ideas = MAN_resistances_power 
			add_ideas = MAN_resistances_power
		}
		if = {
			limit = { has_idea = MAN_resistances_power_1 }
			remove_ideas = MAN_resistances_power_1 
			add_ideas = MAN_resistances_power_1
		}
		if = {
			limit = { has_idea = MAN_resistances_power_2 }
			remove_ideas = MAN_resistances_power_2 
			add_ideas = MAN_resistances_power_2
		}
		if = {
			limit = { has_idea = MAN_resistances_power_3 }
			remove_ideas = MAN_resistances_power_3 
			add_ideas = MAN_resistances_power_3
		}
		if = {
			limit = { has_idea = MAN_resistances_power_4 }
			remove_ideas = MAN_resistances_power_4 
			add_ideas = MAN_resistances_power_4
		}
		if = {
			limit = { has_idea = MAN_changeling_power }
			remove_ideas = MAN_changeling_power 
			add_ideas = MAN_changeling_power
		}
		if = {
			limit = { has_idea = MAN_changeling_power_1 }
			remove_ideas = MAN_changeling_power_1 
			add_ideas = MAN_changeling_power_1
		}
		if = {
			limit = { has_idea = MAN_changeling_power_2 }
			remove_ideas = MAN_changeling_power_2 
			add_ideas = MAN_changeling_power_2
		}
		if = {
			limit = { has_idea = MAN_changeling_power_3 }
			remove_ideas = MAN_changeling_power_3 
			add_ideas = MAN_changeling_power_3
		}
		if = {
			limit = { has_idea = MAN_changeling_power_4 }
			remove_ideas = MAN_changeling_power_4 
			add_ideas = MAN_changeling_power_4
		}
	}
}