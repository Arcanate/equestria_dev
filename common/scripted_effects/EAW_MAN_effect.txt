MAN_calculate_owned_and_core_state_ratio = {
	set_temp_variable = { MAN_owned_states_number_TEMP = num_owned_controlled_states }
	set_temp_variable = { MAN_core_states_number_TEMP = num_core_states }
	divide_temp_variable = { MAN_core_states_number_TEMP = MAN_owned_states_number_TEMP }
	set_variable = { MAN_calculate_owned_and_core_state_ratio_scripted_effect_determinant_variable = MAN_core_states_number_TEMP }
	if = {
		limit = {
			check_variable = { MAN_calculate_owned_and_core_state_ratio_scripted_effect_determinant_variable > 0.5 }
		}
		## then nothing happens ##
	}
	else_if = { 
		limit = {
			check_variable = { MAN_calculate_owned_and_core_state_ratio_scripted_effect_determinant_variable < 0.5 }
			NOT = { has_country_flag = MAN_calculate_owned_and_core_state_ratio_scripted_effect_final_warning_triggered }
		}
		## final warning ##
		country_event = { id = MAN_ELF_new.331 hours = 12 }
		set_country_flag = MAN_calculate_owned_and_core_state_ratio_scripted_effect_final_warning_triggered
	}
	else_if = {
		limit = {
			check_variable = { MAN_calculate_owned_and_core_state_ratio_scripted_effect_determinant_variable < 0.5 }
			has_country_flag = MAN_this_is_your_final_warning_dont_lose_any_more_states
			NOT = { has_country_flag = MAN_calculate_owned_and_core_state_ratio_scripted_effect_ELF_uprising_triggered }
		}
		## you've had your chance, now face the consequences ##
		MAN = { country_event = { id = MAN_ELF.131 hours = 12 } } ## change later to a specialised event pls ##
		set_country_flag = MAN_calculate_owned_and_core_state_ratio_scripted_effect_ELF_uprising_triggered
	}
}