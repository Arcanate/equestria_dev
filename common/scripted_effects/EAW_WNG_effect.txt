WNG_improve_economy = {
	if = {
		limit = {
			has_idea = WNG_economic_crisis
		}
		swap_ideas = {
			remove_idea = WNG_economic_crisis
			add_idea = WNG_economic_growth_0
		}
	}
	else_if = {
		limit = {
			has_idea = WNG_economic_growth_0
		}
		swap_ideas = {
			remove_idea = WNG_economic_growth_0
			add_idea = WNG_economic_growth_1
		}
	}
	else = {
		swap_ideas = {
			remove_idea = WNG_economic_growth_1
			add_idea = WNG_economic_growth_3
		}
	}
}

WNG_tarrin_compromise_effect = {
	JER = {
		set_country_flag = WNG_tarrin_compromise_met
	}
	if = {
		limit = {
			has_global_flag = WNG_tarrin_compromise_componsation
		}
	}
	else_if = {
		limit = {
			has_global_flag = WNG_tarrin_compromise_half
		}
		JER = {
			if = {
				limit = {
					FRN = {
						owns_state = 487
					}
				}
				transfer_state = 487
			}
			if = {
				limit = {
					FRN = {
						owns_state = 652
					}
				}
				transfer_state = 652
			}
		}
	}
	else = {
		JER = {
			if = {
				limit = {
					FRN = {
						owns_state = 487
					}
				}
				transfer_state = 487
			}
			if = {
				limit = {
					FRN = {
						owns_state = 652
					}
				}
				transfer_state = 652
			}
			if = {
				limit = {
					FRN = {
						owns_state = 521
					}
				}
				transfer_state = 521
			}
		}
	}
}

WNG_improve_army = {
	custom_effect_tooltip = WNG_improve_army_tt
	if = {
		limit = {
			has_idea = WNG_outdated_army
		}
		swap_ideas = {
			remove_idea = WNG_outdated_army
			add_idea = WNG_outdated_army_2
		}
	}
	else_if = {
		limit = {
			has_idea = WNG_outdated_army_2
		}
		swap_ideas = {
			remove_idea = WNG_outdated_army_2
			add_idea = WNG_outdated_army_3
		}
	}
	else = {
		remove_ideas = WNG_outdated_army_3
	}
}

WNG_check_popular_support_idea = {
	hidden_effect = {
		if = {
			limit = {
				check_variable = { WNG_popular_support < 25 }
				NOT = {
					has_idea = WNG_popular_support_idea_0
				}
			}
			remove_ideas = {
				WNG_popular_support_idea_1
				WNG_popular_support_idea_2
				WNG_popular_support_idea_3
			}
			add_ideas = WNG_popular_support_idea_0
		}
		else_if = {
			limit = {
				check_variable = { WNG_popular_support < 50 }
				NOT = {
					has_idea = WNG_popular_support_idea_1
				}
			}
			remove_ideas = {
				WNG_popular_support_idea_0
				WNG_popular_support_idea_2
				WNG_popular_support_idea_3
			}
			add_ideas = WNG_popular_support_idea_1
		}
		else_if = {
			limit = {
				check_variable = { WNG_popular_support < 75 }
				NOT = {
					has_idea = WNG_popular_support_idea_2
				}
			}
			remove_ideas = {
				WNG_popular_support_idea_0
				WNG_popular_support_idea_1
				WNG_popular_support_idea_3
			}
			add_ideas = WNG_popular_support_idea_2
		}
		else_if = {
			limit = {
				check_variable = { WNG_popular_support > 74 }
				NOT = {
					has_idea = WNG_popular_support_idea_3
				}
			}
			remove_ideas = {
				WNG_popular_support_idea_0
				WNG_popular_support_idea_1
				WNG_popular_support_idea_2
			}
			add_ideas = WNG_popular_support_idea_3
		}
	}
}

WNG_add_5_popular_support = {
	custom_effect_tooltip = WNG_add_5_popular_support
	add_to_variable = {
		var = WNG_popular_support
		value = 5
	}
	clamp_variable = {
		var = WNG_popular_support
		min = WNG_popular_support_min
		max = WNG_popular_support_max
	}
	WNG_check_popular_support_idea = yes
}
WNG_add_10_popular_support = {
	custom_effect_tooltip = WNG_add_10_popular_support
	add_to_variable = {
		var = WNG_popular_support
		value = 10
	}
	clamp_variable = {
		var = WNG_popular_support
		min = WNG_popular_support_min
		max = WNG_popular_support_max
	}
	WNG_check_popular_support_idea = yes
}
WNG_add_15_popular_support = {
	custom_effect_tooltip = WNG_add_15_popular_support
	add_to_variable = {
		var = WNG_popular_support
		value = 15
	}
	clamp_variable = {
		var = WNG_popular_support
		min = WNG_popular_support_min
		max = WNG_popular_support_max
	}
	WNG_check_popular_support_idea = yes
}
WNG_add_5_min_popular_support = {
	custom_effect_tooltip = WNG_add_5_min_popular_support
	add_to_variable = {
		var = WNG_popular_support_min
		value = 5
	}
	clamp_variable = {
		var = WNG_popular_support
		min = WNG_popular_support_min
		max = WNG_popular_support_max
	}
	WNG_check_popular_support_idea = yes
}
WNG_take_10_popular_support = {
	custom_effect_tooltip = WNG_take_10_popular_support
	add_to_variable = {
		var = WNG_popular_support
		value = -10
	}
	clamp_variable = {
		var = WNG_popular_support
		min = WNG_popular_support_min
		max = WNG_popular_support_max
	}
	WNG_check_popular_support_idea = yes
}