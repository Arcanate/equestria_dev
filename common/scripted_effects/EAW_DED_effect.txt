DED_startup = {
	set_technology = {
		DED_tech_first_seal = 1
		DED_tech_sentience_matrix = 1
		popup = no
	}
	load_oob = "DED_1007"
	add_equipment_to_stockpile = {
		type = DED_undead_equipment_0
    	amount = 900
	}
	add_equipment_to_stockpile = {
		type = DED_mage_equipment_0
    	amount = 900
	}



	create_equipment_variant = {
		name = "Abomination"
		type = DED_abomination_equipment_1
		parent_version = 0
		is_buildable = no
		modules = {
			main_armament_slot = DED_tank_heavy_machine_gun
		}
		icon = "gfx/interface/technologies/gwtank.dds"
	}
	create_equipment_variant = {
		name = "Abomination 2.0"
		type = DED_abomination_equipment_1
		parent_version = 0
		is_buildable = no
		modules = {
			main_armament_slot = DED_tank_heavy_machine_gun
		}
		upgrades = {
			DED_abomination_upgrade = 1
			DED_abomination_eng_upgrade = 15
		}
		icon = "gfx/interface/technologies/gwtank.dds"
	}		
	add_equipment_to_stockpile = {
		type = DED_abomination_equipment_1
    	amount = 900
    	producer = DED
    	variant_name = "Abomination"
	}
	add_equipment_to_stockpile = {
		type = DED_abomination_equipment_1
    	amount = 900
    	producer = DED
    	variant_name = "Abomination 2.0"
	}
	
	load_focus_tree = DED_START
	#army_experience = 100
	#set_variable = { DED_undead_production = 735 }
	country_event = { id = dread.1 days = 3 }

	DED_catacomb_startup = yes
}

DED_monthly = {
	if = {
		limit = {
			has_country_flag = DED_catacomb_system_active
		}
		DED_catacomb_gain = yes
	}
}

DED_catacomb_startup = {
	set_variable = { DED_corpse_stockpile = 100000 }
	set_variable = { DED_waste_stockpile = 50000 }
	set_variable = { DED_necromancer_cap = 100 }
	set_country_flag = DED_catacomb_system_active
}

DED_catacomb_gain = {
	set_temp_variable = {
		DED_total = max_manpower_k
	}
	multiply_temp_variable = {
		DED_total = 20
	}
	divide_temp_variable = {
		DED_total = 12
	}
	round_temp_variable = DED_total
	set_variable = {
		DED_corpse_production = DED_total
	}
	add_to_variable = { DED_corpse_stockpile = DED_corpse_production }
}

DED_catacomb_gain_undead = {
	set_temp_variable = {
		DED_undead_equipement_gain = DED_undead_production
	}
	divide_temp_variable = {
		DED_undead_equipement_gain = 100
	}
	round_temp_variable = DED_undead_equipement_gain
	add_equipment_to_stockpile = {
		type = undead_equipment_0
		amount = DED_undead_equipement_gain
	}
}