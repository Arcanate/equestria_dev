HIP_increase_divided_society = {
	custom_effect_tooltip = HIP_increase_divided_society_tt
	if = {
		limit = {
			NOT = {
				has_idea = HIP_divided_society_9
			}
		}
		custom_effect_tooltip = HIP_underwater_building_cost_up_tt
		add_to_variable = {
			var = HIP_underwater_building_cost value = 10
		}
	}
	if = {
		limit = {
			has_idea = HIP_divided_society_1
		}
		swap_ideas = { remove_idea = HIP_divided_society_1 add_idea = HIP_divided_society_2 }
	}
	else_if = {
		limit = {
			has_idea = HIP_divided_society_2
		}
		swap_ideas = { remove_idea = HIP_divided_society_2 add_idea = HIP_divided_society_3 }
	}
	else_if = {
		limit = {
			has_idea = HIP_divided_society_3
		}
		swap_ideas = { remove_idea = HIP_divided_society_3 add_idea = HIP_divided_society_4 }
	}
	else_if = {
		limit = {
			has_idea = HIP_divided_society_4
		}
		swap_ideas = { remove_idea = HIP_divided_society_4 add_idea = HIP_divided_society_5 }
	}
	else_if = {
		limit = {
			has_idea = HIP_divided_society_5
		}
		swap_ideas = { remove_idea = HIP_divided_society_5 add_idea = HIP_divided_society_6 }
		hidden_effect = {
			HIP_hippogriff_leader = yes
		}
	}
	else_if = {
		limit = {
			has_idea = HIP_divided_society_6
		}
		swap_ideas = { remove_idea = HIP_divided_society_6 add_idea = HIP_divided_society_7 }
	}
	else_if = {
		limit = {
			has_idea = HIP_divided_society_7
		}
		swap_ideas = { remove_idea = HIP_divided_society_7 add_idea = HIP_divided_society_8 }
	}
	else_if = {
		limit = {
			has_idea = HIP_divided_society_8
		}
		swap_ideas = { remove_idea = HIP_divided_society_8 add_idea = HIP_divided_society_9 }
	}
}

HIP_decrease_divided_society = {
	custom_effect_tooltip = HIP_decrease_divided_society_tt
	if = {
		limit = {
			NOT = {
				has_idea = HIP_divided_society_1
			}
		}
		custom_effect_tooltip = HIP_underwater_building_cost_down_tt
		add_to_variable = {
			var = HIP_underwater_building_cost value = -10
		}
	}
	if = {
		limit = {
			has_idea = HIP_divided_society_9
		}
		swap_ideas = { remove_idea = HIP_divided_society_9 add_idea = HIP_divided_society_8 }
	}
	else_if = {
		limit = {
			has_idea = HIP_divided_society_8
		}
		swap_ideas = { remove_idea = HIP_divided_society_8 add_idea = HIP_divided_society_7 }
	}
	else_if = {
		limit = {
			has_idea = HIP_divided_society_7
		}
		swap_ideas = { remove_idea = HIP_divided_society_7 add_idea = HIP_divided_society_6 }
	}
	else_if = {
		limit = {
			has_idea = HIP_divided_society_6
		}
		swap_ideas = { remove_idea = HIP_divided_society_6 add_idea = HIP_divided_society_5 }
	}
	else_if = {
		limit = {
			has_idea = HIP_divided_society_5
		}
		swap_ideas = { remove_idea = HIP_divided_society_5 add_idea = HIP_divided_society_4 }
		hidden_effect = {
			HIP_seapony_leader = yes
		}
	}
	else_if = {
		limit = {
			has_idea = HIP_divided_society_4
		}
		swap_ideas = { remove_idea = HIP_divided_society_4 add_idea = HIP_divided_society_3 }
	}
	else_if = {
		limit = {
			has_idea = HIP_divided_society_3
		}
		swap_ideas = { remove_idea = HIP_divided_society_3 add_idea = HIP_divided_society_2 }
	}
	else_if = {
		limit = {
			has_idea = HIP_divided_society_2
		}
		swap_ideas = { remove_idea = HIP_divided_society_2 add_idea = HIP_divided_society_1 }
	}
}

HIP_seapony_leader = {
	if = {
		limit = {
			has_country_leader = {
				name = "Queen Novo"
			}
			NOT = {
				has_country_flag = HIP_block_political_paths
			}
		}
		create_country_leader = {
			name = "Queen Novo"
			expire = "1965.1.1"
			picture = "Queen_Novo_Seapony.tga"
			desc = "POLITICS_NOVO_DESC"
			ideology = conservatism
			traits = {
				queen_of_the_hippogriffs
			}
		}
	}
	else_if = {
		limit = {
			has_country_leader = {
				name = "Queen Novo"
			}
			has_country_flag = HIP_block_political_paths
		}
		create_country_leader = {
			name = "Queen Novo"
			expire = "1965.1.1"
			picture = "Queen_Novo_Seapony.tga"
			desc = "POLITICS_NOVO_DESC"
			ideology = conservatism
			traits = {
			}
		}
	}
}

HIP_hippogriff_leader = {
	if = {
		limit = {
			has_country_leader = {
				name = "Queen Novo"
			}
			NOT = {
				has_country_flag = HIP_block_political_paths
			}
		}
		create_country_leader = {
			name = "Queen Novo"
			expire = "1965.1.1"
			picture = "Queen_Novo_Hippogriff.tga"
			desc = "POLITICS_NOVO_DESC"
			ideology = conservatism
			traits = {
				queen_of_the_hippogriffs
			}
		}
	}
	else_if = {
		limit = {
			has_country_leader = {
				name = "Queen Novo"
			}
			has_country_flag = HIP_block_political_paths
		}
		create_country_leader = {
			name = "Queen Novo"
			expire = "1965.1.1"
			picture = "Queen_Novo_Hippogriff.tga"
			desc = "POLITICS_NOVO_DESC"
			ideology = conservatism
			traits = {
			}
		}
	}
}

HIP_remove_underwater_buildings = {
	custom_effect_tooltip = HIP_remove_underwater_buildings_tt
	add_offsite_building = {
		type = industrial_complex
		level = var:HIP_underwater_civ_remove
	}
	add_offsite_building = {
		type = arms_factory
		level = var:HIP_underwater_mil_remove
	}
	add_offsite_building = {
		type = dockyard
		level = var:HIP_underwater_dockyard_remove
	}
	add_offsite_building = {
		type = synthetic_refinery
		level = var:HIP_underwater_refinery_remove
	}
	add_offsite_building = {
		type = fuel_silo
		level = var:HIP_underwater_fuel_silo_remove
	}
	add_offsite_building = {
		type = nuclear_reactor
		level = var:HIP_underwater_reactor_remove
	}
}

HIP_seapony_breakway = {
	HIP_remove_underwater_buildings = yes
}
HIP_hippogriff_breakway = {
	HIP_remove_underwater_buildings = yes
}
HIP_check_posada_sad = {
	if = {
		limit = {
			has_country_flag = {
				flag = posada_sad_level
				value > 11
			}
		}
		
		create_country_leader = {
			name = "Posada"
			desc = "HIP_POSADA_SAD_DESC"
			picture = "posadasad.tga"
			expire = "1965.1.1"
			ideology = marxism
			traits = {
				nuclear_revolutionary
			}
		}
	}
}
HIP_SIR_magic_change = {
	add_to_variable = {
		HIP_siren_power = HIP_SIR_magic_change_var
	}
	clamp_variable = {
		var = HIP_siren_power
		min = 0
		max = HIP_siren_power_max
	}
	if = {
		limit = {
			check_variable = {
				HIP_SIR_magic_change_var < 0
			}
		}
		multiply_temp_variable = {
			HIP_SIR_magic_change_var = -1
		}
		custom_effect_tooltip = HIP_SIR_power_decrease_tt
	}
	else = {
		custom_effect_tooltip = HIP_SIR_power_increase_tt
	}
}
HIP_SIR_zumidia_wargoal_effect = {
	set_temp_variable = { HIP_SIR_zumidia_stability_loss = 0 }
	if = {
		limit = {
			NOT = {
				has_completed_focus = HIP_SIR_last_minute_preparations
			}
		}
		add_to_temp_variable = { HIP_SIR_zumidia_stability_loss = 1 }
	}
	if = {
		limit = {
			NOT = {
				has_completed_focus = HIP_SIR_break_them_apart
			}
		}
		add_to_temp_variable = { HIP_SIR_zumidia_stability_loss = 1 }
	}
	if = {
		limit = {
			NOT = {
				has_completed_focus = HIP_SIR_a_shattered_crown
			}
		}
		add_to_temp_variable = { HIP_SIR_zumidia_stability_loss = 1 }
	}
	if = {
		limit = {
			NOT = {
				has_completed_focus = HIP_SIR_preparing_for_the_next_step
			}
		}
		add_to_temp_variable = { HIP_SIR_zumidia_stability_loss = 1 }
	}
	if = {
		limit = {
			check_variable = {
				HIP_SIR_zumidia_stability_loss = 1
			}
		}
		add_stability = -0.05
	}
	else_if = {
		limit = {
			check_variable = {
				HIP_SIR_zumidia_stability_loss = 2
			}
		}
		add_stability = -0.1
	}
	else_if = {
		limit = {
			check_variable = {
				HIP_SIR_zumidia_stability_loss = 3
			}
		}
		add_stability = -0.15
	}
	else_if = {
		limit = {
			check_variable = {
				HIP_SIR_zumidia_stability_loss = 4
			}
		}
		add_stability = -0.2
	}
}