BAR_pentarchy_is_dead = {
	if = {
		limit = {
			NOT = {
				has_country_flag = barrad_asinti_alive
				has_country_flag = barrad_silver_star_alive
				has_country_flag = barrad_leopold_alive
				has_country_flag = barrad_viira_alive
			}
		}
		country_event = { days = 1 id = barrad_end.1 }
	}
}
BAR_unded_army_up = {
	if = {
		limit = {
			has_idea = BAR_undead_army_1
		}
		swap_ideas = {
			remove_idea = BAR_undead_army_1
			add_idea = BAR_undead_army_2
		}
	}
	else_if = {
		limit = {
			has_idea = BAR_undead_army_2
		}
		swap_ideas = {
			remove_idea = BAR_undead_army_2
			add_idea = BAR_undead_army_3
		}
	}
	else_if = {
		limit = {
			has_idea = BAR_undead_army_3
		}
		swap_ideas = {
			remove_idea = BAR_undead_army_3
			add_idea = BAR_undead_army_4
		}
	}
	else_if = {
		limit = {
			has_idea = BAR_undead_army_4
		}
		swap_ideas = {
			remove_idea = BAR_undead_army_4
			add_idea = BAR_undead_army_5
		}
	}
	else = {
		add_ideas = BAR_undead_army_1
	}
}
BAR_happy_ending = {
	if = {
		limit = {
			has_country_flag = barrad_asinti_alive
			has_country_flag = barrad_silver_star_alive
			has_country_flag = barrad_leopold_alive
			has_country_flag = barrad_viira_alive
			NOT = {
				has_country_flag = { flag = barrad_endgame value = 0 }
			}
			check_variable = {
				var = BAR_relations_asinti_silver
				value = 70
				compare = greater_than_or_equals
			}
			check_variable = {
				var = BAR_relations_asinti_leopold
				value = 70
				compare = greater_than_or_equals
			}
			check_variable = {
				var = BAR_relations_asinti_viira
				value = 70
				compare = greater_than_or_equals
			}
			check_variable = {
				var = BAR_relations_silver_leopold
				value = 70
				compare = greater_than_or_equals
			}
			check_variable = {
				var = BAR_relations_silver_viira
				value = 70
				compare = greater_than_or_equals
			}
			check_variable = {
				var = BAR_relations_leopold_viira
				value = 70
				compare = greater_than_or_equals
			}
		}
		country_event = { days = 1 id = barrad_end.2 }
	}
}
BAR_relations_idea_swap = {
	if = {
		limit = {
			tag = BAR
			check_variable = {
				var = BAR_relations_asinti_silver
				value = 70
				compare = greater_than_or_equals
			}
		}	
		if = {
			limit = {
				NOT = { has_idea = BAR_relations_asinti_silver_positive }
			}
			add_ideas = BAR_relations_asinti_silver_positive
		}
	}
	if = {
		limit = {
			tag = BAR
			check_variable = {
				var = BAR_relations_asinti_silver
				value = 30
				compare = less_than_or_equals
			}
		}
		if = {
			limit = {
				NOT = { has_idea = BAR_relations_asinti_silver_negative }
			}
			add_ideas = BAR_relations_asinti_silver_negative
		}
	}
	if = {
		limit = {
			check_variable = {
				var = BAR_relations_asinti_leopold
				value = 70
				compare = greater_than_or_equals
			}
		}
		if = {
			limit = {
				NOT = { has_idea = BAR_relations_asinti_leopold_positive }
			}
			add_ideas = BAR_relations_asinti_leopold_positive
		}
	}
	if = {
		limit = {
			tag = BAR
			check_variable = {
				var = BAR_relations_asinti_leopold
				value = 30
				compare = less_than_or_equals
			}
		}
		if = {
			limit = {
				NOT = { has_idea = BAR_relations_asinti_leopold_negative }
			}
			add_ideas = BAR_relations_asinti_leopold_negative
		}
	}
	if = {
		limit = {
			tag = BAR
			check_variable = {
				var = BAR_relations_asinti_viira
				value = 70
				compare = greater_than_or_equals
			}
		}
		if = {
			limit = {
				NOT = { has_idea = BAR_relations_asinti_viira_positive }
			}
			add_ideas = BAR_relations_asinti_viira_positive
		}
	}
	if = {
		limit = {
			tag = BAR
			check_variable = {
				var = BAR_relations_asinti_viira
				value = 30
				compare = less_than_or_equals
			}
		}
		if = {
			limit = {
				NOT = { has_idea = BAR_relations_asinti_viira_negative }
			}
			add_ideas = BAR_relations_asinti_viira_negative
		}
	}
	if = {
		limit = {
			tag = BAR
			check_variable = {
				var = BAR_relations_silver_leopold
				value = 70
				compare = greater_than_or_equals
			}
		}
		if = {
			limit = {
				NOT = { has_idea = BAR_relations_silver_leopold_positive }
			}
			add_ideas = BAR_relations_silver_leopold_positive
		}
	}
	if = {
		limit = {
			tag = BAR
			check_variable = {
				var = BAR_relations_silver_leopold
				value = 30
				compare = less_than_or_equals
			}
		}
		if = {
			limit = {
				NOT = { has_idea = BAR_relations_silver_leopold_negative }
			}
			add_ideas = BAR_relations_silver_leopold_negative
		}
	}
	if = {
		limit = {
			tag = BAR
			check_variable = {
				var = BAR_relations_silver_viira
				value = 70
				compare = greater_than_or_equals
			}
		}
		if = {
			limit = {
				NOT = { has_idea = BAR_relations_silver_viira_positive }
			}
			add_ideas = BAR_relations_silver_viira_positive
		}
	}
	if = {
		limit = {
			tag = BAR
			check_variable = {
				var = BAR_relations_silver_viira
				value = 30
				compare = less_than_or_equals
			}
		}
		if = {
			limit = {
				NOT = { has_idea = BAR_relations_silver_viira_negative }
			}
			add_ideas = BAR_relations_silver_viira_negative
		}
	}
	if = {
		limit = {
			tag = BAR
			check_variable = {
				var = BAR_relations_silver_viira
				value = 70
				compare = greater_than_or_equals
			}
		}
		if = {
			limit = {
				NOT = { has_idea = BAR_relations_silver_viira_positive }
			}
			add_ideas = BAR_relations_silver_viira_positive
		}
	}
	if = {
		limit = {
			tag = BAR
			check_variable = {
				var = BAR_relations_leopold_viira
				value = 30
				compare = less_than_or_equals
			}
		}
		if = {
			limit = {
				NOT = { has_idea = BAR_relations_silver_viira_negative }
			}
			add_ideas = BAR_relations_silver_viira_negative
		}
	}
	if = { #remove both
		limit = {
			tag = BAR
			check_variable = {
				var = BAR_relations_asinti_silver
				value = 30
				compare = greater_than
			}
			check_variable = {
				var = BAR_relations_asinti_silver
				value = 70
				compare = less_than
			}
		}
		if = {
			limit = {
				has_idea = BAR_relations_asinti_silver_positive
			}
			remove_ideas = BAR_relations_asinti_silver_positive
		}
		if = {
			limit = {
				has_idea = BAR_relations_asinti_silver_negative
			}
			remove_ideas = BAR_relations_asinti_silver_negative
		}
	}
	if = { #remove both
		limit = {
			tag = BAR
			check_variable = {
				var = BAR_relations_asinti_leopold
				value = 30
				compare = greater_than
			}
			check_variable = {
				var = BAR_relations_asinti_leopold
				value = 70
				compare = less_than
			}
		}
		if = {
			limit = {
				has_idea = BAR_relations_asinti_leopold_positive
			}
			remove_ideas = BAR_relations_asinti_leopold_positive
		}
		if = {
			limit = {
				has_idea = BAR_relations_asinti_leopold_negative
			}
			remove_ideas = BAR_relations_asinti_leopold_negative
		}
	}
	if = { #remove both
		limit = {
			tag = BAR
			check_variable = {
				var = BAR_relations_asinti_viira
				value = 30
				compare = greater_than
			}
			check_variable = {
				var = BAR_relations_asinti_viira
				value = 70
				compare = less_than
			}
		}
		if = {
			limit = {
				has_idea = BAR_relations_asinti_viira_positive
			}
			remove_ideas = BAR_relations_asinti_viira_positive
		}
		if = {
			limit = {
				has_idea = BAR_relations_asinti_viira_negative
			}
			remove_ideas = BAR_relations_asinti_viira_negative
		}
	}
	if = { #remove both
		limit = {
			tag = BAR
			check_variable = {
				var = BAR_relations_silver_leopold
				value = 30
				compare = greater_than
			}
			check_variable = {
				var = BAR_relations_silver_leopold
				value = 70
				compare = less_than
			}
		}
		if = {
			limit = {
				has_idea = BAR_relations_silver_leopold_positive
			}
			remove_ideas = BAR_relations_silver_leopold_positive
		}
		if = {
			limit = {
				has_idea = BAR_relations_silver_leopold_negative
			}
			remove_ideas = BAR_relations_silver_leopold_negative
		}
	}
	if = { #remove both
		limit = {
			tag = BAR
			check_variable = {
				var = BAR_relations_silver_viira
				value = 30
				compare = greater_than
			}
			check_variable = {
				var = BAR_relations_silver_viira
				value = 70
				compare = less_than
			}
		}
		if = {
			limit = {
				has_idea = BAR_relations_silver_viira_positive
			}
			remove_ideas = BAR_relations_silver_viira_positive
		}
		if = {
			limit = {
				has_idea = BAR_relations_silver_viira_negative
			}
			remove_ideas = BAR_relations_silver_viira_negative
		}
	}
	if = { #remove both
		limit = {
			tag = BAR
			check_variable = {
				var = BAR_relations_leopold_viira
				value = 30
				compare = greater_than
			}
			check_variable = {
				var = BAR_relations_leopold_viira
				value = 70
				compare = less_than
			}
		}
		if = {
			limit = {
				has_idea = BAR_relations_leopold_viira_positive
			}
			remove_ideas = BAR_relations_leopold_viira_positive
		}
		if = {
			limit = {
				has_idea = BAR_relations_leopold_viira_negative
			}
			remove_ideas = BAR_relations_leopold_viira_negative
		}
	}
	BAR_happy_ending = yes
}
BAR_resources_add_asinti_250 = {
	custom_effect_tooltip = BAR_resources_gain_asinti_250
	add_to_variable = {
		var = BAR_resources_asinti
		value = 250
	}
}
BAR_resources_add_asinti_500 = {
	custom_effect_tooltip = BAR_resources_gain_asinti_500
	add_to_variable = {
		var = BAR_resources_asinti
		value = 500
	}
}
BAR_resources_add_asinti_750 = {
	custom_effect_tooltip = BAR_resources_gain_asinti_750
	add_to_variable = {
		var = BAR_resources_asinti
		value = 750
	}
}
BAR_resources_add_asinti_1000 = {
	custom_effect_tooltip = BAR_resources_gain_asinti_1000
	add_to_variable = {
		var = BAR_resources_asinti
		value = 1000
	}
}
BAR_resources_add_silver_250 = {
	custom_effect_tooltip = BAR_resources_gain_silver_250
	add_to_variable = {
		var = BAR_resources_silver
		value = 250
	}
}
BAR_resources_add_silver_500 = {
	custom_effect_tooltip = BAR_resources_gain_silver_500
	add_to_variable = {
		var = BAR_resources_silver
		value = 500
	}
}
BAR_resources_add_silver_750 = {
	custom_effect_tooltip = BAR_resources_gain_silver_750
	add_to_variable = {
		var = BAR_resources_silver
		value = 750
	}
}
BAR_resources_add_silver_1000 = {
	custom_effect_tooltip = BAR_resources_gain_silver_1000
	add_to_variable = {
		var = BAR_resources_silver
		value = 1000
	}
}
BAR_resources_add_leopold_250 = {
	custom_effect_tooltip = BAR_resources_gain_leopold_250
	add_to_variable = {
		var = BAR_resources_leopold
		value = 250
	}
}
BAR_resources_add_leopold_500 = {
	custom_effect_tooltip = BAR_resources_gain_leopold_500
	add_to_variable = {
		var = BAR_resources_leopold
		value = 500
	}
}
BAR_resources_add_leopold_750 = {
	custom_effect_tooltip = BAR_resources_gain_leopold_750
	add_to_variable = {
		var = BAR_resources_leopold
		value = 750
	}
}
BAR_resources_add_leopold_1000 = {
	custom_effect_tooltip = BAR_resources_gain_leopold_1000
	add_to_variable = {
		var = BAR_resources_leopold
		value = 1000
	}
}
BAR_resources_add_viira_250 = {
	custom_effect_tooltip = BAR_resources_gain_viira_250
	add_to_variable = {
		var = BAR_resources_viira
		value = 250
	}
}
BAR_resources_add_viira_500 = {
	custom_effect_tooltip = BAR_resources_gain_viira_500
	add_to_variable = {
		var = BAR_resources_viira
		value = 500
	}
}
BAR_resources_add_viira_750 = {
	custom_effect_tooltip = BAR_resources_gain_viira_750
	add_to_variable = {
		var = BAR_resources_viira
		value = 750
	}
}
BAR_resources_add_viira_1000 = {
	custom_effect_tooltip = BAR_resources_gain_viira_1000
	add_to_variable = {
		var = BAR_resources_viira
		value = 1000
	}
}

### subtract resources ###

BAR_resources_subtract_asinti_1500 = {
	if = {
		limit = {
			has_country_flag = BAR_asinti_discount
		}
		custom_effect_tooltip = BAR_resources_substract_asinti_1350
		subtract_from_variable = {
			var = BAR_resources_asinti
			value = 1350
		}
	}
	else = {
		custom_effect_tooltip = BAR_resources_substract_asinti_1500
		subtract_from_variable = {
			var = BAR_resources_asinti
			value = 1500
		}
	}	
}
BAR_resources_subtract_asinti_500 = {
	if = {
		limit = {
			has_country_flag = BAR_asinti_discount
		}
		custom_effect_tooltip = BAR_resources_substract_asinti_500
		subtract_from_variable = {
			var = BAR_resources_asinti
			value = 450
		}
	}
	else = {
		custom_effect_tooltip = BAR_resources_substract_asinti_500
		subtract_from_variable = {
			var = BAR_resources_asinti
			value = 500
		}
	}	
}
BAR_resources_subtract_asinti_750 = {
	if = {
		limit = {
			has_country_flag = BAR_asinti_discount
		}
		custom_effect_tooltip = BAR_resources_substract_asinti_675
		subtract_from_variable = {
			var = BAR_resources_asinti
			value = 675
		}
	}
	else = {
		custom_effect_tooltip = BAR_resources_substract_asinti_750
		subtract_from_variable = {
			var = BAR_resources_asinti
			value = 750
		}
	}
}
BAR_resources_subtract_asinti_1000 = {
	if = {
		limit = {
			has_country_flag = BAR_asinti_discount
		}
		custom_effect_tooltip = BAR_resources_substract_asinti_900
		subtract_from_variable = {
			var = BAR_resources_asinti
			value = 900
		}
	}
	else = {
		custom_effect_tooltip = BAR_resources_substract_asinti_1000
		subtract_from_variable = {
			var = BAR_resources_asinti
			value = 1000
		}
	}
}
BAR_resources_subtract_silver_1500 = {
	custom_effect_tooltip = BAR_resources_substract_silver_1500
	subtract_from_variable = {
		var = BAR_resources_silver
		value = 1500
	}
}
BAR_resources_subtract_silver_500 = {
	custom_effect_tooltip = BAR_resources_substract_silver_500
	subtract_from_variable = {
		var = BAR_resources_silver
		value = 500
	}
}
BAR_resources_subtract_silver_750 = {
	custom_effect_tooltip = BAR_resources_substract_silver_750
	subtract_from_variable = {
		var = BAR_resources_silver
		value = 750
	}
}
BAR_resources_subtract_silver_1000 = {
	custom_effect_tooltip = BAR_resources_substract_silver_1000
	subtract_from_variable = {
		var = BAR_resources_silver
		value = 1000
	}
}
BAR_resources_subtract_leopold_1500 = {
	custom_effect_tooltip = BAR_resources_substract_leopold_1500
	subtract_from_variable = {
		var = BAR_resources_leopold
		value = 1500
	}
}
BAR_resources_subtract_leopold_500 = {
	custom_effect_tooltip = BAR_resources_substract_leopold_500
	subtract_from_variable = {
		var = BAR_resources_leopold
		value = 500
	}
}
BAR_resources_subtract_leopold_750 = {
	custom_effect_tooltip = BAR_resources_substract_leopold_750
	subtract_from_variable = {
		var = BAR_resources_leopold
		value = 750
	}
}
BAR_resources_subtract_leopold_1000 = {
	custom_effect_tooltip = BAR_resources_substract_leopold_1000
	subtract_from_variable = {
		var = BAR_resources_leopold
		value = 1000
	}
}
BAR_resources_subtract_viira_1500 = {
	custom_effect_tooltip = BAR_resources_substract_viira_1500
	subtract_from_variable = {
		var = BAR_resources_viira
		value = 1500
	}
}
BAR_resources_subtract_viira_500 = {
	custom_effect_tooltip = BAR_resources_substract_viira_500
	subtract_from_variable = {
		var = BAR_resources_viira
		value = 500
	}
}
BAR_resources_subtract_viira_750 = {
	custom_effect_tooltip = BAR_resources_substract_viira_750
	subtract_from_variable = {
		var = BAR_resources_viira
		value = 750
	}
}
BAR_resources_subtract_viira_1000 = {
	custom_effect_tooltip = BAR_resources_substract_viira_1000
	subtract_from_variable = {
		var = BAR_resources_viira
		value = 1000
	}
}

### relations ###

BAR_relations_increase_asinti_silver_5 = {
	custom_effect_tooltip = BAR_relations_increase_asinti_silver
	if = {
		limit = {
			check_variable = {
				var = BAR_relations_asinti_silver
				value = 95
				compare = less_than_or_equals
			}
		}
		add_to_variable = {
			var = BAR_relations_asinti_silver
			value = 5
		}
	}
	else = {
		set_variable = { BAR_relations_asinti_silver = 100 }
	}
	BAR_relations_idea_swap = yes
}
BAR_relations_increase_asinti_leopold_5 = {
	custom_effect_tooltip = BAR_relations_increase_asinti_leopold
	if = {
		limit = {
			check_variable = {
				var = BAR_relations_asinti_leopold
				value = 95
				compare = less_than_or_equals
			}
		}
		add_to_variable = {
			var = BAR_relations_asinti_leopold
			value = 5
		}
	}
	else = {
		set_variable = { BAR_relations_asinti_leopold = 100 }
	}
	BAR_relations_idea_swap = yes
}
BAR_relations_increase_asinti_viira_5 = {
	custom_effect_tooltip = BAR_relations_increase_asinti_viira
	if = {
		limit = {
			check_variable = {
				var = BAR_relations_asinti_viira
				value = 95
				compare = less_than_or_equals
			}
		}
		add_to_variable = {
			var = BAR_relations_asinti_viira
			value = 5
		}
	}	
	else = {
		set_variable = { BAR_relations_asinti_viira = 100 }
	}
	BAR_relations_idea_swap = yes
}
BAR_relations_increase_silver_leopold_5 = {
	custom_effect_tooltip = BAR_relations_increase_silver_leopold
	if = {
		limit = {
			check_variable = {
				var = BAR_relations_silver_leopold
				value = 95
				compare = less_than_or_equals
			}
		}
		add_to_variable = {
			var = BAR_relations_silver_leopold
			value = 5
		}
	}
	else = {
		set_variable = { BAR_relations_silver_leopold = 100 }
	}
	BAR_relations_idea_swap = yes
}
BAR_relations_increase_silver_viira_5 = {
	custom_effect_tooltip = BAR_relations_increase_silver_viira
	if = {
		limit = {
			check_variable = {
				var = BAR_relations_silver_viira
				value = 95
				compare = less_than_or_equals
			}
		}
		add_to_variable = {
			var = BAR_relations_silver_viira
			value = 5
		}
	}
	else = {
		set_variable = { BAR_relations_silver_viira = 100 }
	}
	BAR_relations_idea_swap = yes
}
BAR_relations_increase_leopold_viira_5 = {
	custom_effect_tooltip = BAR_relations_increase_leopold_viira
	if = {
		limit = {
			check_variable = {
				var = BAR_relations_leopold_viira
				value = 95
				compare = less_than_or_equals
			}
		}
		add_to_variable = {
			var = BAR_relations_leopold_viira
			value = 5
		}
	}
	else = {
		set_variable = { BAR_relations_leopold_viira = 100 }
	}
	BAR_relations_idea_swap = yes
}

BAR_relations_decrease_asinti_silver_5 = {
	custom_effect_tooltip = BAR_relations_decrease_asinti_silver
	if = {
		limit = {
			check_variable = {
				var = BAR_relations_asinti_silver
				value = 5
				compare = greater_than_or_equals
			}
		}
		subtract_from_variable = {
			var = BAR_relations_asinti_silver
			value = 5
		}
	}
	else = {
		set_variable = { BAR_relations_asinti_silver = 0 }
	}
	BAR_relations_idea_swap = yes
}
BAR_relations_decrease_asinti_leopold_5 = {
	custom_effect_tooltip = BAR_relations_decrease_asinti_leopold
	if = {
		limit = {
			check_variable = {
				var = BAR_relations_asinti_leopold
				value = 5
				compare = greater_than_or_equals
			}
		}
		subtract_from_variable = {
			var = BAR_relations_asinti_leopold
			value = 5
		}
	}	
	else = {
		set_variable = { BAR_relations_asinti_leopold = 0 }
	}
	BAR_relations_idea_swap = yes
}
BAR_relations_decrease_asinti_viira_5 = {
	custom_effect_tooltip = BAR_relations_decrease_asinti_viira
	if = {
		limit = {
			check_variable = {
				var = BAR_relations_asinti_viira
				value = 5
				compare = greater_than_or_equals
			}
		}
		subtract_from_variable = {
			var = BAR_relations_asinti_viira
			value = 5
		}
	}
	else = {
		set_variable = { BAR_relations_asinti_viira = 0 }
	}
	BAR_relations_idea_swap = yes
}
BAR_relations_decrease_silver_leopold_5 = {
	custom_effect_tooltip = BAR_relations_decrease_silver_leopold
	if = {
		limit = {
			check_variable = {
				var = BAR_relations_silver_leopold
				value = 5
				compare = greater_than_or_equals
			}
		}
		subtract_from_variable = {
			var = BAR_relations_silver_leopold
			value = 5
		}
	}
	else = {
		set_variable = { BAR_relations_silver_leopold = 0 }
	}
	BAR_relations_idea_swap = yes
}
BAR_relations_decrease_silver_viira_5 = {
	custom_effect_tooltip = BAR_relations_decrease_silver_viira
	if = {
		limit = {
			check_variable = {
				var = BAR_relations_silver_viira
				value = 5
				compare = greater_than_or_equals
			}
		}
		subtract_from_variable = {
			var = BAR_relations_silver_viira
			value = 5
		}
	}	
	else = {
		set_variable = { BAR_relations_silver_viira = 0 }
	}
	BAR_relations_idea_swap = yes
}
BAR_relations_decrease_leopold_viira_5 = {
	custom_effect_tooltip = BAR_relations_decrease_leopold_viira
	if = {
		limit = {
			check_variable = {
				var = BAR_relations_leopold_viira
				value = 5
				compare = greater_than_or_equals
			}
		}
		subtract_from_variable = {
			var = BAR_relations_leopold_viira
			value = 5
		}
	}
	else = {
		set_variable = { BAR_relations_leopold_viira = 0 }
	}
	BAR_relations_idea_swap = yes
}



BAR_viira_round_end = {
	if = {
		limit = {
			OR = {
				has_country_flag = barrad_asinti_alive
				has_country_flag = barrad_leopold_alive
				has_country_flag = barrad_silver_star_alive
			}
		}
		country_event = { hours = 1 id = barrad_huj.5 }
	}
	else = {
		country_event = { hours = 1 id = barrad_huj.6 } #we lost...
	}
}
BAR_viira_turn = {
	if = {
		limit = {
			check_variable = { v_hp > 0 }
		}
		random_list = {
			50 = { #target weakest one
				set_temp_variable = { min = 1000 }
				set_variable = { viira_target = 0 }
				if = {
					limit = {
						check_variable = { a_hp > 0 }
						check_variable = { a_hp < min }
					}
					set_variable = { min = a_hp }
					set_variable = { viira_target = 1 }
				}
				if = {
					limit = {
						check_variable = { l_hp > 0 }
						check_variable = { l_hp < min }
					}
					set_variable = { min = l_hp }
					set_variable = { viira_target = 2 }
				}
				if = {
					limit = {
						check_variable = { s_hp > 0 }
						check_variable = { s_hp < min }
					}
					set_variable = { min = s_hp }
					set_variable = { viira_target = 3 }
				}
			}
			50 = { #target random one
				if = {
					limit = {
						has_country_flag = barrad_silver_star_alive
						has_country_flag = barrad_asinti_alive
						has_country_flag = barrad_leopold_alive	
					}
					random_list = {
						34 = {
							set_variable = { viira_target = 1 }
						}
						33 = {
							set_variable = { viira_target = 2 }
						}
						33 = {
							set_variable = { viira_target = 3 }
						}
					}
				}
				else_if = {
					limit = {
						has_country_flag = barrad_silver_star_alive
						has_country_flag = barrad_asinti_alive
						NOT = { has_country_flag = barrad_leopold_alive }
					}
					random_list = {
						50 = {
							set_variable = { viira_target = 1 }
						}
						50 = {
							set_variable = { viira_target = 3 }
						}
					}
				}
				else_if = {
					limit = {
						has_country_flag = barrad_silver_star_alive
						NOT = { has_country_flag = barrad_asinti_alive }
						has_country_flag = barrad_leopold_alive
					}
					random_list = {
						50 = {
							set_variable = { viira_target = 2 }
						}
						50 = {
							set_variable = { viira_target = 3 }
						}
					}
				}
				else_if = {
					limit = {
						has_country_flag = barrad_silver_star_alive
						NOT = { has_country_flag = barrad_asinti_alive }
						NOT = { has_country_flag = barrad_leopold_alive }
					}
					set_variable = { viira_target = 3 }
				}
				else_if = {
					limit = {
						NOT = { has_country_flag = barrad_silver_star_alive }
						has_country_flag = barrad_asinti_alive
						has_country_flag = barrad_leopold_alive
					}
					random_list = {
						50 = {
							set_variable = { viira_target = 1 }
						}
						50 = {
							set_variable = { viira_target = 2 }
						}
					}
				}
				else_if = {
					limit = {
						NOT = { has_country_flag = barrad_silver_star_alive }
						has_country_flag = barrad_asinti_alive
						NOT = { has_country_flag = barrad_leopold_alive}
					}
					set_variable = { viira_target = 1 }
				}
				else_if = {
					limit = {
						NOT = { has_country_flag = barrad_silver_star_alive }
						NOT = { has_country_flag = barrad_asinti_alive}
						has_country_flag = barrad_leopold_alive
					}
					set_variable = { viira_target = 2 }
				}
			}
		}
		if = {
			limit = {
				check_variable = { v_stun < 1 }
			}
			BAR_viira_attack = yes
		}
		else = {
			subtract_from_variable = { v_stun = 1 }
		}
		set_variable = { viira_dmg_debuff = 1 }
		if = {
			limit = {
				check_variable = { a_hp < 1 }
			}
			clr_country_flag = barrad_asinti_alive
		}
		if = {
			limit = {
				check_variable = { l_hp < 1 }
			}
			clr_country_flag = barrad_leopold_alive
		}
		if = {
			limit = {
				check_variable = { s_hp < 1 }
			}
			clr_country_flag = barrad_silver_star_alive
		}
		BAR_viira_round_end = yes
	}
	else = {
		country_event = { days = 1 id = barrad_huj.7 } #we won!
	}
}
BAR_viira_attack = {
	set_temp_variable = { v_hp_half = v_hp }
	set_temp_variable = { v_hp_qua = v_hp }
	divide_temp_variable = { v_hp_half = 2 }
	divide_temp_variable = { v_hp_qua = 4 }
	if = {
		limit = {
			check_variable = { v_in > 10 }
		}
		if = {
			limit = {
				check_variable = {
					var = v_hp
					value = v_hp_half
					compare = greater_than_or_equals
				}
			}
			random_list = {
				70 = {
					BAR_viira_strong_attack = yes
				}
				30 = {
					BAR_viira_normal_attack = yes
				}
			}
		}
		if = {
			limit = {
				check_variable = { v_hp < v_hp_qua }
			}
			random_list = {
				50 = {
					BAR_viira_heal = yes
				}
				50 = {
					BAR_viira_strong_attack = yes
				}
			}
		}
		if = {
			limit = {
				check_variable = { v_hp < v_hp_half }
			}
			random_list = {
				30 = {
					BAR_viira_heal = yes
				}
				70 = {
					BAR_viira_strong_attack = yes
				}
			}
		}
	}
	else = {
		if = { #rest
			limit = {
				check_variable = { v_in = 0 }
			}
			BAR_viira_rest = yes
		}
		else = {
			if = {
				limit = {
					check_variable = {
						var = v_hp
						value = v_hp_half
						compare = greater_than_or_equals
					}
				}
				if = {
					limit = {
						check_variable = { v_in > 2 }
					}
					random_list = {
						60 = {
							BAR_viira_rest = yes
						}
						20 = {
							BAR_viira_normal_attack = yes
						}
						20 = {
							BAR_viira_strong_attack = yes
						}
					}
				}
				else = {
					random_list = {
						60 = {
							BAR_viira_rest = yes
						}
						40 = {
							BAR_viira_normal_attack = yes
						}
					}
				}
			}
			if = {
				limit = {
					check_variable = { v_hp < v_hp_qua }
				}
				if = {
					limit = {
						check_variable = { v_in > 2 }
					}
					random_list = {
						50 = {
							BAR_viira_heal = yes
						}
						50 = {
							BAR_viira_strong_attack = yes
						}
					}
				}
				else = {
					random_list = {
						50 = {
							BAR_viira_heal = yes
						}
						50 = {
							BAR_viira_normal_attack = yes
						}
					}
				}
			}
			if = {
				limit = {
					check_variable = { v_hp < v_hp_half }
				}
				if = {
					limit = {
						check_variable = { v_in > 2 }
					}
					random_list = {
						30 = {
							BAR_viira_heal = yes
						}
						20 = {
							BAR_viira_strong_attack = yes
						}
						20 = {
							BAR_viira_strong_attack = yes
						}
						30 = {
							BAR_viira_rest = yes
						}
					}
				}
				else = {
					random_list = {
						30 = {
							BAR_viira_heal = yes
						}
						40 = {
							BAR_viira_strong_attack = yes
						}
						30 = {
							BAR_viira_rest = yes
						}
					}
				}
			}
		}
	}
}
BAR_viira_normal_attack = {
	random_list = {
		5 = {
			set_temp_variable = { dmgToDeal = 5 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 6 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 7 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 8 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 9 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 10 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 11 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 12 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 13 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 14 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 15 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 16 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 17 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 18 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 19 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 20 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 21 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 22 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 23 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 24 }
		}					
	}
	divide_temp_variable = { dmgToDeal = viira_dmg_debuff }
	if = {
		limit = {
			check_variable = { viira_target = 1 }
		}
		subtract_from_variable = { a_hp = dmgToDeal}
	}
	if = {
		limit = {
			check_variable = { viira_target = 2 }
		}
		subtract_from_variable = { l_hp = dmgToDeal}
	}
	if = {
		limit = {
			check_variable = { viira_target = 3 }
		}
		subtract_from_variable = { s_hp = dmgToDeal}
	}
	
	if = {
		limit = {
			check_variable = { a_hp < 0 }
		}
		clr_country_flag = barrad_asinti_alive
	}
	if = {
		limit = {
			check_variable = { l_hp < 0 }
		}
		clr_country_flag = barrad_leopold_alive
	}
	if = {
		limit = {
			check_variable = { s_hp < 0 }
		}
		clr_country_flag = barrad_silver_star_alive
	}
	subtract_from_variable = { v_in = 1 }
}
BAR_viira_strong_attack = {
	random_list = {
		5 = {
			set_temp_variable = { dmgToDeal = 24 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 26 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 28 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 30 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 32 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 34 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 36 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 38 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 40 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 42 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 54 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 56 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 58 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 69 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 62 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 64 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 66 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 68 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 70 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 72 }
		}
	}
	divide_temp_variable = { dmgToDeal = viira_dmg_debuff }
	if = {
		limit = {
			check_variable = { viira_target = 1 }
		}
		subtract_from_variable = { a_hp = dmgToDeal}
	}
	if = {
		limit = {
			check_variable = { viira_target = 2 }
		}
		subtract_from_variable = { l_hp = dmgToDeal}
	}
	if = {
		limit = {
			check_variable = { viira_target = 3 }
		}
		subtract_from_variable = { s_hp = dmgToDeal}
	}
	
	if = {
		limit = {
			check_variable = { a_hp < 0 }
		}
		clr_country_flag = barrad_asinti_alive
	}
	if = {
		limit = {
			check_variable = { l_hp < 0 }
		}
		clr_country_flag = barrad_leopold_alive
	}
	if = {
		limit = {
			check_variable = { s_hp < 0 }
		}
		clr_country_flag = barrad_silver_star_alive
	}
	subtract_from_variable = { v_in = 3 }	
}
BAR_viira_rest = {
	if = {
		limit = {
			check_variable = { v_in < 16 }
		}
		add_to_variable = { v_in = 5 }
	}
	else = {
		set_variable = { v_in = 20 }
	}
}
BAR_viira_heal = {
	random_list = {
		10 = {
			set_temp_variable = { healVal = 32 }
		}
		10 = {
			set_temp_variable = { healVal = 34 }
		}
		10 = {
			set_temp_variable = { healVal = 36 }
		}
		10 = {
			set_temp_variable = { healVal = 38 }
		}
		10 = {
			set_temp_variable = { healVal = 40 }
		}
		10 = {
			set_temp_variable = { healVal = 42 }
		}
		10 = {
			set_temp_variable = { healVal = 44 }
		}
		10 = {
			set_temp_variable = { healVal = 46 }
		}
		10 = {
			set_temp_variable = { healVal = 48 }
		}
		10 = {
			set_temp_variable = { healVal = 50 }
		}
	}
	set_temp_variable = { curHp = v_hp }
	add_to_temp_variable = { curHp = healVal }
	if = {
		limit = {
			check_variable = { curHp > v_hp_max }
		}
		set_variable = { v_hp = v_hp_max}
	}
	else = {
		add_to_variable = { v_hp = healVal }
	}
	subtract_from_variable = { v_in = 1 }	
}

BAR_pentarchy_turn = {
	if = {
		limit = {
			OR = {
				has_country_flag = barrad_silver_star_alive
				has_country_flag = barrad_asinti_alive
				has_country_flag = barrad_leopold_alive	
			}
		}
		if = {
			limit = {
				has_country_flag = barrad_silver_star_alive
				has_country_flag = barrad_asinti_alive
				has_country_flag = barrad_leopold_alive	
			}
			random_list = {
				34 = {
					set_variable = { character_attacking = 1 }
				}
				33 = {
					set_variable = { character_attacking = 2 }
				}
				33 = {
					set_variable = { character_attacking = 3 }
				}
			}
		}
		else_if = {
			limit = {
				has_country_flag = barrad_silver_star_alive
				has_country_flag = barrad_asinti_alive
				NOT = { has_country_flag = barrad_leopold_alive }
			}
			random_list = {
				50 = {
					set_variable = { character_attacking = 1 }
				}
				50 = {
					set_variable = { character_attacking = 3 }
				}
			}
		}
		else_if = {
			limit = {
				has_country_flag = barrad_silver_star_alive
				NOT = { has_country_flag = barrad_asinti_alive }
				has_country_flag = barrad_leopold_alive
			}
			random_list = {
				50 = {
					set_variable = { character_attacking = 2 }
				}
				50 = {
					set_variable = { character_attacking = 3 }
				}
			}
		}
		else_if = {
			limit = {
				has_country_flag = barrad_silver_star_alive
				NOT = { has_country_flag = barrad_asinti_alive }
				NOT = { has_country_flag = barrad_leopold_alive }
			}
			set_variable = { character_attacking = 3 }
		}
		else_if = {
			limit = {
				NOT = { has_country_flag = barrad_silver_star_alive }
				has_country_flag = barrad_asinti_alive
				has_country_flag = barrad_leopold_alive
			}
			random_list = {
				50 = {
					set_variable = { character_attacking = 1 }
				}
				50 = {
					set_variable = { character_attacking = 2 }
				}
			}
		}
		else_if = {
			limit = {
				NOT = { has_country_flag = barrad_silver_star_alive }
				has_country_flag = barrad_asinti_alive
				NOT = { has_country_flag = barrad_leopold_alive}
			}
			set_variable = { character_attacking = 1 }
		}
		else_if = {
			limit = {
				NOT = { has_country_flag = barrad_silver_star_alive }
				NOT = { has_country_flag = barrad_asinti_alive}
				has_country_flag = barrad_leopold_alive
			}
			set_variable = { character_attacking = 2 }
		}
		BAR_pentarchy_attack = yes
		if = {
			limit = {
				check_variable = { v_hp > 0 }
			}
			country_event = { hours = 1 id = barrad_huj.8 }
		}
		else = { #gameover
			country_event = { hours = 1 id = barrad_huj.9 }
		}
	}
	else = { #viira won
		country_event = { hours = 1 id = barrad_huj.10 }
	}
}
BAR_pentarchy_attack = {
	if = { #asinti
		limit = {
			check_variable = { character_attacking = 1 }
		}
		BAR_asinti_attack = yes
	}
	if = { #leopold
		limit = {
			check_variable = { character_attacking = 2 }
		}
		BAR_leopold_attack = yes
	}
	if = { #silver
		limit = {
			check_variable = { character_attacking = 3 }
		}
		BAR_silver_attack = yes
	}
}
BAR_asinti_attack = {
	set_temp_variable = { a_hp_half = a_hp }
	set_temp_variable = { a_hp_qua = a_hp }
	divide_temp_variable = { a_hp_half = 2 }
	divide_temp_variable = { a_hp_qua = 4 }
	if = {
		limit = {
			check_variable = { a_in > 5 }
		}
		if = {
			limit = {
				check_variable = {
					var = a_hp
					value = a_hp_half
					compare = greater_than_or_equals
				}
			}
			random_list = {
				70 = {
					BAR_asinti_normal_attack = yes
				}
				30 = {
					BAR_asinti_debuff = yes
				}
			}
		}
		if = {
			limit = {
				check_variable = { a_hp < a_hp_qua }
			}
			random_list = {
				40 = {
					BAR_asinti_normal_attack = yes
				}
				20 = {
					BAR_asinti_debuff = yes
				}
				40 = {
					BAR_asinti_heal = yes
				}
			}
		}
		if = {
			limit = {
				check_variable = { a_hp < a_hp_half }
			}
			random_list = {
				50 = {
					BAR_asinti_normal_attack = yes
				}
				30 = {
					BAR_asinti_debuff = yes
				}
				20 = {
					BAR_asinti_heal = yes
				}
			}
		}
	}
	else = {
		if = { #rest
			limit = {
				check_variable = { a_in = 0 }
			}
			BAR_pentarchy_rest = yes
		}
		else = {
			if = {
				limit = {
					check_variable = {
						var = a_hp
						value = a_hp_half
						compare = greater_than_or_equals
					}
				}
				random_list = {
					60 = {
						BAR_asinti_attack = yes
					}
					40 = {
						BAR_pentarchy_rest = yes
					}
				}
			}
			if = {
				limit = {
					check_variable = { a_hp < a_hp_qua }
				}
				if = {
					limit = {
						check_variable = { a_in > 1 }
					}
					random_list = {
						20 = {
							BAR_asinti_attack = yes
						}
						40 = {
							BAR_asinti_heal = yes
						}
						40 = {
							BAR_pentarchy_rest = yes
						}
					}
				}
				else = {
					random_list = {
						70 = {
							BAR_asinti_attack = yes
						}
						30 = {
							BAR_pentarchy_rest = yes
						}
					}
				}
			}
			if = {
				limit = {
					check_variable = { a_hp < a_hp_half }
				}
				if = {
					limit = {
						check_variable = { a_in > 1 }
					}
					random_list = {
						40 = {
							BAR_asinti_attack = yes
						}
						20 = {
							BAR_asinti_heal = yes
						}
						40 = {
							BAR_pentarchy_rest = yes
						}
					}
				}
				else = {
					60 = {
						BAR_asinti_attack = yes
					}
					40 = {
						BAR_pentarchy_rest = yes
					}
				}
			}
		}
	}
}

BAR_asinti_normal_attack = {
	random_list = {
		5 = {
			set_temp_variable = { dmgToDeal = 3 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 4 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 5 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 6 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 7 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 8 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 9 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 10 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 11 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 12 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 13 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 14 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 15 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 16 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 17 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 18 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 19 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 20 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 21 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 22 }
		}					
	}
	random_list = {
		90 = {
			subtract_from_variable = { v_hp = dmgToDeal}
		}
		10 = {
			#you missed
		}
	}
	subtract_from_variable = { a_in = 1 }
}
BAR_asinti_debuff = {
	subtract_from_variable = { a_in = 1}
	set_variable = { viira_dmg_debuff = 2 }
}
BAR_asinti_heal = {
	random_list = {
		10 = {
			set_temp_variable = { healAmount = 7 }
		}
		10 = {
			set_temp_variable = { healAmount = 8 }
		}
		10 = {
			set_temp_variable = { healAmount = 9 }
		}
		10 = {
			set_temp_variable = { healAmount = 10 }
		}
		10 = {
			set_temp_variable = { healAmount = 11 }
		}
		10 = {
			set_temp_variable = { healAmount = 12 }
		}
		10 = {
			set_temp_variable = { healAmount = 13 }
		}
		10 = {
			set_temp_variable = { healAmount = 14 }
		}
		10 = {
			set_temp_variable = { healAmount = 16 }
		}
		10 = {
			set_temp_variable = { healAmount = 17 }
		}
	}
	if = {
		limit = {
			has_country_flag = barrad_silver_star_alive
			has_country_flag = barrad_asinti_alive
			has_country_flag = barrad_leopold_alive	
		}
		set_temp_variable = { a_hp_t = a_hp_max }
		set_temp_variable = { l_hp_t = l_hp_max }
		set_temp_variable = { s_hp_t = s_hp_max }
		
		add_to_temp_variable = { a_hp_t = healAmount }
		add_to_temp_variable = { l_hp_t = healAmount }
		add_to_temp_variable = { s_hp_t = healAmount }
		
		if = {
			limit = {
				check_variable = { a_hp_t > a_hp_max}
			}
			set_variable = { a_hp = a_hp_max}
		}
		else = {
			add_to_variable = { a_hp = healAmount }
		}
		if = {
			limit = {
				check_variable = { l_hp_t > l_hp_max}
			}
			set_variable = { l_hp = l_hp_max}
		}
		else = {
			add_to_variable = { l_hp = healAmount }
		}
		if = {
			limit = {
				check_variable = { s_hp_t > s_hp_max}
			}
			set_variable = { s_hp = s_hp_max}
		}
		else = {
			add_to_variable = { s_hp = healAmount }
		}
	}
	else_if = {
		limit = {
			has_country_flag = barrad_silver_star_alive
			has_country_flag = barrad_asinti_alive
			NOT = { has_country_flag = barrad_leopold_alive }
		}
		set_temp_variable = { a_hp_t = a_hp_max }
		set_temp_variable = { s_hp_t = s_hp_max }
		
		add_to_temp_variable = { a_hp_t = healAmount }
		add_to_temp_variable = { s_hp_t = healAmount }
		
		if = {
			limit = {
				check_variable = { a_hp_t > a_hp_max}
			}
			set_variable = { a_hp = a_hp_max}
		}
		else = {
			add_to_variable = { a_hp = healAmount }
		}
		if = {
			limit = {
				check_variable = { s_hp_t > s_hp_max}
			}
			set_variable = { s_hp = s_hp_max}
		}
		else = {
			add_to_variable = { s_hp = healAmount }
		}
	}
	else_if = {
		limit = {
			has_country_flag = barrad_silver_star_alive
			NOT = { has_country_flag = barrad_asinti_alive }
			has_country_flag = barrad_leopold_alive
		}
		set_temp_variable = { l_hp_t = l_hp_max }
		set_temp_variable = { s_hp_t = s_hp_max }
		
		add_to_temp_variable = { l_hp_t = healAmount }
		add_to_temp_variable = { s_hp_t = healAmount }
		
		else = {
			add_to_variable = { a_hp = healAmount }
		}
		if = {
			limit = {
				check_variable = { l_hp_t > l_hp_max}
			}
			set_variable = { l_hp = l_hp_max}
		}
		else = {
			add_to_variable = { l_hp = healAmount }
		}
		if = {
			limit = {
				check_variable = { s_hp_t > s_hp_max}
			}
			set_variable = { s_hp = s_hp_max}
		}
		else = {
			add_to_variable = { s_hp = healAmount }
		}
	}
	else_if = {
		limit = {
			has_country_flag = barrad_silver_star_alive
			NOT = { has_country_flag = barrad_asinti_alive }
			NOT = { has_country_flag = barrad_leopold_alive }
		}
		set_temp_variable = { s_hp_t = s_hp_max }
		
		add_to_temp_variable = { s_hp_t = healAmount }
		
		if = {
			limit = {
				check_variable = { s_hp_t > s_hp_max}
			}
			set_variable = { s_hp = s_hp_max}
		}
		else = {
			add_to_variable = { s_hp = healAmount }
		}
	}
	else_if = {
		limit = {
			NOT = { has_country_flag = barrad_silver_star_alive }
			has_country_flag = barrad_asinti_alive
			has_country_flag = barrad_leopold_alive
		}
		set_temp_variable = { a_hp_t = a_hp_max }
		set_temp_variable = { l_hp_t = l_hp_max }
		
		add_to_temp_variable = { a_hp_t = healAmount }
		add_to_temp_variable = { l_hp_t = healAmount }
		
		if = {
			limit = {
				check_variable = { a_hp_t > a_hp_max}
			}
			set_variable = { a_hp = a_hp_max}
		}
		else = {
			add_to_variable = { a_hp = healAmount }
		}
		if = {
			limit = {
				check_variable = { l_hp_t > l_hp_max}
			}
			set_variable = { l_hp = l_hp_max}
		}
		else = {
			add_to_variable = { l_hp = healAmount }
		}
	}
	else_if = {
		limit = {
			NOT = { has_country_flag = barrad_silver_star_alive }
			has_country_flag = barrad_asinti_alive
			NOT = { has_country_flag = barrad_leopold_alive}
		}
		set_temp_variable = { a_hp_t = a_hp_max }
		
		add_to_temp_variable = { a_hp_t = healAmount }
		
		if = {
			limit = {
				check_variable = { a_hp_t > a_hp_max}
			}
			set_variable = { a_hp = a_hp_max}
		}
		else = {
			add_to_variable = { a_hp = healAmount }
		}
	}
	else_if = {
		limit = {
			NOT = { has_country_flag = barrad_silver_star_alive }
			NOT = { has_country_flag = barrad_asinti_alive}
			has_country_flag = barrad_leopold_alive
		}
		set_temp_variable = { l_hp_t = l_hp_max }
		
		add_to_temp_variable = { l_hp_t = healAmount }
		
		if = {
			limit = {
				check_variable = { l_hp_t > l_hp_max}
			}
			set_variable = { l_hp = l_hp_max}
		}
		else = {
			add_to_variable = { l_hp = healAmount }
		}
	}
	subtract_from_variable = { a_in = 2}
}


BAR_leopold_attack = {
	set_temp_variable = { l_hp_half = l_hp }
	set_temp_variable = { l_hp_qua = l_hp }
	divide_temp_variable = { l_hp_half = 2 }
	divide_temp_variable = { l_hp_qua = 4 }
	if = {
		limit = {
			check_variable = { l_in > 5 }
		}
		if = {
			limit = {
				check_variable = {
					var = l_hp
					value = l_hp_half
					compare = greater_than_or_equals
				}
			}
			random_list = {
				30 = {
					BAR_leopold_normal_attack = yes
				}
				60 = {
					BAR_leopold_strong_attack = yes
				}
				10 = {
					BAR_leopold_stun = yes
				}
			}
		}
		if = {
			limit = {
				check_variable = { l_hp < l_hp_qua }
			}
			random_list = {
				80 = {
					BAR_leopold_strong_attack = yes
				}
				20 = {
					BAR_leopold_stun = yes
				}
			}
		}
		if = {
			limit = {
				check_variable = { l_hp < l_hp_half }
			}
			random_list = {
				20 = {
					BAR_leopold_normal_attack = yes
				}
				70 = {
					BAR_leopold_strong_attack = yes
				}
				10 = {
					BAR_leopold_stun = yes
				}
			}
		}
	}
	else = {
		if = { #rest
			limit = {
				check_variable = { l_in = 0 }
			}
			BAR_pentarchy_rest = yes
		}
		else = {
			if = {
				limit = {
					check_variable = {
						var = a_hp
						value = a_hp_half
						compare = greater_than_or_equals
					}
				}
				if = {
					limit = {
						check_variable = { l_in > 2 }
					}
					random_list = {
						70 = {
							BAR_leopold_normal_attack = yes
						}
						20 = {
							BAR_leopold_strong_attack = yes
						}
						10 = {
							BAR_leopold_stun = yes
						}
					}
				}
				else = {
					random_list = {
						80 = {
							BAR_leopold_normal_attack = yes
						}
						20 = {
							BAR_leopold_stun = yes
						}
					}
				}
			}
			if = {
				limit = {
					check_variable = { l_hp < l_hp_qua }
				}
				if = {
					limit = {
						check_variable = { l_in > 2 }
					}
					random_list = {
						90 = {
							BAR_leopold_normal_attack = yes
						}
						10 = {
							BAR_leopold_stun = yes
						}
					}
				}
				else = {
					random_list = {
						80 = {
							BAR_leopold_normal_attack = yes
						}
						20 = {
							BAR_leopold_stun = yes
						}
					}
				}
			}
			if = {
				limit = {
					check_variable = { l_hp < l_hp_half }
				}
				if = {
					limit = {
						check_variable = { l_in > 2 }
					}
					random_list = {
						70 = {
							BAR_leopold_normal_attack = yes
						}
						20 = {
							BAR_leopold_strong_attack = yes
						}
						10 = {
							BAR_leopold_stun = yes
						}
					}
				}
				else = {
					random_list = {
						90 = {
							BAR_leopold_normal_attack = yes
						}
						10 = {
							BAR_leopold_stun = yes
						}
					}
				}
			}
		}
	}
}

BAR_leopold_normal_attack = {
	random_list = {
		5 = {
			set_temp_variable = { dmgToDeal = 3 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 4 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 5 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 6 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 7 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 8 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 9 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 10 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 11 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 12 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 13 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 14 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 15 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 16 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 17 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 18 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 19 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 20 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 21 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 22 }
		}					
	}
	random_list = {
		90 = {
			subtract_from_variable = { v_hp = dmgToDeal}
		}
		10 = {
			#you missed
		}
	}
	subtract_from_variable = { l_in = 1}
}
BAR_leopold_strong_attack = {
	random_list = {
		5 = {
			set_temp_variable = { dmgToDeal = 11 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 12 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 13 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 14 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 15 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 16 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 17 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 18 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 19 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 20 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 21 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 22 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 23 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 24 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 25 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 26 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 27 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 28 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 29 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 30 }
		}					
	}
	random_list = {
		90 = {
			subtract_from_variable = { v_hp = dmgToDeal}
		}
		10 = {
			#you missed
		}
	}
	subtract_from_variable = { l_in = 3}
}
BAR_leopold_stun = {
	random_list = {
		90 = {
			random_list = {
				40 = {
					set_variable = { v_stun = 1 }
				}
				50 = {
					set_variable = { v_stun = 2 }
				}
				10 = {
					set_variable = { v_stun = 3 }
				}
			}
		}
		10 = {
			#you missed
		}
	}
	subtract_from_variable = { l_in = 1}
}



BAR_silver_attack = {
	set_temp_variable = { s_hp_half = s_hp }
	set_temp_variable = { s_hp_qua = s_hp }
	divide_temp_variable = { s_hp_half = 2 }
	divide_temp_variable = { s_hp_qua = 4 }
	if = {
		limit = {
			check_variable = { s_in > 5 }
		}
		if = {
			limit = {
				check_variable = {
					var = s_hp
					value = s_hp_half
					compare = greater_than_or_equals
				}
			}
			random_list = {
				80 = {
					BAR_silver_normal_attack = yes
				}
				20 = {
					BAR_silver_heal = yes
				}
			}
		}
		if = {
			limit = {
				check_variable = { s_hp < s_hp_qua }
			}
			random_list = {
				40 = {
					BAR_silver_normal_attack = yes
				}
				30 = {
					BAR_silver_lifesteal_attack = yes
				}
				30 = {
					BAR_silver_heal = yes
				}
			}
		}
		if = {
			limit = {
				check_variable = { s_hp < s_hp_half }
			}
			random_list = {
				60 = {
					BAR_silver_normal_attack = yes
				}
				20 = {
					BAR_silver_lifesteal_attack = yes
				}
				20 = {
					BAR_silver_heal = yes
				}
			}
		}
	}
	else = {
		if = { #rest
			limit = {
				check_variable = { s_in = 0 }
			}
			BAR_pentarchy_rest = yes
		}
		else = {
			if = {
				limit = {
					check_variable = {
						var = s_hp
						value = s_hp_half
						compare = greater_than_or_equals
					}
				}
				if = {
					limit = {
						check_variable = { s_in > 1 }
					}
					random_list = {
						90 = {
							BAR_silver_normal_attack = yes
						}
						10 = {
							BAR_silver_heal = yes
						}
					}
				}
				else = {
					BAR_silver_normal_attack = yes
				}
			}
			if = {
				limit = {
					check_variable = { s_hp < s_hp_qua }
				}
				if = {
					limit = {
						check_variable = { s_in > 1 }
					}
					random_list = {
						60 = {
							BAR_silver_normal_attack = yes
						}
						30 = {
							BAR_silver_lifesteal_attack = yes
						}
						10 = {
							BAR_silver_heal = yes
						}
					}
				}
				else = {
					BAR_silver_normal_attack = yes
				}
			}
			if = {
				limit = {
					check_variable = { s_hp < s_hp_half }
				}
				if = {
					limit = {
						check_variable = { s_in > 1 }
					}
					random_list = {
						80 = {
							BAR_silver_normal_attack = yes
						}
						10 = {
							BAR_silver_lifesteal_attack = yes
						}
						10 = {
							BAR_silver_heal = yes
						}
					}
				}
				else = {
					BAR_silver_normal_attack = yes
				}
			}
		}
	}
}

BAR_silver_normal_attack = {
	random_list = {
		5 = {
			set_temp_variable = { dmgToDeal = 2 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 3 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 4 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 5 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 6 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 7 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 8 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 9 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 10 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 11 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 12 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 13 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 14 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 15 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 16 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 17 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 18 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 19 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 20 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 21 }
		}					
	}
	random_list = {
		90 = {
			subtract_from_variable = { v_hp = dmgToDeal}
		}
		10 = {
			#you missed
		}
	}
	subtract_from_variable = { s_in = 1}
}

BAR_silver_lifesteal_attack = {
	random_list = {
		5 = {
			set_temp_variable = { dmgToDeal = 5 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 6 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 7 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 8 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 9 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 10 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 11 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 12 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 13 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 14 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 15 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 16 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 17 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 18 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 19 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 20 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 21 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 22 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 23 }
		}
		5 = {
			set_temp_variable = { dmgToDeal = 24 }
		}					
	}
	random_list = {
		90 = {
			subtract_from_variable = { v_hp = dmgToDeal }
			set_temp_variable = { s_hp_temp = s_hp }
			add_to_temp_variable = { s_hp_temp = dmgToDeal }
			if = {
				limit = {
					check_variable = { s_hp_max > s_hp_temp}
				}
				add_to_variable = { s_hp = dmgToDeal}
			}
			else = {
				set_variable = { s_hp = s_hp_max}
			}
		}
		10 = {
			#you missed
		}
	}
	subtract_from_variable = { s_in = 2}
}

BAR_silver_heal = {
	set_temp_variable = { min = 1000 }
	random_list = {
		10 = {
			set_temp_variable = { healAmount = 24 }
		}
		10 = {
			set_temp_variable = { healAmount = 26 }
		}
		10 = {
			set_temp_variable = { healAmount = 28 }
		}
		10 = {
			set_temp_variable = { healAmount = 30 }
		}
		10 = {
			set_temp_variable = { healAmount = 32 }
		}
		10 = {
			set_temp_variable = { healAmount = 34 }
		}
		10 = {
			set_temp_variable = { healAmount = 36 }
		}
		10 = {
			set_temp_variable = { healAmount = 38 }
		}
		10 = {
			set_temp_variable = { healAmount = 40 }
		}
		10 = {
			set_temp_variable = { healAmount = 42 }
		}
	}
	if = {
		limit = {
			check_variable = { a_hp > 0 }
			check_variable = { a_hp < min }
		}
		set_variable = { min = a_hp }
		set_variable = { heal_target = 1 }
	}
	if = {
		limit = {
			check_variable = { l_hp > 0 }
			check_variable = { l_hp < min }
		}
		set_variable = { min = l_hp }
		set_variable = { heal_target = 2 }
	}
	if = {
		limit = {
			check_variable = { s_hp > 0 }
			check_variable = { s_hp < min }
		}
		set_variable = { min = s_hp }
		set_variable = { heal_target = 3 }
	}
	if = {
		limit = {
			check_variable = { heal_target = 1 }
		}
		set_temp_variable = { a_hp_temp = a_hp}
		add_to_temp_variable = { a_hp_temp = healAmount}
		if = {
			limit = {
				check_variable = { a_hp_max > a_hp_temp}
			}
			add_to_variable = { a_hp = healAmount}
		}
		else = {
			set_variable = { a_hp = a_hp_max}
		}
	}
	if = {
		limit = {
			check_variable = { heal_target = 2 }
		}
		set_temp_variable = { l_hp_temp = l_hp}
		add_to_temp_variable = { l_hp_temp = healAmount}
		if = {
			limit = {
				check_variable = { l_hp_max > l_hp_temp}
			}
			add_to_variable = { l_hp = healAmount}
		}
		else = {
			set_variable = { l_hp = l_hp_max}
		}
	}
	if = {
		limit = {
			check_variable = { heal_target = 3 }
		}
		set_temp_variable = { s_hp_temp = a_hp}
		add_to_temp_variable = { s_hp_temp = healAmount}
		if = {
			limit = {
				check_variable = { s_hp_max > s_hp_temp}
			}
			add_to_variable = { s_hp = healAmount}
		}
		else = {
			set_variable = { s_hp = s_hp_max}
		}
	}
	subtract_from_variable = { s_in = 2}
}


BAR_pentarchy_rest = {
	if = {
		limit = {
			has_country_flag = barrad_asinti_alive
		}
		if = {
			limit = {
				check_variable = { a_in < 10 }
			}
			add_to_variable = { a_in = 2 }
		}
		else = {
			set_variable = { a_in = 10 }
		}
	}
	if = {
		limit = {
			has_country_flag = barrad_silver_star_alive
		}
		if = {
			limit = {
				check_variable = { s_in < 10 }
			}
			add_to_variable = { s_in = 2 }
		}
		else = {
			set_variable = { s_in = 10 }
		}
	}
	if = {
		limit = {
			has_country_flag = barrad_leopold_alive
		}
		if = {
			limit = {
				check_variable = { l_in < 10 }
			}
			add_to_variable = { l_in = 2 }
		}
		else = {
			set_variable = { l_in = 10 }
		}
	}
}