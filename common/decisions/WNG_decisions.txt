WNG_beakolinis_march = {
	WNG_beakolinis_march_mission = {
		priority = 200
		allowed = {
			original_tag = WNG
		}

		available = {
			OR = {
				has_country_flag = WNG_march_stopped
				has_government = fascism
			}
		}

		activation = {
			NOT = {
				has_country_flag = WNG_march_stopped
			}
		}

		fixed_random_seed = no

		fire_only_once = yes

		is_good = no

		days_mission_timeout = 80

		timeout_effect = {
			country_event = wingbardy.9
			effect_tooltip = {
				add_stability = -0.15
				add_political_power = -100
				set_politics = {
					ruling_party = fascism
					elections_allowed = no
				}
			}
		}
	}
	WNG_anti_fascist_rebellion_mission = {
		priority = 199
		allowed = {
			original_tag = WNG
		}

		available = {
			OR = {
				has_stability > 0.1
				fascism >0.9
			}
		}

		activation = {
			has_stability < 0.1
			has_government = fascism
		}

		fixed_random_seed = no

		fire_only_once = yes

		is_good = no

		days_mission_timeout = 30

		timeout_effect = {
			set_variable = {
				var = civil_war_size_var
				value = party_popularity@democratic
			}
			add_to_variable = {
				var = civil_war_size_var
				value = party_popularity@communism
			}
			add_to_variable = {
				var = civil_war_size_var
				value = party_popularity@neutrality
			}
			clamp_variable = {
				var = civil_war_size_var
				min = 0.1
				max = 0.9
			}
			start_civil_war = {
				ideology = communism
				size = civil_war_size_var
			}
			clear_variable = civil_war_size_var
		}
	}
}

WNG_tarrin_conference_cat = {
	WNG_time_until_conference = {
		priority = 200

		allowed = {
			original_tag = WNG
		}
		available = {
			hidden_trigger = {
				always = no
			}
		}
		activation = {
			has_completed_focus = WNG_the_tarrin_compromise
			FRN = {
				exists = yes
				OR = {
					owns_state = 487
					owns_state = 652
					owns_state = 521
				}
			}
			NOT = {
				has_country_flag = WNG_conference_happened
			}
		}
		visible = {
			has_completed_focus = WNG_the_tarrin_compromise
			FRN = {
				exists = yes
				OR = {
					owns_state = 487
					owns_state = 652
					owns_state = 521
				}
			}
		}

		fire_only_once = yes

		is_good = yes

		days_mission_timeout = 60

		timeout_effect = {
			set_country_flag = WNG_conference_happened
			country_event = wingbardy.20
		}
	}

	WNG_influence_franmistria = {
		cost = 75
		days_remove = 11
		ai_will_do = {
			factor = 100
		}
		allowed = {
			original_tag = WNG
		}
		visible = {
			has_completed_focus = WNG_the_tarrin_compromise
			NOT = {
				has_country_flag = WNG_conference_happened
			}
		}
		complete_effect = {
			custom_effect_tooltip = WNG_influence_franmistria_tt
			FRN = {
				add_to_variable = {
					var = chance_to_hand_over_tarrin
					value = 2
				}
			}
		}
	}

	WNG_bribe_franmistrian_ministers = {
		cost = 125
		days_remove = 14
		ai_will_do = {
			factor = 200
		}
		allowed = {
			original_tag = WNG
		}
		visible = {
			has_completed_focus = WNG_the_tarrin_compromise
			NOT = {
				has_country_flag = WNG_conference_happened
			}
		}
		complete_effect = {
			custom_effect_tooltip = WNG_bribe_franmistrian_ministers_tt
			FRN = {
				add_to_variable = {
					var = chance_to_hand_over_tarrin
					value = 3
				}
			}
		}
	}

	WNG_visit_franmistria = {
		cost = 200
		fire_only_once = yes
		ai_will_do = {
			factor = 300
		}
		allowed = {
			original_tag = WNG
		}
		visible = {
			has_completed_focus = WNG_the_tarrin_compromise
			NOT = {
				has_country_flag = WNG_conference_happened
			}
		}
		complete_effect = {
			custom_effect_tooltip = WNG_visit_franmistria_tt
			FRN = {
				add_to_variable = {
					var = chance_to_hand_over_tarrin
					value = 4
				}
			}
		}
	}
}

form_WNG_workers_empire_category = {

	form_WNG_workers_empire = {

		icon = generic_form_nation

		allowed = {
			original_tag = WNG
		}

		visible = {
			original_tag = WNG
			always = no
			#has_completed_focus = WNG_the_workers_empire
			has_government = communism
			NOT = { has_global_flag = form_wingbardian_empire_flag }
		}

		available = {
			is_subject = no
			WNG = { all_cores_owned_by_ROOT_or_subject = yes }
			FAL = { all_cores_owned_by_ROOT_or_subject = yes }
			SIC = { all_cores_owned_by_ROOT_or_subject = yes }
			TAL = { all_cores_owned_by_ROOT_or_subject = yes }
			FRN = { all_cores_owned_by_ROOT_or_subject = yes }
			ARA = { all_cores_owned_by_ROOT_or_subject = yes }
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision form_WNG_workers_empire"
			set_cosmetic_tag = WNG_EMPIRE
			WNG = { add_to_ROOT_potential_cores = yes }
			FAL = { add_to_ROOT_potential_cores = yes }
			SIC = { add_to_ROOT_potential_cores = yes }
			TAL = { add_to_ROOT_potential_cores = yes }
			FRN = { add_to_ROOT_potential_cores = yes }
			ARA = { add_to_ROOT_potential_cores = yes }
			hidden_effect = {
				news_event = { id = news_wingbardy.11 hours = 6 }
				set_global_flag = form_wingbardian_empire_flag
			}
		}

		ai_will_do = {
			factor = 200
		}
	}
}

form_WNG_wingbardian_empire_category = {

	form_WNG_wingbardian_empire = {

		icon = generic_form_nation

		visible = {
			OR = {
				AND = {
					NOT = {
						original_tag = WNG
					}
					WNG = {
						OR = {
							exists = no
							is_subject_of = ROOT
						}
					}
				}
				AND = {
					original_tag = WNG
					has_completed_focus = WNG_wingbard_empire
				}
			}
			NOT = { has_global_flag = form_wingbardian_empire_flag }
		}

		available = {
			is_subject = no
			# Wingbardy
			WNG = { all_cores_owned_by_ROOT_or_subject = yes }
			FAL = { all_cores_owned_by_ROOT_or_subject = yes }
			SIC = { all_cores_owned_by_ROOT_or_subject = yes }
			TAL = { all_cores_owned_by_ROOT_or_subject = yes }
			FRN = { all_cores_owned_by_ROOT_or_subject = yes }
			ARA = { all_cores_owned_by_ROOT_or_subject = yes }
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision form_WNG_wingbardian_empire"
			set_cosmetic_tag = WNG_EMPIRE
			set_country_flag = is_wng_empire
			if = {
				limit = {
					371 = {
						is_capital = no
					}
				}
				set_capital = 371
			}
			WNG = { add_to_ROOT_potential_cores = yes }
			FAL = { add_to_ROOT_potential_cores = yes }
			SIC = { add_to_ROOT_potential_cores = yes }
			TAL = { add_to_ROOT_potential_cores = yes }
			FRN = { add_to_ROOT_potential_cores = yes }
			ARA = { add_to_ROOT_potential_cores = yes }
			hidden_effect = {
				news_event = { id = news_wingbardy.10 hours = 6 }
				set_global_flag = form_wingbardian_empire_flag
			}
		}

		ai_will_do = {
			factor = 200
		}
	}
}

foreign_politics = {

	WNG_puppet_commie_neighbours = {

		icon = generic_form_nation

		allowed = {
			original_tag = WNG
		}
		targets = { TAL FRN ARA FAL SIC }
		targets_dynamic = yes
		target_trigger = {
			FROM = {
				OR = {
					original_tag = TAL
					original_tag = FRN
					original_tag = ARA
					original_tag = FAL
					original_tag = SIC
				}
			}
		}

		available = {
			FROM = {
				is_in_faction_with = ROOT
				is_free_or_subject_of_root = yes
				has_government = communism
				NOT = { has_idea = WNG_intergration }
			}
		}
		target_root_trigger = {
			is_subject = no
			has_government = communism
			has_completed_focus = WNG_spread_the_revolution
			
		}
		visible = {
			always = no
			is_subject = no
			has_government = communism
			#has_completed_focus = WNG_spread_the_revolution
			FROM = {
				exists = yes
				OR = {
					original_tag = TAL
					original_tag = FRN
					original_tag = ARA
					original_tag = FAL
					original_tag = SIC
				}
			}
		}

		cost = 50

		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision WNG_puppet_commie_neighbours target: [From.GetName]"
			FROM = { country_event = wingbardy.141 }
		}

		ai_will_do = {
			factor = 100
		}
	}

	WNG_puppet_fascist_neighbours = {

		icon = generic_form_nation

		allowed = {
			original_tag = WNG
		}
		targets = { TAL FRN ARA FAL SIC }
		targets_dynamic = yes
		target_trigger = {
			FROM = {
				OR = {
					original_tag = TAL
					original_tag = FRN
					original_tag = ARA
					original_tag = FAL
					original_tag = SIC
				}
			}
		}

		available = {
			FROM = {
				is_in_faction_with = ROOT
				is_free_or_subject_of_root = yes
				NOT = { has_government = communism }
				NOT = { has_idea = WNG_intergration }
			}
		}
		target_root_trigger = {
			is_subject = no
			has_completed_focus = WNG_wingbard_empire
			OR = {
				has_government = fascism
				has_government = neutrality
			}
		}

		cost = 50

		visible = {
			is_subject = no
			OR = {
				has_government = fascism
				has_government = neutrality
			}
			FROM = {
				exists = yes
				OR = {
					original_tag = TAL
					original_tag = FRN
					original_tag = ARA
					original_tag = FAL
					original_tag = SIC
				}
			}
		}

		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision WNG_puppet_fascist_neighbours target: [From.GetName]"
			FROM = { country_event = wingbardy.141 }
		}

		ai_will_do = {
			factor = 100
		}
	}

	WNG_ally_wingbardy = {

		icon = generic_nationalism
		targets = { WNG }
		targets_dynamic = yes
		target_trigger = {
			FROM = {
				original_tag = WNG
			}
		}

		allowed = {
			OR = {
				original_tag = TAL
				original_tag = FRN
				original_tag = ARA
				original_tag = FAL
			}
		}

		available = {
			NOT = {
				has_war_with = FROM
			}
			is_subject = no
		}

		target_root_trigger = {
			is_subject = no
			has_government = communism
		}

		visible = {
			is_in_faction = no
			has_government = communism
			if = {
				limit = {
					original_tag = FRN
				}
				NOT = {
					has_completed_focus = FRN_torchbearers_of_peasants
				}
			}
			FROM = {
				exists = yes
				original_tag = WNG
				is_subject = no
				has_government = communism
			}
		}

		fire_only_once = yes

		cost = 0

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision WNG_ally_wingbardy target: [From.GetName]"
			FROM = {
				country_event = generic.2
			}
		}

		ai_will_do = {
			factor = 50
		}
	}
	WNG_offer_alliance = {

		icon = generic_nationalism
		target_root_trigger = {
			has_completed_focus = WNG_alliance_with_the_minotaurs
		}
		targets = { FRN ARA TAL BRF BAN CYA LUS LAK }
		targets_dynamic = yes
		target_trigger = {
			FROM = {
				OR = {
					original_tag = BRF
					original_tag = BAN
					original_tag = CYA
					original_tag = LUS
					original_tag = FRN
					original_tag = ARA
					original_tag = TAL
					original_tag = LAK
				}
			}
		}

		allowed = {
			original_tag = WNG
		}

		available = {
			has_war = no
			is_subject = no
			is_in_faction = yes
			FROM = {
				has_war = no
				OR = {
					is_neighbor_of = WNG
					WNG = {
						any_allied_country = {
							is_neighbor_of = FROM
						}
					}
				}
				NOT = {
					has_country_flag = FRN_left_pact
				}
			}
		}

		visible = {
			FROM = {
				exists = yes
				OR = {
					original_tag = BRF
					original_tag = BAN
					original_tag = CYA
					original_tag = LUS
					original_tag = FRN
					original_tag = ARA
					original_tag = TAL
					original_tag = LAK
				}
				is_subject = no
				is_in_faction = no
				OR = {
					AND = {
						has_government = fascism
						NOT = {
							OR = {
								original_tag = BAN
								original_tag = ARA
							}
						}
					}
					has_government = neutrality
				}
			}
		}

		cost = 150
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision WNG_offer_alliance target: [From.GetName]"
			FROM = {
				country_event = wingbardy.120
			}
		}

		ai_will_do = {
			factor = 50
		}
	}
	WNG_secure_new_mareland = {
		icon = griffon_claw
		allowed = {
			original_tag = WNG
		}
		available = {
			controls_state = 356
			controls_state = 362
			controls_state = 360
			has_war_with = EQC
			EQC = {
				has_capitulated = yes
				overlord = {
					has_war_with = WNG
				}
			}
		}
		visible = {
			has_war_with = EQC
			EQC = {
				overlord = {
					has_war_with = WNG
				}
			}
		}
		cost = 50
		ai_will_do = {
			factor = 200
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision WNG_secure_new_mareland"
			EQC = {
				overlord = {
					country_event = { id = wingbardy.7 hours = 2 }
				}
			}
		}
	}
}

WNG_royal_support_decision_cat = {
	WNG_anti_monarchy_uprising = {
		priority = 200
		allowed = {
			original_tag = WNG
		}

		activation = {
			check_variable = { WNG_popular_support < 51 }
			has_completed_focus = WNG_the_royal_intervention
			has_government = neutrality
			is_subject = no
			NOT = {
				has_country_flag = WNG_skip_revolt
			}
		}

		available  = {
			if = {
				limit = {
					is_ai = yes
				}
				OR = {
					custom_trigger_tooltip = {
						tooltip = WNG_popular_support_greater_than_50_tt
					}
					check_variable = { WNG_popular_support > 50 }
					has_country_flag = WNG_skip_revolt
				}
			}
			else = {
				custom_trigger_tooltip = {
					tooltip = WNG_popular_support_greater_than_50_tt
				}
				check_variable = { WNG_popular_support > 50 }
			}
		}

		fixed_random_seed = no

		fire_only_once = yes

		is_good = no

		days_mission_timeout = 100

		timeout_effect = {
			set_temp_variable = { civil_war_size_var = 100 }
			subtract_from_temp_variable = { civil_war_size_var = WNG_popular_support }
			multiply_temp_variable = { civil_war_size_var = 0.01 }
			if = {
				limit = {
					check_variable = {
						var = civil_war_size_var
						value = 0.2
						compare = less_than
					}
				}
				set_variable = {
					var = civil_war_size_var
					value = 0.2
				}
			}
			start_civil_war = {
				ideology = democratic
				size = civil_war_size_var
			}
		}
	}

	WNG_raido_speach = {
		allowed = {
			original_tag = WNG
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = WNG_less_than_100_popular_support_tt
			}
			check_variable = { WNG_popular_support < 100 }
			has_completed_focus = WNG_reach_out_to_the_common_griffon
		}

		cost = 20

		days_re_enable = 21

		ai_will_do = {
			base = 0
			modifier = {
				check_variable = {
					var = WNG_popular_support
					value = WNG_popular_support_max
					compare = less_than
				}
				add = 100
			}
		}

		complete_effect  = {
			WNG_add_10_popular_support = yes
			add_days_mission_timeout = {
				mission = WNG_anti_monarchy_uprising
				days = 14
			}
		}
	}
	WNG_newspaper_campaign = {
		allowed = {
			original_tag = WNG
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = WNG_less_than_100_popular_support_tt
			}
			check_variable = { WNG_popular_support < 100 }
			has_completed_focus = WNG_reach_out_to_the_common_griffon
		}

		cost = 40

		days_re_enable = 21
		days_remove = 35

		ai_will_do = {
			base = 0
			modifier = {
				add = 1
				has_stability < 0.8
			}
			modifier = {
				add = 1
				has_stability < 0.6
			}
			modifier = {
				add = 5
				has_stability < 0.5
			}
			modifier = {
				add = 10
				has_stability < 0.3
			}
			modifier = {
				check_variable = {
					var = WNG_popular_support
					value = WNG_popular_support_max
					compare = less_than
				}
				add = 10
			}
		}

		modifier = {
			stability_weekly = 0.01
			neutrality_drift = 0.05
		}

		complete_effect  = {
			WNG_add_10_popular_support = yes
			add_days_mission_timeout = {
				mission = WNG_anti_monarchy_uprising
				days = 21
			}
		}
	}

	WNG_clamp_down_on_socalist_newspapers = {
		allowed = {
			original_tag = WNG
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = WNG_less_than_100_popular_support_tt
			}
			check_variable = { WNG_popular_support < 100 }
			has_completed_focus = WNG_reach_out_to_the_common_griffon
		}

		cost = 50

		days_remove = 35

		ai_will_do = {
			base = 0
			modifier = {
				check_variable = {
					var = WNG_popular_support
					value = WNG_popular_support_max
					compare = less_than
				}
				add = 1
			}
		}

		remove_effect = {
			WNG_add_15_popular_support = yes
			clr_country_flag = WNG_blocking_socalist_news
			add_days_mission_timeout = {
				mission = WNG_anti_monarchy_uprising
				days = 21
			}
		}

		modifier = {
			communism_drift = -0.05
			stability_weekly = -0.01
		}

		complete_effect  = {
			custom_effect_tooltip = WNG_clamp_down_on_socalist_newspapers_tt
			set_country_flag = WNG_blocking_socalist_news
			WNG_add_10_popular_support = yes
		}
	}
	
	WNG_visit_the_workers = {
		allowed = {
			original_tag = WNG
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = WNG_less_than_100_popular_support_tt
			}
			check_variable = { WNG_popular_support < 100 }
			has_completed_focus = WNG_reach_out_to_the_common_griffon
		}

		cost = 40

		days_remove = 35

		ai_will_do = {
			base = 0
			modifier = {
				check_variable = {
					var = WNG_popular_support
					value = WNG_popular_support_max
					compare = less_than
				}
				add = 5
			}
		}

		modifier = {
			production_factory_efficiency_gain_factor = 0.1
		}

		complete_effect = {
			WNG_add_15_popular_support = yes
			add_days_mission_timeout = {
				mission = WNG_anti_monarchy_uprising
				days = 21
			}
		}
	}

	WNG_crackdown_on_fascists = {
		allowed = {
			original_tag = WNG
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = WNG_less_than_100_popular_support_tt
			}
			check_variable = { WNG_popular_support < 100 }
			has_completed_focus = WNG_reach_out_to_the_common_griffon
		}

		cost = 50

		days_remove = 35

		ai_will_do = {
			base = 0
			modifier = {
				check_variable = {
					var = WNG_popular_support
					value = WNG_popular_support_max
					compare = less_than
				}
				add = 1
			}
		}

		modifier = {
			fascism_drift = -0.05
			stability_weekly = -0.01
		}

		complete_effect = {
			WNG_add_10_popular_support = yes
			add_days_mission_timeout = {
				mission = WNG_anti_monarchy_uprising
				days = 21
			}
		}
	}
}

war_measures = {
	WNG_divert_resources_to_the_navy = {
		allowed = {
			original_tag = WNG
		}

		available = {
			has_completed_focus = WNG_expand_the_regia_marina
		}

		cost = 25

		days_remove = 70

		modifier = {
			industrial_capacity_factory = -0.1
			industrial_capacity_dockyard = 0.15
		}
	}
}

WNG_wingbardian_parliament_cat = {
	WNG_small_lobby_effort = {
		icon = generic_political_discourse
		allowed = {
			original_tag = WNG
		}
		available = {
			# NOT = {
			# 	has_decision = WNG_medium_lobby_effort
			# }
			WNG_parliament_max_support_trigger = yes
			OR = {
				has_completed_focus = WNG_meet_with_beakolini
				has_completed_focus = WNG_negotiate_with_the_PWDA
			}
			WNG_has_majority_government = no
		}
		ai_will_do = {
			base = 10
			modifier = {
				check_variable = { WNG.WNG_parliament_support > 275 }
				factor = 0
			}
			modifier = {
				has_political_power < 30
				factor = 0
			}
		}

		cost = 10

		modifier = {
			political_power_gain = -0.3
		}
		days_remove = 30
		remove_effect = {
			WNG_small_support_for_government = yes
		}
	}
	# WNG_medium_lobby_effort = {
	# 	icon = generic_political_discourse
	# 	allowed = {
	# 		original_tag = WNG
	# 	}
	# 	available = {
	# 		NOT = {
	# 			has_decision = WNG_small_lobby_effort
	# 		}
	# 		WNG_parliament_max_support_trigger = yes
	# 		OR = {
	# 			has_completed_focus = WNG_meet_with_beakolini
	# 			has_completed_focus = WNG_negotiate_with_the_PWDA
	# 		}
	# 	}
	# 	ai_will_do = {
	# 		base = 1
	# 		modifier = {
	# 			WNG_parliament_low_support_trigger = yes
	# 			add = 50
	# 		}
	# 		modifier = {
	# 			WNG_parliament_low_support_trigger = yes
	# 			has_government = fascism
	# 			factor = 2
	# 		}
	# 	}

	# 	cost = 0

	# 	modifier = {
	# 		political_power_gain = -0.75
	# 	}
	# 	days_remove = 45
	# 	remove_effect = {
	# 		WNG_medium_support_for_government = yes
	# 	}
	# }
	## Fascism get support
	#Support from the Prelate will cause conflict in the PPW and bring over some members to our side
	WNG_appeal_to_the_prelate_for_support = {
		icon = generic_political_discourse
		allowed = {
			original_tag = WNG
		}
		visible = {
			has_government = fascism
		}
		available = {
			WNG_parliament_max_support_trigger = yes
			WNG_has_majority_government = no
		}
		ai_will_do = {
			factor = 100
		}
		cost = 30
		fire_only_once = yes
		days_remove = 7
		remove_effect = {
			WNG_medium_support_for_government = yes
			set_country_flag = WNG_divisions_in_the_ppw
			hidden_effect = {
				country_event = wingbardy.43
				country_event = {
					id = wingbardy.42
					days = 30
					random_days = 2
				}
			}
		}
		modifier = {
			political_power_gain = -0.3
		}
	}
	WNG_intimidate_moderate_politicians = {
		icon = generic_political_discourse
		allowed = {
			original_tag = WNG
		}
		visible = {
			has_government = fascism
		}
		available = {
			WNG_parliament_max_support_trigger = yes
			WNG_has_majority_government = no
		}
		ai_will_do = {
			base = 10
			modifier = {
				check_variable = { WNG.WNG_parliament_support > 275 }
				factor = 0
			}
			modifier = {
				has_stability < 0.2
				factor = 0
			}
		}
		cost = 25
		days_remove = 7
		days_re_enable = 30
		remove_effect = {
			WNG_small_support_for_government = yes
		}
		modifier = {
			stability_weekly_factor = -0.01
		}
	}
	WNG_bribe_conservative_politicans = {
		icon = generic_political_discourse
		allowed = {
			original_tag = WNG
		}
		visible = {
			has_government = fascism
		}
		available = {
			WNG_parliament_max_support_trigger = yes
			WNG_has_majority_government = no
		}
		ai_will_do = {
			base = 10
			modifier = {
				check_variable = { WNG.WNG_parliament_support > 275 }
				factor = 0
			}
		}
		cost = 25
		days_remove = 14
		days_re_enable = 14
		remove_effect = {
			WNG_small_support_for_government = yes
		}
	}
}