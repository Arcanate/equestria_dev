HIP_underwater_construction_cat = {
	HIP_build_underwater_civ_factory = {
		icon = generic_construction
		available = {
			num_of_civilian_factories_available_for_projects > 10
			has_completed_focus = HIP_underwater_construction
		}
		cost = HIP_underwater_building_cost
		days_remove = 50

		modifier = {
			civilian_factory_use = 11
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 200
				factor = 0
			}
		}

		remove_effect = {
			add_to_variable = { var = HIP_underwater_civ value = 1 }
			add_offsite_building = {
				type = industrial_complex
				level = 1
			}
		}
	}

	HIP_build_underwater_mil_factory = {
		icon = generic_construction
		available = {
			num_of_civilian_factories_available_for_projects > 10
			has_completed_focus = HIP_underwater_construction
		}
		cost = HIP_underwater_building_cost
		days_remove = 30

		modifier = {
			civilian_factory_use = 11
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 200
				factor = 0
			}
		}

		remove_effect = {
			add_to_variable = { var = HIP_underwater_mil value = 1 }
			add_offsite_building = {
				type = arms_factory
				level = 1
			}
		}
	}

	HIP_build_underwater_dockyard = {
		icon = generic_construction
		available = {
			num_of_civilian_factories_available_for_projects > 10
			has_completed_focus = HIP_underwater_construction
		}
		cost = HIP_underwater_building_cost
		days_remove = 30

		modifier = {
			civilian_factory_use = 11
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 200
				factor = 0
			}
		}

		remove_effect = {
			add_to_variable = { var = HIP_underwater_dockyard value = 1 }
			add_offsite_building = {
				type = dockyard
				level = 1
			}
		}
	}

	HIP_build_underwater_refinery = {
		icon = generic_construction
		available = {
			num_of_civilian_factories_available_for_projects > 10
			has_tech = synth_oil_experiments
			has_completed_focus = HIP_underwater_construction
		}
		cost = HIP_underwater_building_cost
		days_remove = 60

		modifier = {
			civilian_factory_use = 11
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 200
				factor = 0
			}
		}

		remove_effect = {
			add_to_variable = { var = HIP_underwater_refinery value = 1 }
			add_offsite_building = {
				type = synthetic_refinery
				level = 1
			}
		}
	}

	HIP_build_underwater_fuel_silo = {
		icon = generic_construction
		available = {
			num_of_civilian_factories_available_for_projects > 10
			has_completed_focus = HIP_underwater_construction
		}
		cost = HIP_underwater_building_cost
		days_remove = 30

		modifier = {
			civilian_factory_use = 11
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 200
				factor = 0
			}
		}

		remove_effect = {
			add_to_variable = { var = HIP_underwater_fuel_silo value = 1 }
			add_offsite_building = {
				type = fuel_silo
				level = 1
			}
		}
	}
}
military_training_category = {
	HIP_torp_cruisers = {
		icon = generic_naval
		allowed = {
			original_tag = HIP
		}
		available = {
				if = {
					limit = {
						has_dlc = "Man the Guns"
					}
					has_tech = improved_ship_hull_cruiser
					else = {
						OR = {
						has_tech = improved_light_cruiser
						has_tech = improved_heavy_cruiser
						}
					}
				}
				has_completed_focus = HIP_expand_the_escort_fleet	
				hidden_trigger = { has_navy_experience > 150 has_political_power > 29 }
		}
		visible = {
			OR = {
				if = {
					limit = {
						has_dlc = "Man the Guns"
					}
					has_tech = improved_ship_hull_cruiser
					else = {
						OR = {
						has_tech = improved_light_cruiser
						has_tech = improved_heavy_cruiser
						}
					}
				}
				has_completed_focus = HIP_expand_the_escort_fleet	
			}
		}
		
		custom_cost_trigger = {
			has_navy_experience > 149
			has_political_power > 29
		}

		custom_cost_text = decision_cost_navy_xp_150_pp_30

		ai_will_do = {
			factor = 10
		}
		days_remove = 90

		fire_only_once = yes
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove HIP_torp_cruisers"
			if = {
				limit = {
					not = { has_dlc = "Man the Guns" }
				}
				set_technology = { torpedo_cruiser = 1 }
			}
			else = {
				set_technology = { torpedo_cruiser_mtg = 1 }
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision HIP_torp_cruisers"
			hidden_effect = { navy_experience = -150 add_political_power = -30 }
		}
	}
}
prospect_for_resources = {
	HIP_deep_sea_oil_extraction = { #685
		
		icon = oil

		allowed = {
			original_tag = HIP
		}
		highlight_states = {
			state = 685
		}
		available = {
			has_completed_focus = HIP_support_the_oil_industry
			num_of_civilian_factories_available_for_projects > 5
			owns_state = 685
			controls_state = 685
		}

		visible = {
			#has_completed_focus = HIP_support_the_oil_industry
			685 = {
				NOT = {
					has_state_flag = {
						flag = deep_sea_oil_developed
						value = 5
					}
				}
			}
		}

		cost = 25
		days_remove = HIP_deep_sea_oil_extraction_duration

		modifier = {
			civilian_factory_use = 6
		}

		ai_will_do = {
			factor = 1
			modifier = {
				has_political_power < 100
				factor = 0
			}
		}

		remove_effect = {
			add_to_variable = { var = HIP_deep_sea_oil_extraction_duration value = 30 }
			685 = {
				if = {
					limit = {
						NOT = {
							has_state_flag = deep_sea_oil_developed
						}
					}
					set_state_flag = {
						flag = deep_sea_oil_developed
						value = 1
					}
				}
				else = {
					modify_state_flag = {
						flag = deep_sea_oil_developed
						value = 1
					}
				}
			}
			685 = {
				add_resource = {
					type = oil
					amount = 12
				}
			}
		}

		complete_effect = {
			if = {
				limit = {
					check_variable = { var = HIP_deep_sea_oil_extraction_duration value = 30 compare = less_than }
				}
				set_variable = { var = HIP_deep_sea_oil_extraction_duration value = 30 }
			}
		}
	}
}
HIP_anti_harmonic_activities_committee_cat = {
	HIP_reach_out_to_the_OHS = {
		available = {
			RCT = {
				NOT = {
					has_government = communism
					has_government = fascism
				}
				has_completed_focus = RCT_strengthen_the_ohs
				NOT = {
					has_war_with = ROOT
				}
			}
			NOT = {
				has_country_flag = HIP_reached_out_to_SMILE
			}
		}
		cost = 75
		ai_will_do = {
			factor = 25
		}
		fire_only_once = yes
		complete_effect = {
			set_country_flag = HIP_reached_out_to_OHS
			RCT = {
				country_event = {
					id = hippogriff.2
					hours = 2
					random_hours = 2
				}
			}
			effect_tooltip = {
				custom_effect_tooltip = if_they_accept
				add_ideas = HIP_ohs_help
			}
		}
	}
	HIP_reach_out_to_SMILE = {
		available = {
			EQS = {
				exists = yes
				has_government = democratic
				NOT = {
					has_war_with = ROOT
				}
			}
			NOT = {
				has_country_flag = HIP_reached_out_to_OHS
			}
		}
		cost = 75
		ai_will_do = {
			factor = 25
		}
		fire_only_once = yes
		complete_effect = {
			set_country_flag = HIP_reached_out_to_SMILE
			EQS = {
				country_event = {
					id = hippogriff.5
					hours = 2
					random_hours = 2
				}
			}
			effect_tooltip = {
				custom_effect_tooltip = if_they_accept
				add_ideas = HIP_smile_help
			}
		}
	}
	HIP_seize_communist_publications = {
		cost = 25
		days_remove = 30
		days_re_enable = 60

		modifier = {
			communism_drift = -0.05
			political_power_factor = -0.05
		}

		ai_will_do = {
			factor = 1
			modifier = {
				communism < 0.05
				factor = 0
			}
			modifier = {
				has_political_power < 175
				factor = 0
			}
		}
	}
	HIP_root_out_unjust_businessgriffs = {
		cost = 50
		days_remove = 70

		modifier = {
			production_factory_efficiency_gain_factor = 0.15
			industrial_capacity_dockyard = 0.15
			industrial_capacity_factory = 0.15
			political_power_factor = -0.15
			production_speed_industrial_complex_factor = -0.1
		}

		ai_will_do = {
			factor = 5
			modifier = {
				has_political_power < 175
				factor = 0
			}
		}
	}
	HIP_silence_republican_groups = {
		cost = 25
		days_remove = 30
		days_re_enable = 60

		modifier = {
			neutrality_drift = -0.05
			political_power_factor = -0.05
		}

		ai_will_do = {
			factor = 1
			modifier = {
				neutrality < 0.05
				factor = 0
			}
			modifier = {
				has_political_power < 175
				factor = 0
			}
		}
	}
	HIP_ban_wingbardian_books = {
		cost = 25

		available = {
			WNG = {
				NOT = {
					has_government = democratic
				}
			}
		}
		fire_only_once = yes
		ai_will_do = {
			factor = 1
			modifier = {
				fascism < 0.05
				factor = 0
			}
			modifier = {
				has_political_power < 175
				factor = 0
			}
			modifier = {
				OR = {
					is_in_faction_with = WNG
					is_subject_of = WNG
					has_subject = WNG
				}
				factor = 0
			}
		}

		complete_effect = {
			country_event = hippogriff.8
			add_popularity = {
				ideology = fascism
				popularity = -0.15
			}
		}
	}
	HIP_encourage_unity_parties = {
		cost = 50
		days_re_enable = 60
		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				has_stability > 0.95
			}
		}
		complete_effect = {
			add_stability = 0.05
		}
	}
	HIP_patrol_the_deepest_depths = {
		cost = 50
	}
	HIP_grand_the_power_of_arrest = {
		cost = 50
		fire_only_once = yes
		complete_effect = {
			set_country_flag = HIP_grand_the_power_of_arrest_flag
		}
	}
	HIP_define_harmony = {
		cost = 50
		fire_only_once = yes
		available = {
			has_country_flag = HIP_grand_the_power_of_arrest_flag
		}
		complete_effect = {
			set_country_flag = HIP_define_harmony_flag
		}
	}
	HIP_expand_coverage_to_foreign_nationals = {
		cost = 50
		fire_only_once = yes
		available = {
			has_country_flag = HIP_define_harmony_flag
		}
		complete_effect = {
			set_country_flag = HIP_expand_coverage_to_foreign_nationals_flag
		}
	}
	HIP_anti_harmonic_terrorism_act = {
		cost = 50
		fire_only_once = yes
		available = {
			has_country_flag = HIP_expand_coverage_to_foreign_nationals_flag
		}
		complete_effect = {
			set_country_flag = HIP_anti_harmonic_terrorism_act_flag
		}
	}
}