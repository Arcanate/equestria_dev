KAT_fix_the_economy = {	
	KAT_noble_investments = {

		icon = generic_construction

		available = {
			
		}

		visible = {
			has_country_flag = katerintreue_econ
		}

		modifier = {
			political_power_gain = -0.5
		}

		fire_only_once = yes
		
		remove_effect = {
			random_owned_state = {
				limit = {
					is_controlled_by = ROOT
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			swap_ideas = { 
			remove_idea = KAT_boat_gambling
			add_idea = KAT_new_funding		
			}
		}

		cost = 75
		days_remove = 30

		ai_will_do = {
			factor = 800
		}
	}
	
	KAT_rail_barons = {

		icon = generic_construction

		available = {
			num_of_civilian_factories_available_for_projects > 1
		}

		visible = {
			has_country_flag = katerintreue_econ
		}

		modifier = {
			civilian_factory_use = 1
		}

		fire_only_once = yes

		remove_effect = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			
		}

		cost = 100
		days_remove = 56

		ai_will_do = {
			factor = 800
		}
	}
	
	KAT_consolidate_sharecroppers = {

		icon = generic_construction

		available = {
			has_idea = KAT_new_funding
		}

		visible = {
			has_country_flag = katerintreue_econ
		}

		modifier = {
			stability_weekly = -0.05
			political_power_gain = -0.35
		}

		fire_only_once = yes

		remove_effect = {
			random_owned_state = {
				limit = {
					is_controlled_by = ROOT
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
		
		complete_effect = {
			country_event = { id = katerin.29 days = 25 }
		}

		cost = 50
		days_remove = 25

		ai_will_do = {
			factor = 800
		}
	}
	
	KAT_urbanize_katerinburg = {

		icon = generic_construction

		available = {
			has_country_flag = KAT_city_folk
		}

		visible = {
			has_country_flag = katerintreue_econ
		}

		modifier = {
			political_power_gain = -0.35
			civilian_factory_use = 2
		}

		fire_only_once = yes

		remove_effect = {
			423 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			swap_ideas = { 
			remove_idea = KAT_new_funding
			add_idea = KAT_urbanization_plan		
			}
		}

		cost = 100
		days_remove = 45

		ai_will_do = {
			factor = 800
		}
	}
	
	KAT_develop_aluminium = { #554

		icon = aluminium

		highlight_states = {
			state = 554
		}
		available = {
			num_of_civilian_factories_available_for_projects > 1
		}
		visible = {
			has_country_flag = katerintreue_econ
			554 = {
				is_owned_and_controlled_by = ROOT
				NOT = {
					has_state_flag = KAT_alu_found
				}
			}
		}

		fire_only_once = yes

		cost = 35
		days_remove = 50

		modifier = {
			civilian_factory_use = 2
		}

		ai_will_do = {
			factor = 800
		}
		remove_effect = {
			554 = { set_state_flag = KAT_alu_found }
			554 = {
				add_resource = {
					type = aluminium
					amount = 12
				}
			}
		}
	}
	
	KAT_develop_tungsten = { #423

		icon = tungsten

		highlight_states = {
			state = 423
		}
		available = {
			num_of_civilian_factories_available_for_projects > 1
		}
		visible = {
			has_country_flag = katerintreue_econ
			423 = {
				is_owned_and_controlled_by = ROOT
				NOT = {
					has_state_flag = KAT_tung_found
				}
			}
		}

		fire_only_once = yes

		cost = 35
		days_remove = 50

		modifier = {
			civilian_factory_use = 2
		}

		ai_will_do = {
			factor = 800
		}
		remove_effect = {
			423 = { set_state_flag = KAT_tung_found }
			423 = {
				add_resource = {
					type = tungsten
					amount = 15
				}
			}
		}
	}
	
	KAT_Noble_farm_estates = {

		icon = generic_construction

		available = {
			has_country_flag = KAT_city_folk
		}

		visible = {
			has_country_flag = katerintreue_econ
		}

		modifier = {
			political_power_gain = -0.4
			stability_weekly = -0.02
		}

		fire_only_once = yes

		remove_effect = {
			random_owned_state = {
				limit = {
					is_controlled_by = ROOT
					is_core_of = ROOT
				}
				add_extra_state_shared_building_slots = 1
			}
			random_owned_state = {
				limit = {
					is_controlled_by = ROOT
					is_core_of = ROOT
				}
				add_extra_state_shared_building_slots = 1
			}
		}
		
		complete_effect = {
			country_event = { id = katerin.30 days = 35 }
		}

		cost = 100
		days_remove = 35

		ai_will_do = {
			factor = 800
		}
	}
	
	KAT_the_new_nobility = {

		icon = generic_construction

		available = {
			has_country_flag = rich_nobs
			num_of_civilian_factories_available_for_projects > 0
		}

		visible = {
			has_country_flag = katerintreue_econ
		}

		modifier = {
			political_power_gain = -0.75
			civilian_factory_use = 1
		}

		fire_only_once = yes

		remove_effect = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_owned_state = {
				limit = {
					is_controlled_by = ROOT
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
		
		complete_effect = {
			country_event = { id = katerin.31 days = 70 }
		}

		cost = 150
		days_remove = 70

		ai_will_do = {
			factor = 800
		}
	}
	
	KAT_military_investments = {

		icon = generic_construction

		available = {
			has_country_flag = rich_nobs
			num_of_civilian_factories_available_for_projects > 1
		}

		visible = {
			has_country_flag = katerintreue_econ
		}

		modifier = {
			war_support_weekly = -0.03
			civilian_factory_use = 2
		}

		fire_only_once = yes

		remove_effect = {
			423 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			554 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			set_country_flag = KAT_military_works
		}
		
		cost = 100
		days_remove = 35

		ai_will_do = {
			factor = 800
		}
	}
	
	KAT_public_works = {

		icon = generic_construction

		available = {
			has_country_flag = rich_nobs
			num_of_civilian_factories_available_for_projects > 1
		}

		visible = {
			has_country_flag = katerintreue_econ
		}

		modifier = {
			war_support_weekly = -0.03
			civilian_factory_use = 2
		}

		fire_only_once = yes

		remove_effect = {
			506 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			554 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			add_political_power = 150
			add_stability = 0.1
			set_country_flag = KAT_public_works
		}

		cost = 100
		days_remove = 35

		ai_will_do = {
			factor = 800
		}
	}
	
	KAT_econ_plan_complete = {

		icon = generic_construction

		available = {
			has_country_flag = KAT_military_works
			has_country_flag = KAT_public_works
			num_of_civilian_factories_available_for_projects > 1
		}

		visible = {
			has_country_flag = katerintreue_econ
		}

		modifier = {
			civilian_factory_use = 2
		}

		fire_only_once = yes

		remove_effect = {
			swap_ideas = { 
			remove_idea = KAT_urbanization_plan
			add_idea = KAT_new_economy		
			}
		}

		cost = 150
		days_remove = 35

		ai_will_do = {
			factor = 800
		}
	}
	
}

KAT_princess_government = {
	KAT_form_hmrg = {

		icon = flower

		available = {
			
		}

		visible = {
			has_country_flag = katerintreue_govt
		}

		fire_only_once = yes

		modifier = {
			stability_weekly = 0.05
			political_power_gain = 0.5
		}

		days_remove = 14

		cost = 50

		remove_effect = {
			swap_ideas = { 
			remove_idea = KAT_the_broke_government
			add_idea = KAT_hmr_government		
			}
		}

		ai_will_do = {
			factor = 800
		}
	}
	
	KAT_expand_party = {

		icon = flower

		available = {
			has_idea = KAT_hmr_government
		}

		visible = {
			has_country_flag = katerintreue_govt
		}

		fire_only_once = yes

		modifier = {
			stability_weekly = 0.05
			political_power_gain = -0.5
			fascism_drift = 0.02
		}

		days_remove = 35
		
		remove_effect = {
			country_event = katerin.28
		}

		cost = 50

		ai_will_do = {
			factor = 800
		}
	}
	
	KAT_increase_public_spending = {

		icon = flower

		available = {
			has_idea = KAT_hmr_government
			num_of_civilian_factories_available_for_projects > 0
		}

		visible = {
			has_country_flag = katerintreue_govt
		}

		fire_only_once = yes

		modifier = {
			civilian_factory_use = 1
		}

		days_remove = 45
		
		remove_effect = {
			add_stability = 0.1
			add_political_power = 200
			add_ideas = KAT_katerintreue_welfare
		}

		cost = 100

		ai_will_do = {
			factor = 800
		}
	}
	
	KAT_contain_katalina = {

		icon = flower

		available = {
			has_idea = KAT_hmr_government
		}

		visible = {
			has_country_flag = katerintreue_govt
		}

		fire_only_once = yes

		modifier = {
			stability_weekly = 0.02
			war_support_weekly = 0.02
		}

		days_remove = 35
		
		remove_effect = {
			swap_ideas = { 
			remove_idea = KAT_hmr_government
			add_idea = KAT_hmr_stronger		
			}
		}

		cost = 150

		ai_will_do = {
			factor = 800
		}
	}
	
	KAT_agrarian_reforms = {

		icon = flower
		
		available = {
			has_idea = KAT_hmr_stronger
		}

		visible = {
			has_country_flag = katerintreue_govt
		}

		fire_only_once = yes

		modifier = {
			political_power_gain = -0.75
		}

		days_remove = 35
		
		remove_effect = {
			swap_ideas = { 
			remove_idea = KAT_katerintreue_welfare
			add_idea = KAT_agri_welfare	
			}
			add_stability = 0.15
			add_popularity = { ideology = fascism popularity = -0.1 }
		}

		cost = 150

		ai_will_do = {
			factor = 800
		}
	}
	
	KAT_develop_aluminium_i = { #554

		icon = aluminium

		highlight_states = {
			state = 554
		}
		available = {
			num_of_civilian_factories_available_for_projects > 1
		}
		visible = {
			has_country_flag = katerintreue_govt
			554 = {
				is_owned_and_controlled_by = ROOT
				NOT = {
					has_state_flag = KAT_alu_found
				}
			}
		}

		fire_only_once = yes

		cost = 35
		days_remove = 50

		modifier = {
			civilian_factory_use = 2
		}

		ai_will_do = {
			factor = 800
		}
		remove_effect = {
			554 = { set_state_flag = KAT_alu_found }
			554 = {
				add_resource = {
					type = aluminium
					amount = 12
				}
			}
		}
	}
	
	KAT_develop_tungsten_i = { #423

		icon = tungsten

		highlight_states = {
			state = 423
		}
		available = {
			num_of_civilian_factories_available_for_projects > 1
		}
		visible = {
			has_country_flag = katerintreue_govt
			423 = {
				is_owned_and_controlled_by = ROOT
				NOT = {
					has_state_flag = KAT_tung_found
				}
			}
		}

		fire_only_once = yes

		cost = 35
		days_remove = 50

		modifier = {
			civilian_factory_use = 2
		}

		ai_will_do = {
			factor = 800
		}
		remove_effect = {
			423 = { set_state_flag = KAT_tung_found }
			423 = {
				add_resource = {
					type = tungsten
					amount = 15
				}
			}
		}
	}

}

KAT_royal_army = {
	KAT_katerinburg_crackdown = {

		icon = flower

		visible = {
			has_country_flag = katerintreue_army
		}

		fire_only_once = yes

		modifier = {
			stability_weekly = 0.025
			political_power_gain = -0.25
			war_support_weekly = 0.03
		}

		days_remove = 21

		cost = 75

		remove_effect = {
			swap_ideas = { 
			remove_idea = KAT_protests
			add_idea = KAT_police_state		
			}
		}

		ai_will_do = {
			factor = 800
		}
	}
	
	KAT_develop_aluminium_ii = { #554

		icon = aluminium

		highlight_states = {
			state = 554
		}
		available = {
			num_of_civilian_factories_available_for_projects > 1
		}
		visible = {
			has_country_flag = katerintreue_army
			554 = {
				is_owned_and_controlled_by = ROOT
				NOT = {
					has_state_flag = KAT_alu_found
				}
			}
		}

		fire_only_once = yes

		cost = 35
		days_remove = 50

		modifier = {
			civilian_factory_use = 2
		}

		ai_will_do = {
			factor = 800
		}
		remove_effect = {
			554 = { set_state_flag = KAT_alu_found }
			554 = {
				add_resource = {
					type = aluminium
					amount = 12
				}
			}
		}
	}
	
	KAT_develop_tungsten_ii = { #423

		icon = tungsten

		highlight_states = {
			state = 423
		}
		available = {
			num_of_civilian_factories_available_for_projects > 1
		}
		visible = {
			has_country_flag = katerintreue_army
			423 = {
				is_owned_and_controlled_by = ROOT
				NOT = {
					has_state_flag = KAT_tung_found
				}
			}
		}

		fire_only_once = yes

		cost = 35
		days_remove = 50

		modifier = {
			civilian_factory_use = 2
		}

		ai_will_do = {
			factor = 800
		}
		remove_effect = {
			423 = { set_state_flag = KAT_tung_found }
			423 = {
				add_resource = {
					type = tungsten
					amount = 15
				}
			}
		}
	}

}

KAT_fighting_the_cult = {
	KAT_destroy_plagued_grain = { #good way to fight the plague for cheap

		icon = flower

		visible = {
			has_country_flag = KAT_knight_resistance_flag
		}

		available = {
			has_country_flag = {
				flag = plague_level
				value > 14
			}
		}

		modifier = {
			political_power_gain = -0.25
		}

		days_remove = 21
		days_re_enable = 42

		cost = 75

		remove_effect = {
			#tooltip about fighting the plague
			hidden_effect = {
				modify_country_flag = { flag = plague_level value = -3 }
			}
		}

		ai_will_do = {
			factor = 30
		}
	}
	
	KAT_break_cult_propaganda = { #if you don't reign them in they will kill you

		icon = flower

		visible = {
			has_country_flag = KAT_knight_resistance_flag
			OR = {
				has_idea = KAT_cult_power1
				has_idea = KAT_cult_power2
			}
		}
		
		modifier = {
			political_power_gain = -0.5
			democratic_drift = 0.02
			neutrality_drift = 0.03
		}

		days_remove = 70
		days_re_enable = 70

		cost = 150

		remove_effect = {
			if = { #hold them back
				limit = {
					has_idea = KAT_cult_power1
				}
				swap_ideas = { 
					remove_idea = KAT_cult_power1
					add_idea = KAT_cult_power	
				}
			}
			if = { #your last chance
				limit = {
					has_idea = KAT_cult_power2
				}
				swap_ideas = { 
					remove_idea = KAT_cult_power2
					add_idea = KAT_cult_power1	
				}
			}
		}

		ai_will_do = {
			factor = 400
		}
	}
	
	#cult purging must wait for end of tree
	
	KAT_cult_rising = {
		icon = revolt
		activation = {
			OR = {
				has_idea = KAT_cult_power
				has_idea = KAT_cult_power1
			}
		}
		available = {
			has_country_flag = KAT_knight_resistance_flag
			NOT = {
				OR = {
					has_idea = KAT_cult_power
					has_idea = KAT_cult_power1
				}
			}
		}
		days_mission_timeout = 91
		timeout_effect = {
			if = { #from the shadows
				limit = {
					has_idea = KAT_cult_power
				}
				swap_ideas = { 
					remove_idea = KAT_cult_power
					add_idea = KAT_cult_power1	
				}
			}
			if = { #we rise
				limit = {
					has_idea = KAT_cult_power1
				}
				swap_ideas = { 
					remove_idea = KAT_cult_power1
					add_idea = KAT_cult_power2	
				}
			}
		}
	}
	
	KAT_cult_coup = {
		icon = revolt
		activation = {
			has_idea = KAT_cult_power2
		}
		available = {
			has_country_flag = KAT_knight_resistance_flag
			NOT = {
				has_idea = KAT_cult_power2
			}
		}
		days_mission_timeout = 147
		timeout_effect = {
			add_stability = -0.15
			add_war_support = -0.15
			add_political_power = -100
			
			hidden_effect = {
				remove_ideas = KAT_cult_power2
				clr_country_flag = KAT_knight_resistance_flag
				set_country_flag = KAT_cult_victory_flag
				load_focus_tree = KAT_cult_victory
				add_popularity = {
					ideology = communism
					popularity = 0.2
				}
				set_politics = { ruling_party = communism elections_allowed = no }
			}
		}
	}

}
