KAT_katerintreue_reforms = {
	KAT_develop_aluminium = { #554

		icon = aluminium

		highlight_states = {
			state = 554
		}
		available = {
			num_of_civilian_factories_available_for_projects > 1
		}
		visible = {
			has_country_flag = katerintreue_econ
			554 = {
				is_owned_and_controlled_by = ROOT
				NOT = {
					has_state_flag = KAT_alu_found
				}
			}
		}

		fire_only_once = yes

		cost = 35
		days_remove = 50

		modifier = {
			civilian_factory_use = 2
		}

		ai_will_do = {
			factor = 800
		}
		remove_effect = {
			554 = { set_state_flag = KAT_alu_found }
			554 = {
				add_resource = {
					type = aluminium
					amount = 12
				}
			}
		}
	}
	
	KAT_develop_tungsten = { #423

		icon = tungsten

		highlight_states = {
			state = 423
		}
		available = {
			num_of_civilian_factories_available_for_projects > 1
		}
		visible = {
			has_country_flag = katerintreue_econ
			423 = {
				is_owned_and_controlled_by = ROOT
				NOT = {
					has_state_flag = KAT_tung_found
				}
			}
		}

		fire_only_once = yes

		cost = 35
		days_remove = 50

		modifier = {
			civilian_factory_use = 2
		}

		ai_will_do = {
			factor = 800
		}
		remove_effect = {
			423 = { set_state_flag = KAT_tung_found }
			423 = {
				add_resource = {
					type = tungsten
					amount = 15
				}
			}
		}
	}
	
	KAT_expand_party = {

		icon = flower

		available = {
			has_completed_focus = KAT_assign_yesmen
		}

		visible = {
			has_country_flag = katerintreue_reforms
		}

		fire_only_once = yes

		modifier = {
			stability_weekly = 0.05
			political_power_gain = -0.5
			fascism_drift = 0.02
		}

		days_remove = 35
		
		remove_effect = {
			country_event = katerin.28
		}

		cost = 35

		ai_will_do = {
			factor = 800
		}
	}
	
	
	
	KAT_curtail_excess = {

		icon = generic_construction

		available = {
			has_completed_focus = KAT_legalize_banditry
		}

		visible = {
			has_country_flag = katerintreue_reforms
		}

		modifier = {
			war_support_weekly = -0.02
		}

		fire_only_once = yes
		
		remove_effect = {
			add_political_power = 150
			add_stability = 0.03
			add_manpower = -500
		}

		cost = 25
		days_remove = 35

		ai_will_do = {
			factor = 800
		}
	}
	
	KAT_dont_let_in_randos = {

		icon = generic_construction

		available = {
			has_completed_focus = KAT_peasant_yesmen
		}

		visible = {
			has_country_flag = katerintreue_reforms
		}

		modifier = {
			political_power_gain = -0.25
		}

		fire_only_once = yes
		
		remove_effect = {
			add_political_power = 90
			add_stability = 0.05
			add_popularity = { ideology = fascism popularity = 0.03 }
		}

		cost = 20
		days_remove = 25

		ai_will_do = {
			factor = 800
		}
	}
	
	KAT_make_good_on_bribes = {

		icon = generic_construction

		available = {
			has_completed_focus = KAT_bribe_those_with_power
		}

		visible = {
			has_country_flag = katerintreue_reforms
		}

		modifier = {
			consumer_goods_factor = -0.1
		}

		fire_only_once = yes
		
		remove_effect = {
			add_popularity = { ideology = fascism popularity = 0.08 }
		}

		cost = 75
		days_remove = 40

		ai_will_do = {
			factor = 800
		}
	}
	
	KAT_reconcile_knights = {

		icon = flower

		available = {
			has_completed_focus = KAT_a_test
		}

		visible = {
			has_country_flag = katerintreue_reforms
		}

		fire_only_once = yes

		modifier = {
			stability_weekly = 0.01
			political_power_gain = -0.05
			fascism_drift = -0.01
		}

		days_remove = 70

		cost = 100

		remove_effect = {
			random_owned_state = {
				limit = {
					is_controlled_by = ROOT
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_state = {
				limit = {
					is_controlled_by = ROOT
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}

		ai_will_do = {
			factor = 800
		}
	}
	
	KAT_ensure_control = {

		icon = flower

		available = {
			has_completed_focus = KAT_ganger_armies
		}

		visible = {
			has_country_flag = katerintreue_reforms
		}

		fire_only_once = yes

		modifier = {
			war_support_weekly = 0.01
			army_attack_factor = -0.05
			industrial_capacity_factory = -0.02
		}

		days_remove = 35

		cost = 50

		remove_effect = {
			add_political_power = 100
			add_popularity = { ideology = fascism popularity = 0.07 }
		}

		ai_will_do = {
			factor = 800
		}
	}
	
	KAT_moderates_and_merit = {

		icon = flower

		available = {
			has_completed_focus = KAT_clean_house
		}

		visible = {
			has_country_flag = katerintreue_reforms
		}

		fire_only_once = yes

		modifier = {
			political_power_gain = -0.05
			democratic_drift = 0.01
			neutrality_drift = 0.01
		}

		days_remove = 56

		cost = 50

		remove_effect = {
			add_stability = 0.25
			add_political_power = 150
		}

		ai_will_do = {
			factor = 800
		}
	}
	
	KAT_consolidate_sharecroppers = { 

		icon = generic_construction

		available = {
			has_completed_focus = KAT_serfs_clear_marshes
		}

		visible = {
			has_country_flag = katerintreue_reforms
		}

		modifier = {
			stability_weekly = -0.05
			political_power_gain = -0.35
		}

		fire_only_once = yes

		remove_effect = {
			random_owned_state = {
				limit = {
					is_controlled_by = ROOT
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
		
		complete_effect = {
			country_event = { id = katerin.27 days = 5 }
		}

		cost = 25
		days_remove = 35

		ai_will_do = {
			factor = 800
		}
	}
	
	KAT_urbanize_katerinburg = {

		icon = generic_construction

		available = {
			has_country_flag = KAT_city_folk
			has_tech = basic_machine_tools
			num_of_civilian_factories_available_for_projects > 0
		}

		visible = {
			has_country_flag = katerintreue_reforms
		}

		modifier = {
			civilian_factory_use = 1
		}

		fire_only_once = yes

		remove_effect = {
			423 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}

		cost = 80
		days_remove = 49

		ai_will_do = {
			factor = 800
		}
	}
	
	KAT_military_industry = {

		icon = flower

		visible = {
			has_country_flag = katerintreue_reforms
		}
		
		available = {
			num_of_civilian_factories_available_for_projects > 0
			has_completed_focus = KAT_stahlfabrik_katerinburg
		}

		fire_only_once = yes

		modifier = {
			civilian_factory_use = 2
		}

		days_remove = 35

		cost = 125

		remove_effect = {
			423 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			554 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}

		ai_will_do = {
			factor = 800
		}
	}
	
	KAT_arm_the_soldiers_desc = {

		icon = flower

		visible = {
			has_country_flag = katerintreue_reforms
		}
		
		available = {
			has_tech = infantry_weapons
			has_completed_focus = KAT_furstentumwerke_katalina
		}

		fire_only_once = yes

		modifier = {
			research_speed_factor = -0.05
		}

		days_remove = 50

		cost = 80

		remove_effect = {
			add_equipment_to_stockpile = {
				type = infantry_equipment_0
				amount = 10000
				producer = KAT
			}
			add_tech_bonus = {
				bonus = 0.5
				uses = 1
				category = infantry_weapons
			}
		}

		ai_will_do = {
			factor = 800
		}
	}
	
	KAT_rail_barons = {

		icon = generic_construction

		available = {
			num_of_civilian_factories_available_for_projects > 1
			has_completed_focus = KAT_link_einfoort
			has_idea = KAT_katerintreue_propaganda
		}

		visible = {
			has_country_flag = katerintreue_reforms
		}

		modifier = {
			civilian_factory_use = 2
		}

		fire_only_once = yes

		remove_effect = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			
			swap_ideas = {
			remove_idea = KAT_katerintreue_propaganda
			add_idea = KAT_katerintreue_work_group
		}
			
		}

		cost = 60
		days_remove = 56

		ai_will_do = {
			factor = 800
		}
	}
	
	KAT_econ_plan_complete = {

		icon = generic_construction

		available = {
			has_idea = KAT_katerintreue_work_group
			has_completed_focus = KAT_steam_pump_land_reclaimation
			num_of_civilian_factories_available_for_projects > 2
		}

		visible = {
			has_country_flag = katerintreue_reforms
		}

		modifier = {
			civilian_factory_use = 3
		}

		fire_only_once = yes

		remove_effect = {
			add_stability = 0.1
			increase_society_development_gradual = yes
			swap_ideas = { 
			remove_idea = KAT_katerintreue_work_group
			add_idea = 	KAT_katerintreue_industrialists	
			}
		}

		cost = 150
		days_remove = 100

		ai_will_do = {
			factor = 800
		}
	}
	
	KAT_finalize_government = {

		icon = flower
		
		available = {
			has_completed_focus = KAT_depose_katalina
		}

		visible = {
			has_country_flag = katerintreue_reforms
		}

		fire_only_once = yes

		modifier = {
			political_power_gain = -0.25
			stability_weekly = -0.01
		}

		days_remove = 70
		
		remove_effect = {
			add_ideas = KAT_katerintreue_regency	
			add_political_power = 50
		}

		cost = 100

		ai_will_do = {
			factor = 800
		}
	}
	
}

KAT_fighting_the_cult = {
	KAT_destroy_plagued_grain = { #good way to fight the plague for cheap

		icon = flower

		visible = {
			has_country_flag = KAT_knight_resistance_flag
		}

		available = {
			has_country_flag = {
				flag = plague_level
				value > 14
			}
		}

		modifier = {
			political_power_gain = -0.25
		}

		days_remove = 21
		days_re_enable = 42

		cost = 75

		remove_effect = {
			#tooltip about fighting the plague
			hidden_effect = {
				modify_country_flag = { flag = plague_level value = -3 }
			}
		}

		ai_will_do = {
			factor = 30
		}
	}
	
	KAT_break_cult_propaganda = { #if you don't reign them in they will kill you

		icon = flower

		visible = {
			has_country_flag = KAT_knight_resistance_flag
			OR = {
				has_idea = KAT_cult_power1
				has_idea = KAT_cult_power2
			}
		}
		
		modifier = {
			political_power_gain = -0.5
			democratic_drift = 0.02
			neutrality_drift = 0.03
		}

		days_remove = 70
		days_re_enable = 70

		cost = 150

		remove_effect = {
			if = { #hold them back
				limit = {
					has_idea = KAT_cult_power1
				}
				swap_ideas = { 
					remove_idea = KAT_cult_power1
					add_idea = KAT_cult_power	
				}
			}
			if = { #your last chance
				limit = {
					has_idea = KAT_cult_power2
				}
				swap_ideas = { 
					remove_idea = KAT_cult_power2
					add_idea = KAT_cult_power1	
				}
			}
		}

		ai_will_do = {
			factor = 400
		}
	}
	
	#cult purging must wait for end of tree
	
	KAT_cult_rising = {
		icon = revolt
		activation = {
			OR = {
				has_idea = KAT_cult_power
				has_idea = KAT_cult_power1
			}
		}
		available = {
			has_country_flag = KAT_knight_resistance_flag
			NOT = {
				OR = {
					has_idea = KAT_cult_power
					has_idea = KAT_cult_power1
				}
			}
		}
		is_good = no
		days_mission_timeout = 91
		timeout_effect = {
			if = { #from the shadows
				limit = {
					has_idea = KAT_cult_power
				}
				swap_ideas = { 
					remove_idea = KAT_cult_power
					add_idea = KAT_cult_power1	
				}
			}
			if = { #we rise
				limit = {
					has_idea = KAT_cult_power1
				}
				swap_ideas = { 
					remove_idea = KAT_cult_power1
					add_idea = KAT_cult_power2	
				}
			}
		}
	}
	
	KAT_cult_coup = {
		icon = revolt
		activation = {
			has_idea = KAT_cult_power2
		}
		available = {
			has_country_flag = KAT_knight_resistance_flag
			NOT = {
				has_idea = KAT_cult_power2
			}
		}
		days_mission_timeout = 147
		timeout_effect = {
			add_stability = -0.15
			add_war_support = -0.15
			add_political_power = -100
			
			hidden_effect = {
				remove_ideas = KAT_cult_power2
				clr_country_flag = KAT_knight_resistance_flag
				set_country_flag = KAT_cult_victory_flag
				load_focus_tree = KAT_cult_victory
				add_popularity = {
					ideology = communism
					popularity = 0.2
				}
				set_politics = { ruling_party = communism elections_allowed = no }
			}
		}
	}

}
