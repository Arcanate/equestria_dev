
# Priorities sorting
@tiger_syndicate = 5
@zaga_brothers = 4
@zapsa_syndicate = 3
@zurumilki = 2
@abizaal_syndicate = 1

TRO_CTH_drugs_deccat = {
	TRO_CTH_demands = {
		icon = GFX_decision_eng_trade_unions_support
		allowed = { original_tag = TRO }
		visible = {
			OR = {
				has_active_mission = TRO_CTH_ZB_colthaginian_civic_religion
			}
		}
		available = {
			hidden_trigger = {
				always = no
			}
		}
		priority = 6
	}
	# Demands
	TRO_CTH_ZB_colthaginian_civic_religion = {
		allowed = { original_tag = TRO }
		activation = { always = no }
		available = {
			has_country_flag = TRO_CTH_b22_done
		}
		is_good = no
		selectable_mission = no
		days_mission_timeout = 150
		priority = @zaga_brothers
		timeout_effect = {
			set_temp_variable = { temp_idx = 1 }
			set_temp_variable = { temp_p_change = 5 }
			set_temp_variable = { temp_r_change = 10 }
			TRO_drugs_friendly_variables_change = yes
		}
		complete_effect = {
			set_temp_variable = { temp_idx = 1 }
			set_temp_variable = { temp_p_change = -2.5 }
			set_temp_variable = { temp_r_change = -7.5 }
			TRO_drugs_friendly_variables_change = yes
		}
	}
}

TRO_CTH_the_great_game = {
    TRO_CTH_ignore_north_zebrica = {
		icon = eng_trade_unions_support
		available = {
		    NOT = {
			    has_country_flag = TRO_CTH_already_negotiating
			}
		}
		visible = {
			has_completed_focus = TRO_CTH_e5
			OR = {
				NOT = {
			    	has_country_flag = TRO_CTH_decided_upon_north_zebrica
				}
				BAT = {
				    has_country_flag = BAT_HIP_defeated
				}
			}
		}
		ai_will_do = {
			factor = 0
		}

		cost = 0
		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision TRO_CTH_ignore_north_zebrica"
			if = {
			    limit = {
				    HIP = {
					    NOT = {
						    has_government = neutrality
						}
					}
					BAT = {
					    has_country_leader = { 
		                    character = BAT_ocean_spray
			                ruling_only = yes
		                }
					}
				}
				custom_effect_tooltip = TRO_CTH_gain_5_points_tp
				add_to_variable = { 
					var = TRO_CTH_geopolitics_points
                	value = 5				
				}
			}
			else_if = {
			    limit = {
				    OR = {
				        HIP = {
					        NOT = {
						        has_government = neutrality
						    }
					    }
					    BAT = {
					        has_country_leader = { 
		                        character = BAT_ocean_spray
			                    ruling_only = yes
		                    }
					    }
					}
				}
				custom_effect_tooltip = TRO_CTH_gain_10_points_tp
			    add_to_variable = { 
					var = TRO_CTH_geopolitics_points
                	value = 10
				}
			}
			else = {
			    custom_effect_tooltip = TRO_CTH_gain_15_points_tp
			    add_to_variable = { 
					var = TRO_CTH_geopolitics_points
                	value = 15
				}
			}
			hidden_effect = {
			    set_country_flag = TRO_CTH_decided_upon_north_zebrica
			}
		}
	}
	
	TRO_CTH_negotiate_with_hippogriffia = {
		icon = eng_trade_unions_support
		available = {
		    NOT = {
			    has_country_flag = TRO_CTH_already_negotiating
			}
		}
		visible = {
			has_completed_focus = TRO_CTH_e5
			HIP = {
				has_government = neutrality
			}
			NOT = {
			    has_country_flag = TRO_CTH_decided_upon_north_zebrica
				BAT = {
				    has_country_flag = BAT_HIP_defeated
				}
			}
		}
		ai_will_do = {
			factor = 10
		}

		cost = 0
		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision TRO_CTH_negotiate_with_hippogriffia"
			country_event = {
				id = trotkart_colthage.50
			}
			hidden_effect = {
			    set_country_flag = TRO_CTH_already_negotiating
			}
		}
	}
	
	TRO_CTH_negotiate_with_chiropterra = {
		icon = eng_trade_unions_support
		available = {
		    NOT = {
			    has_country_flag = TRO_CTH_already_negotiating
			}
		}
		visible = {
			has_completed_focus = TRO_CTH_e5
			BAT = {
			    NOT = {
					has_country_leader = { 
		                character = BAT_ocean_spray
			            ruling_only = yes
		            }
				}
			}
			NOT = {
			    has_country_flag = TRO_CTH_decided_upon_north_zebrica
				BAT = {
				    has_country_flag = BAT_HIP_defeated
				}
			}
		}
		ai_will_do = {
			factor = 10
		}

		cost = 0
		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision TRO_CTH_negotiate_with_chiropterra"
			country_event = {
				id = trotkart_colthage.59
			}
			hidden_effect = {
			    set_country_flag = TRO_CTH_already_negotiating
			}
		}
	}
	
    TRO_CTH_fight_communism = {
		icon = hol_war_on_pacifism
		available = {
			is_subject = no
			NOT = {
			    has_country_flag = TRO_CTH_preparing_an_attack
			}
		}
		targets = { 
			MIT SIC CYA FAL WNG HIN CTL MCW HRV
		}
		target_trigger = {
			FROM = {  
			    OR = {
			        original_tag = MIT
					original_tag = SIC
					original_tag = CYA
					original_tag = FAL
					original_tag = WNG
					original_tag = HIN
					original_tag = CTL
					original_tag = MCW
					original_tag = HRV
				}
			}
		}
		targets_dynamic = yes
		target_root_trigger = {
		    has_completed_focus = TRO_CTH_e7
		}
		visible = {
		    has_completed_focus = TRO_CTH_e7
			FROM = {
				exists = yes
				NOT = {
					is_subject_of = ROOT
				}
				has_government = communism
				NOT = {
				    is_in_faction_with = ROOT
				}
				NOT = { 
				    has_war_with = ROOT 
				}
			}
		}
		cancel_trigger = {
			OR = {
				is_subject = yes
				FROM = {
					OR = {
						exists = no
						is_subject_of = ROOT
						has_war_with = ROOT
						is_in_faction_with = ROOT
					}
					NOT = {
					    has_government = communism
					}
				}
			}
		}
		cancel_effect = {
		    hidden_effect = {
			    clr_country_flag = TRO_CTH_preparing_an_attack
			}
		}
		
		cost = 75
		fire_only_once = yes
		
		days_remove = 30
		war_with_target_on_remove = yes
		
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				has_war = yes
			}
		}
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision TRO_CTH_fight_communism_and_kasa target: [From.GetName]"
			FROM = {
                add_ai_strategy = {
                    type = prepare_for_war
                    id = ROOT
                    value = 1000
                }
            }
			hidden_effect = {
			    set_country_flag = TRO_CTH_preparing_an_attack
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove TRO_CTH_fight_communism_and_kasa target: [From.GetName]"
			FROM = {
                add_ai_strategy = {
                    type = prepare_for_war
                    id = ROOT
                    value = -1000
                }
            }
			declare_war_on = {
                target = FROM
                type = annex_everything
            }
			hidden_effect = {
			    clr_country_flag = TRO_CTH_preparing_an_attack
				create_wargoal = { 
					type = annex_everything 
					target = FROM
				}
				if = {
				    limit = {
					    FROM = {
						    is_ai = no
						}
					}
					country_event = { 
						id = trotkart_colthage.50
					}
				} 
			}
		}
	}
	
	TRO_CTH_fight_communism_2 = {
		icon = hol_war_on_pacifism
		available = {
			is_subject = no
			NOT = {
			    has_country_flag = TRO_CTH_preparing_an_attack
			}
		}
		targets = { 
			ZES
		}
		target_trigger = {
			FROM = {  
			    OR = {
			        original_tag = ZES
				}
			}
		}
		targets_dynamic = yes
		target_root_trigger = {
		    has_completed_focus = TRO_CTH_e7
		}
		visible = {
		    has_completed_focus = TRO_CTH_e7
			FROM = {
				exists = yes
				NOT = {
					is_subject_of = ROOT
				}
				OR = {
					has_government = communism
					has_government = democratic
				}
				NOT = {
				    is_in_faction_with = ROOT
				}
				NOT = { 
				    has_war_with = ROOT 
				}
			}
		}
		cancel_trigger = {
			OR = {
				is_subject = yes
				FROM = {
					OR = {
						exists = no
						is_subject_of = ROOT
						has_war_with = ROOT
						is_in_faction_with = ROOT
					}
					NOT = {
					    OR = {
					        has_government = communism
							has_government = democratic
						}
					}
				}
			}
		}
		cancel_effect = {
		    hidden_effect = {
			    clr_country_flag = TRO_CTH_preparing_an_attack
			}
		}
		
		cost = 75
		fire_only_once = yes
		
		days_remove = 30
		war_with_target_on_remove = yes
		
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				has_war = yes
			}
		}
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision TRO_CTH_fight_communism_and_kasa target: [From.GetName]"
			FROM = {
                add_ai_strategy = {
                    type = prepare_for_war
                    id = ROOT
                    value = 1000
                }
            }
			hidden_effect = {
			    set_country_flag = TRO_CTH_preparing_an_attack
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove TRO_CTH_fight_communism_and_kasa target: [From.GetName]"
			FROM = {
                add_ai_strategy = {
                    type = prepare_for_war
                    id = ROOT
                    value = -1000
                }
            }
			declare_war_on = {
                target = FROM
                type = annex_everything
            }
			hidden_effect = {
			    clr_country_flag = TRO_CTH_preparing_an_attack
				create_wargoal = { 
					type = annex_everything 
					target = FROM
				}
				if = {
				    limit = {
					    FROM = {
						    is_ai = no
						}
					}
					country_event = { 
						id = trotkart_colthage.50
					}
				} 
			}
		}
	}
}