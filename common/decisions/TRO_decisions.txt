
# Priorities sorting
@tiger_syndicate = 5
@zaga_brothers = 4
@zapsa_syndicate = 3
@zurumilki = 2
@abizaal_syndicate = 1

TRO_CTH_drugs_deccat = {
	
	### DECISIONS AGAINST ENEMY ###
	TRO_CTH_begin_operation_against_cartel = {
		allowed = { original_tag = TRO }
		visible = {
			NOT = { check_variable = { TRO_enacting_operation_against = selected_cartel } }
			check_variable = { selected_cartel_action_option = 2 }
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = TRO_CTH_begin_operation_against_cartel_trigger
				NOT = { has_variable = TRO_enacting_operation_against }
			}
		}
		cost = 50
		days_remove = 40
		remove_effect = {
			custom_effect_tooltip = TRO_CTH_begin_operation_against_cartel_tt
			set_variable = { TRO_enacting_operation_against = selected_cartel }
		}
	}
	TRO_CTH_operation_appease_cartel = {
		icon = GFX_decision_megaphone
		allowed = { original_tag = TRO }
		visible = {
			has_variable = TRO_enacting_operation_against
			check_variable = { TRO_enacting_operation_against = selected_cartel }
			NOT = { has_country_flag = TRO_CTH_operation_appease_cartel_DONE }
		}
		available = {
			NOT = { has_country_flag = TRO_doing_operation_decision }
		}
		cost = 30
		days_remove = 30
		complete_effect = {
			set_country_flag = TRO_doing_operation_decision
		}
		modifier = {
			political_power_gain = -0.1
		}
		remove_effect = {
			clr_country_flag = TRO_doing_operation_decision
			set_country_flag = TRO_CTH_operation_appease_cartel_DONE
			add_stability = -0.05
			
			set_temp_variable = { temp_idx = selected_cartel }
			set_temp_variable = { temp_i_change = 2.5 }
			set_temp_variable = { temp_a_change = -5.25 }
			TRO_drugs_enemy_variables_change = yes
			
			TRO_drugs_check_for_completing_generic_enemy = yes
		}
	}
	TRO_CTH_operation_investigate_cartel_officials = {
		icon = GFX_decision_handcuffs
		allowed = { original_tag = TRO }
		visible = {
			has_variable = TRO_enacting_operation_against
			check_variable = { TRO_enacting_operation_against = selected_cartel }
			NOT = { has_country_flag = TRO_CTH_operation_investigate_cartel_officials_DONE }
		}
		available = {
			NOT = { has_country_flag = TRO_doing_operation_decision }
		}
		cost = 45
		days_remove = 30
		complete_effect = {
			set_country_flag = TRO_doing_operation_decision
		}
		modifier = {
			stability_weekly = -0.002
		}
		remove_effect = {
			clr_country_flag = TRO_doing_operation_decision
			set_country_flag = TRO_CTH_operation_investigate_cartel_officials_DONE
			
			set_temp_variable = { temp_idx = selected_cartel }
			set_temp_variable = { temp_i_change = -3.5 }
			set_temp_variable = { temp_a_change = 2 }
			TRO_drugs_enemy_variables_change = yes
			
			TRO_drugs_check_for_completing_generic_enemy = yes
		}
	}
	TRO_CTH_operation_carry_out_small_raids = {
		icon = GFX_decision_daggers
		allowed = { original_tag = TRO }
		visible = {
			has_variable = TRO_enacting_operation_against
			check_variable = { TRO_enacting_operation_against = selected_cartel }
			NOT = { has_country_flag = TRO_CTH_operation_carry_out_small_raids_DONE }
		}
		available = {
			NOT = { has_country_flag = TRO_doing_operation_decision }
		}
		custom_cost_trigger = {
			command_power > 24.99
		}
		custom_cost_text = decision_cost_CP_25
		days_remove = 45
		complete_effect = {
			hidden_effect = {
				add_command_power = -25
			}
			set_country_flag = TRO_doing_operation_decision
		}
		remove_effect = {
			clr_country_flag = TRO_doing_operation_decision
			set_country_flag = TRO_CTH_operation_carry_out_small_raids_DONE
			
			set_temp_variable = { temp_idx = selected_cartel }
			set_temp_variable = { temp_c_change = -3 }
			set_temp_variable = { temp_i_change = -1.6 }
			TRO_drugs_enemy_variables_change = yes
			
			TRO_drugs_check_for_completing_generic_enemy = yes
		}
	}
	TRO_CTH_operation_show_of_force = {
		icon = GFX_decision_rifles
		allowed = { original_tag = TRO }
		visible = {
			has_variable = TRO_enacting_operation_against
			check_variable = { TRO_enacting_operation_against = selected_cartel }
			NOT = { has_country_flag = TRO_CTH_operation_show_of_force_DONE }
		}
		available = {
			NOT = { has_country_flag = TRO_doing_operation_decision }
		}
		custom_cost_trigger = {
			has_manpower > 499
			has_political_power > 69.99 # Nice
		}
		custom_cost_text = decision_cost_pp_70_manpower_500
		days_remove = 50
		complete_effect = {
			hidden_effect = {
				add_manpower = -500
				add_political_power = -70
			}
			set_country_flag = TRO_doing_operation_decision
		}
		modifier = {
			command_power_gain = -0.25
		}
		remove_effect = {
			clr_country_flag = TRO_doing_operation_decision
			set_country_flag = TRO_CTH_operation_show_of_force_DONE

			set_temp_variable = { temp_idx = selected_cartel }
			set_temp_variable = { temp_c_change = -2.5 }
			set_temp_variable = { temp_i_change = -1.5 }
			set_temp_variable = { temp_a_change = -5 }
			TRO_drugs_enemy_variables_change = yes
			
			TRO_drugs_check_for_completing_generic_enemy = yes
		}
	}
	TRO_CTH_operation_aid_their_enemy = {
		icon = GFX_decision_scroll
		allowed = { original_tag = OMO }
		visible = {
			has_variable = TRO_enacting_operation_against
			check_variable = { TRO_enacting_operation_against = selected_cartel }
			NOT = {
				has_country_flag = TRO_CTH_operation_aid_their_enemy_DONE
				check_variable = { TRO_enacting_operation_against = 2 }
				
				set_temp_variable = { enemy = 4 }
				subtract_from_temp_variable = { enemy = TRO_enacting_operation_against }
				check_variable = { TRO_cartel_action_option^enemy = 2 }
			}
		}
		available = {
			NOT = { has_country_flag = TRO_doing_operation_decision }
		}
		custom_cost_trigger = {
			has_political_power > 14.99
			command_power > 14.99
		}
		custom_cost_text = decision_cost_CP_15_pp_15
		days_remove = 45
		complete_effect = {
			set_country_flag = TRO_doing_operation_decision
		}
		remove_effect = {
			clr_country_flag = TRO_doing_operation_decision
			set_country_flag = TRO_CTH_operation_aid_their_enemy_DONE
			
			set_temp_variable = { enemy = 4 }
			subtract_from_temp_variable = { enemy = TRO_enacting_operation_against }
			set_temp_variable = { temp_idx = enemy }
			set_temp_variable = { temp_p_change = 3 }
			set_temp_variable = { temp_r_change = 4 }
			TRO_drugs_friendly_variables_change = yes

			set_temp_variable = { temp_idx = selected_cartel }
			set_temp_variable = { temp_c_change = -3.5 }
			set_temp_variable = { temp_i_change = -4.25 }
			TRO_drugs_enemy_variables_change = yes
			
			TRO_drugs_check_for_completing_generic_enemy = yes
		}
	}
	
	### GENERAL DEMANDS ###
	TRO_CTH_build_civ_demand = {
		allowed = { original_tag = TRO }
		activation = { always = no }
		available = {
			custom_trigger_tooltip = {
				tooltip = TRO_CTH_build_civ_demand_trigger
				var:TRO_civ_demand_state = {
					check_variable = { building_level@industrial_complex = TRO.TRO_civ_demand_num }
				}
			}
		}
		is_good = no
		selectable_mission = no
		days_mission_timeout = 200
		complete_effect = {
			custom_effect_tooltip = TRO_CTH_build_civ_demand_tt
			var:TRO_civ_demand_state = {
				remove_building = {
					type = industrial_complex
					level = 1
				}
			}
			
			set_temp_variable = { temp_idx = TRO_faction_demanding_civs }
			set_temp_variable = { temp_p_change = 7.5 }
			set_temp_variable = { temp_r_change = 6 }
			TRO_drugs_friendly_variables_change = yes
			
			clear_variable = TRO_faction_demanding_civs
			clear_variable = TRO_civ_demand_state
			clear_variable = TRO_civ_demand_num
		}
		timeout_effect = {
			set_temp_variable = { temp_idx = TRO_faction_demanding_civs }
			set_temp_variable = { temp_p_change = -2.5 }
			set_temp_variable = { temp_r_change = -6 }
			TRO_drugs_friendly_variables_change = yes
			
			clear_variable = TRO_faction_demanding_civs
			clear_variable = TRO_civ_demand_state
			clear_variable = TRO_civ_demand_num
		}
	}
	TRO_CTH_build_mil_demand = {
		allowed = { original_tag = TRO }
		activation = { always = no }
		available = {
			custom_trigger_tooltip = {
				tooltip = TRO_CTH_build_mil_demand_trigger
				var:TRO_mil_demand_state = {
					check_variable = { building_level@arms_factory = TRO.TRO_mil_demand_num }
				}
			}
		}
		is_good = no
		selectable_mission = no
		days_mission_timeout = 140
		complete_effect = {
			custom_effect_tooltip = TRO_CTH_build_mil_demand_tt
			var:TRO_mil_demand_state = {
				remove_building = {
					type = arms_factory
					level = 1
				}
			}
			add_stability = -0.05
			
			set_temp_variable = { temp_idx = TRO_faction_demanding_mils }
			set_temp_variable = { temp_p_change = 10 }
			set_temp_variable = { temp_r_change = 6 }
			TRO_drugs_friendly_variables_change = yes
			
			clear_variable = TRO_faction_demanding_mils
			clear_variable = TRO_mil_demand_state
			clear_variable = TRO_mil_demand_num
		}
		timeout_effect = {
			set_temp_variable = { temp_idx = TRO_faction_demanding_mils }
			set_temp_variable = { temp_p_change = -2.5 }
			set_temp_variable = { temp_r_change = -7.5 }
			TRO_drugs_friendly_variables_change = yes
			
			clear_variable = TRO_faction_demanding_mils
			clear_variable = TRO_mil_demand_state
			clear_variable = TRO_mil_demand_num
		}
	}
	TRO_CTH_build_dock_demand = {
		allowed = { original_tag = TRO }
		activation = { always = no }
		available = {
			custom_trigger_tooltip = {
				tooltip = TRO_CTH_build_dock_demand_trigger
				var:TRO_dock_demand_state = {
					check_variable = { building_level@dockyard = TRO.TRO_dock_demand_num }
				}
			}
		}
		is_good = no
		selectable_mission = no
		days_mission_timeout = 140
		complete_effect = {
			
		}
	}
	### END GENERAL DEMANDS ###
	
	### HAPPENINGS IN THE UNDERWORLD ###
	TRO_CTH_happenings_in_the_underworld = {
		allowed = { original_tag = TRO }
		activation = { always = no }
		available = {
			hidden_trigger = {
				always = no
			}
		}
		fixed_random_seed = no
		is_good = no
		selectable_mission = no
		days_mission_timeout = 1 # 150
		timeout_effect = {
			hidden_effect = {
				# TFW can't use temp variables because random lists
				
				random_list = {
					1 = { set_variable = { concerning_faction = 0 } }
					1 = { set_variable = { concerning_faction = 1 } }
					1 = { set_variable = { concerning_faction = 2 } }
					1 = { set_variable = { concerning_faction = 3 } }
					1 = { set_variable = { concerning_faction = 4 } }
				}
				random_list = {
				
					### FRIENDLY SECTION ###
					1 = { # Demand civs
						modifier = {
							OR = {
								has_variable = TRO_faction_demanding_civs
								check_variable = { TRO_cartel_action_option^concerning_faction = 2 }
								any_owned_state = {
									check_variable = { TRO_drugs_ruling_cartel = TRO.concerning_faction }
									NOT = {
										free_building_slots = {
											building = industrial_complex
											size > 0
										}
									}
								}
							}
							factor = 0
						}
						set_variable = { TRO_faction_demanding_civs = concerning_faction }
						random_owned_state = {
							limit = {
								check_variable = { TRO_drugs_ruling_cartel = TRO.concerning_faction }
								free_building_slots = {
									building = industrial_complex
									size > 0
								}
							}
							set_variable = { TRO.TRO_civ_demand_state = THIS }
							set_variable = { TRO.TRO_civ_demand_num = building_level@industrial_complex }
						}
						add_to_variable = { TRO_civ_demand_num = 1 }
						country_event = trot_drugs_generic.1
					}
					1 = { # Demand mils
						modifier = {
							OR = {
								has_variable = TRO_faction_demanding_mils
								check_variable = { concerning_faction = 2 }
								check_variable = { TRO_cartel_action_option^concerning_faction = 2 }
								any_owned_state = {
									check_variable = { TRO_drugs_ruling_cartel = TRO.concerning_faction }
									NOT = {
										free_building_slots = {
											building = arms_factory
											size > 0
										}
									}
								}
							}
							factor = 0
						}
						set_variable = { TRO_faction_demanding_mils = concerning_faction }
						random_owned_state = {
							limit = {
								check_variable = { TRO_drugs_ruling_cartel = TRO.concerning_faction }
								free_building_slots = {
									building = arms_factory
									size > 0
								}
							}
							set_variable = { TRO.TRO_mil_demand_state = THIS }
							set_variable = { TRO.TRO_mil_demand_num = building_level@arms_factory }
						}
						add_to_variable = { TRO_mil_demand_num = 1 }
						country_event = trot_drugs_generic.2
					}
					1 = { # Demand a dockyard
						modifier = {
							OR = { 
								has_variable = TRO_faction_demanding_docks
								check_variable = { TRO_cartel_action_option^concerning_faction = 2 }
								any_owned_state = {
									check_variable = { TRO_drugs_ruling_cartel = TRO.concerning_faction }
									is_coastal = yes
									NOT = {
										free_building_slots = {
											building = dockyard
											size > 0
										}
									}
								}
							}
							factor = 0
						}
						set_variable = { TRO_faction_demanding_docks = concerning_faction }
						random_owned_state = {
							limit = {
								check_variable = { TRO_drugs_ruling_cartel = TRO.concerning_faction }
								free_building_slots = {
									building = dockyard
									size > 0
								}
							}
							set_variable = { TRO.TRO_dock_demand_state = THIS }
							set_variable = { TRO.TRO_dock_demand_num = building_level@dockyard }
						}
						add_to_variable = { TRO_dock_demand_num = 1 }
						country_event = trot_drugs_generic.3
					}
					2 = { # Demand control over infrastructure
						modifier = {
							check_variable = { TRO_cartel_action_option^concerning_faction = 2 }
							factor = 0
						}
						random_owned_state = {
							limit = {
								check_variable = { TRO_drugs_ruling_cartel = TRO.concerning_faction }
								check_variable = { building_level@infrastructure > 1 }
							}
							set_variable = { TRO.TRO_infra_demand_state = THIS }
						}
						country_event = trot_drugs_generic.4
					}
					4 = { # Shootout between cartel and police
						modifier = {
							check_variable = { TRO_cartel_action_option^concerning_faction = 2 }
							factor = 0
						}
						random_owned_state = {
							limit = {
								check_variable = { TRO_drugs_ruling_cartel = TRO.concerning_faction }
							}
							set_variable = { TRO.shootout_state = THIS }
						}
						country_event = trot_drugs_generic.5
					}
					5 = { # Relations improving
						modifier = {
							check_variable = { TRO_cartel_action_option^concerning_faction = 2 }
							factor = 0
						}
						country_event = trot_drugs_generic.6
					}
					3 = { # Raid carried out
						modifier = {
							OR = {
								check_variable = { TRO_cartel_action_option^concerning_faction = 2 }
								check_variable = { concerning_faction = 2 }
							}
							factor = 0
						}
						set_variable = { concerning_faction_2 = 4 }
						subtract_from_variable = { concerning_faction_2 = concerning_faction }
						country_event = trot_drugs_generic.7
					}
					
					### END FRIENDLY SECTION ###
					
					### ENEMY SECTION ###
					
					3 = { # Increased agression
						modifier = {
							check_variable = { TRO_drugs_enemy_aggression_status^concerning_faction < 20 }
							add = 1
						}
						modifier = {
							check_variable = { TRO_drugs_enemy_aggression_status^concerning_faction > 50 }
							add = -2
						}
						modifier = {
							check_variable = { TRO_cartel_action_option^concerning_faction = 1 }
							factor = 0
						}
						country_event = trot_drugs_generic.8
					}
					2 = { # Provocations
						modifier = {
							check_variable = { TRO_drugs_enemy_aggression_status^concerning_faction < 20 }
							add = 1
						}
						modifier = {
							check_variable = { TRO_drugs_enemy_aggression_status^concerning_faction > 50 }
							add = -2
						}
						modifier = {
							check_variable = { TRO_cartel_action_option^concerning_faction = 1 }
							factor = 0
						}
						country_event = trot_drugs_generic.9
					}
					2 = { # Faction beat their rival in a skirmish
						modifier = {
							OR = {
								check_variable = { TRO_cartel_action_option^concerning_faction = 1 }
								check_variable = { concerning_faction = 2 }
							}
							factor = 0
						}
						random_owned_state = {
							limit = {
								check_variable = { TRO_drugs_ruling_cartel = TRO.concerning_faction }
							}
							set_variable = { TRO.shootout_state = THIS }
						}
						set_variable = { concerning_faction_2 = 4 }
						subtract_from_variable = { concerning_faction_2 = concerning_faction }
						
						country_event = trot_drugs_generic.10
					}
					3 = { # Big terrorist strike
						modifier = {
							OR = {
								check_variable = { TRO_cartel_action_option^concerning_faction = 1 }
								check_variable = { TRO_drugs_enemy_aggression_status^concerning_faction < 70 }
								NOT = {
									any_owned_state = {
										check_variable = { TRO_drugs_ruling_cartel = TRO.concerning_faction }
										check_variable = { building_level@industrial_complex > 0 }
										check_variable = { building_level@infrastructure > 1 }
									}
								}
							}
							factor = 0
						}
						random_owned_state = {
							limit = {
								check_variable = { TRO_drugs_ruling_cartel = TRO.concerning_faction }
								check_variable = { building_level@industrial_complex > 0 }
								check_variable = { building_level@infrastructure > 1 }
							}
							set_variable = { TRO.shootout_state = THIS }
						}
						country_event = trot_drugs_generic.11
					}
				}
			}
			
			### REMINDER TO SELF: CLEAR TEMP VARIABLES AFTER EACH SECTION OF A RANDOM LIST ###
		}
	}
	TRO_CTH_cartel_sabotage_tick = {
		allowed = { original_tag = TRO }
		activation = { always = no }
		available = {
			hidden_trigger = {
				always = no
			}
		}
		fixed_random_seed = no
		is_good = no
		selectable_mission = no
		days_mission_timeout = 30
		timeout_effect = {
			custom_effect_tooltip = TRO_CTH_cartel_sabotage_tick_tt
			hidden_effect = {
				for_loop_effect = {
					start = 0
					end = 5
					value = v
					log = "([ROOT.GetTag]) [ROOT.GetName] Drugs sabotage tick loop value: [?v]"
					if = {
						limit = {
							check_variable = { TRO_cartel_action_option^v = 2 }
						}
						set_temp_variable = { something = TRO_drugs_enemy_aggression_status^v }
						set_temp_variable = { nothing = 100 }
						subtract_from_temp_variable = { nothing = something }
						random_list = {
							something = {
								log = "Random list check succeeds with [?something]%"
								random_owned_state = {
									limit = {
										check_variable = { TRO_drugs_ruling_cartel = v }
										OR = {
											check_variable = { building_level@arms_factory > 0 }
											check_variable = { building_level@industrial_complex > 0 }
											check_variable = { building_level@dockyard > 0 }
											check_variable = { building_level@infrastructure > 0 }
										}
									}
									
									set_temp_variable = { damage = TRO.TRO_drugs_enemy_aggression_status^v }
									multiply_temp_variable = { damage = 0.01 }
									clamp_temp_variable = { var = damage min = 0.2 max = 1 }
									
									# I am probably going to hell for these meta effects.
									
									random_list = {
										1 = {
											modifier = {
												check_variable = { building_level@arms_factory = 0 }
												factor = 0
											}
											log = "Military factory damaged in [THIS.GetName] with [?damage] value"
											meta_effect = {
												text = {
													damage_building = {
														type = arms_factory
														damage = [DAMAGE]
													}
												}
												DAMAGE = "[?damage]"
											}
										}
										1 = {
											modifier = {
												check_variable = { building_level@industrial_complex = 0 }
												factor = 0
											}
											log = "Civilian factory damaged in [THIS.GetName] with [?damage] value"
											meta_effect = {
												text = {
													damage_building = {
														type = industrial_complex
														damage = [DAMAGE]
													}
												}
												DAMAGE = "[?damage]"
											}
										}
										1 = {
											modifier = {
												check_variable = { building_level@dockyard = 0 }
												factor = 0
											}
											log = "Naval dockyard damaged in [THIS.GetName] with [?damage] value"
											meta_effect = {
												text = {
													damage_building = {
														type = dockyard
														damage = [DAMAGE]
													}
												}
												DAMAGE = "[?damage]"
											}
										}
										1 = {
											modifier = {
												check_variable = { TRO.TRO_drugs_enemy_aggression_status^v < 40 }
												add = 1
											}
											modifier = {
												OR = {
													check_variable = { building_level@infrastructure = 0 }
													check_variable = { TRO.TRO_drugs_enemy_aggression_status^v > 70 }
												}
												factor = 0
											}
											multiply_temp_variable = { damage = 2 }
											log = "Infrastructure damage in [THIS.GetName] with [?damage] value"
											meta_effect = {
												text = {
													damage_building = {
														type = infrastructure
														damage = [DAMAGE]
													}
												}
												DAMAGE = "[?damage]"
											}
										}
									}
								}
							}
							nothing = {
								log = "Random list check fails with [?nothing]%"
							}
						}
					}
				}
				activate_mission = TRO_CTH_cartel_sabotage_tick
			}
		}
	}
}

TRO_CTH_the_great_game = {
    TRO_CTH_ignore_north_zebrica = {
		icon = eng_trade_unions_support
		available = {
		    NOT = {
			    has_country_flag = TRO_CTH_already_negotiating
			}
		}
		visible = {
			has_completed_focus = TRO_CTH_e5
			OR = {
				NOT = {
			    	has_country_flag = TRO_CTH_decided_upon_north_zebrica
				}
				BAT = {
				    has_country_flag = BAT_HIP_defeated
				}
			}
		}
		ai_will_do = {
			factor = 0
		}

		cost = 0
		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision TRO_CTH_ignore_north_zebrica"
			if = {
			    limit = {
				    HIP = {
					    NOT = {
						    has_government = neutrality
						}
					}
					BAT = {
					    has_country_leader = { 
		                    character = BAT_ocean_spray
			                ruling_only = yes
		                }
					}
				}
				custom_effect_tooltip = TRO_CTH_gain_5_points_tp
				add_to_variable = { 
					var = TRO_CTH_geopolitics_points
                	value = 5				
				}
			}
			else_if = {
			    limit = {
				    OR = {
				        HIP = {
					        NOT = {
						        has_government = neutrality
						    }
					    }
					    BAT = {
					        has_country_leader = { 
		                        character = BAT_ocean_spray
			                    ruling_only = yes
		                    }
					    }
					}
				}
				custom_effect_tooltip = TRO_CTH_gain_10_points_tp
			    add_to_variable = { 
					var = TRO_CTH_geopolitics_points
                	value = 10
				}
			}
			else = {
			    custom_effect_tooltip = TRO_CTH_gain_15_points_tp
			    add_to_variable = { 
					var = TRO_CTH_geopolitics_points
                	value = 15
				}
			}
			hidden_effect = {
			    set_country_flag = TRO_CTH_decided_upon_north_zebrica
			}
		}
	}
	
	TRO_CTH_negotiate_with_hippogriffia = {
		icon = eng_trade_unions_support
		available = {
		    NOT = {
			    has_country_flag = TRO_CTH_already_negotiating
			}
		}
		visible = {
			has_completed_focus = TRO_CTH_e5
			HIP = {
				has_government = neutrality
			}
			NOT = {
			    has_country_flag = TRO_CTH_decided_upon_north_zebrica
				BAT = {
				    has_country_flag = BAT_HIP_defeated
				}
			}
		}
		ai_will_do = {
			factor = 10
		}

		cost = 0
		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision TRO_CTH_negotiate_with_hippogriffia"
			country_event = {
				id = trotkart_colthage.50
			}
			hidden_effect = {
			    set_country_flag = TRO_CTH_already_negotiating
			}
		}
	}
	
	TRO_CTH_negotiate_with_chiropterra = {
		icon = eng_trade_unions_support
		available = {
		    NOT = {
			    has_country_flag = TRO_CTH_already_negotiating
			}
		}
		visible = {
			has_completed_focus = TRO_CTH_e5
			BAT = {
			    NOT = {
					has_country_leader = { 
		                character = BAT_ocean_spray
			            ruling_only = yes
		            }
				}
			}
			NOT = {
			    has_country_flag = TRO_CTH_decided_upon_north_zebrica
				BAT = {
				    has_country_flag = BAT_HIP_defeated
				}
			}
		}
		ai_will_do = {
			factor = 10
		}

		cost = 0
		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision TRO_CTH_negotiate_with_chiropterra"
			country_event = {
				id = trotkart_colthage.59
			}
			hidden_effect = {
			    set_country_flag = TRO_CTH_already_negotiating
			}
		}
	}
	
    TRO_CTH_fight_communism = {
		icon = hol_war_on_pacifism
		available = {
			is_subject = no
			NOT = {
			    has_country_flag = TRO_CTH_preparing_an_attack
			}
		}
		targets = { 
			MIT SIC CYA FAL WNG HIN CTL MCW HRV
		}
		target_trigger = {
			FROM = {  
			    OR = {
			        original_tag = MIT
					original_tag = SIC
					original_tag = CYA
					original_tag = FAL
					original_tag = WNG
					original_tag = HIN
					original_tag = CTL
					original_tag = MCW
					original_tag = HRV
				}
			}
		}
		targets_dynamic = yes
		target_root_trigger = {
		    has_completed_focus = TRO_CTH_e7
		}
		visible = {
		    has_completed_focus = TRO_CTH_e7
			FROM = {
				exists = yes
				NOT = {
					is_subject_of = ROOT
				}
				has_government = communism
				NOT = {
				    is_in_faction_with = ROOT
				}
				NOT = { 
				    has_war_with = ROOT 
				}
			}
		}
		cancel_trigger = {
			OR = {
				is_subject = yes
				FROM = {
					OR = {
						exists = no
						is_subject_of = ROOT
						has_war_with = ROOT
						is_in_faction_with = ROOT
					}
					NOT = {
					    has_government = communism
					}
				}
			}
		}
		cancel_effect = {
		    hidden_effect = {
			    clr_country_flag = TRO_CTH_preparing_an_attack
			}
		}
		
		cost = 75
		fire_only_once = yes
		
		days_remove = 30
		war_with_target_on_remove = yes
		
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				has_war = yes
			}
		}
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision TRO_CTH_fight_communism_and_kasa target: [From.GetName]"
			FROM = {
                add_ai_strategy = {
                    type = prepare_for_war
                    id = ROOT
                    value = 1000
                }
            }
			hidden_effect = {
			    set_country_flag = TRO_CTH_preparing_an_attack
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove TRO_CTH_fight_communism_and_kasa target: [From.GetName]"
			FROM = {
                add_ai_strategy = {
                    type = prepare_for_war
                    id = ROOT
                    value = -1000
                }
            }
			declare_war_on = {
                target = FROM
                type = annex_everything
            }
			hidden_effect = {
			    clr_country_flag = TRO_CTH_preparing_an_attack
				create_wargoal = { 
					type = annex_everything 
					target = FROM
				}
				if = {
				    limit = {
					    FROM = {
						    is_ai = no
						}
					}
					country_event = { 
						id = trotkart_colthage.50
					}
				} 
			}
		}
	}
	
	TRO_CTH_fight_communism_2 = {
		icon = hol_war_on_pacifism
		available = {
			is_subject = no
			NOT = {
			    has_country_flag = TRO_CTH_preparing_an_attack
			}
		}
		targets = { 
			ZES
		}
		target_trigger = {
			FROM = {  
			    OR = {
			        original_tag = ZES
				}
			}
		}
		targets_dynamic = yes
		target_root_trigger = {
		    has_completed_focus = TRO_CTH_e7
		}
		visible = {
		    has_completed_focus = TRO_CTH_e7
			FROM = {
				exists = yes
				NOT = {
					is_subject_of = ROOT
				}
				OR = {
					has_government = communism
					has_government = democratic
				}
				NOT = {
				    is_in_faction_with = ROOT
				}
				NOT = { 
				    has_war_with = ROOT 
				}
			}
		}
		cancel_trigger = {
			OR = {
				is_subject = yes
				FROM = {
					OR = {
						exists = no
						is_subject_of = ROOT
						has_war_with = ROOT
						is_in_faction_with = ROOT
					}
					NOT = {
					    OR = {
					        has_government = communism
							has_government = democratic
						}
					}
				}
			}
		}
		cancel_effect = {
		    hidden_effect = {
			    clr_country_flag = TRO_CTH_preparing_an_attack
			}
		}
		
		cost = 75
		fire_only_once = yes
		
		days_remove = 30
		war_with_target_on_remove = yes
		
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				has_war = yes
			}
		}
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision TRO_CTH_fight_communism_and_kasa target: [From.GetName]"
			FROM = {
                add_ai_strategy = {
                    type = prepare_for_war
                    id = ROOT
                    value = 1000
                }
            }
			hidden_effect = {
			    set_country_flag = TRO_CTH_preparing_an_attack
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove TRO_CTH_fight_communism_and_kasa target: [From.GetName]"
			FROM = {
                add_ai_strategy = {
                    type = prepare_for_war
                    id = ROOT
                    value = -1000
                }
            }
			declare_war_on = {
                target = FROM
                type = annex_everything
            }
			hidden_effect = {
			    clr_country_flag = TRO_CTH_preparing_an_attack
				create_wargoal = { 
					type = annex_everything 
					target = FROM
				}
				if = {
				    limit = {
					    FROM = {
						    is_ai = no
						}
					}
					country_event = { 
						id = trotkart_colthage.50
					}
				} 
			}
		}
	}
}