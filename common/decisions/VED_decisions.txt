VED_Princess_Level_System = {
	VED_Level_Up_Combat = {
		icon = border_war

		fire_only_once = no

		cost = 50

		available = {
			check_variable = {
				var = VED_Chivalry_Points
				value = 1
				compare = greater_than_or_equals
			}
		}

		visible = {
			check_variable = {
				var = VED_Princess_Attack_Level
				value = 8
				compare = less_than_or_equals
			}
		}

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			add_to_variable = {
				var = VED_Princess_Attack_Level
				value = 1
			}
			subtract_from_variable = {
				var = VED_Chivalry_Points
				value = 1
			}
		}

	}
	VED_Level_Up_Statecraft = {
		icon = border_war

		fire_only_once = no

		cost = 50

		available = {
			check_variable = {
				var = VED_Chivalry_Points
				value = 1
				compare = greater_than_or_equals
			}
		}

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			add_to_variable = {
				var = VED_Princess_Statecraft_Level
				value = 1
			}
			subtract_from_variable = {
				var = VED_Chivalry_Points
				value = 1
			}
		}

	}
	VED_Level_Up_Statecraft = {
		icon = border_war

		fire_only_once = no

		cost = 50

		available = {
			check_variable = {
				var = VED_Chivalry_Points
				value = 1
				compare = greater_than_or_equals
			}
		}

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			add_to_variable = {
				var = VED_Princess_Statecraft_Level
				value = 1
			}
			subtract_from_variable = {
				var = VED_Chivalry_Points
				value = 1
			}
		}

	}
	VED_Learn_From_Poisoner = {
		icon = border_war

		fire_only_once = no

		cost = 50

		available = {
			check_variable = {
				var = VED_Chivalry_Points
				value = 1
				compare = greater_than_or_equals
			}

		}

		visible = {
			has_country_flag = VED_Poisoner
			NOT = {
				has_country_flag = VED_Poisoner_Trait_Flag
			}
		}

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			set_country_flag = VED_Poisoner_Trait_Flag
			subtract_from_variable = {
				var = VED_Chivalry_Points
				value = 1
			}
		}

	}
	VED_Learn_From_Artillery = {
		icon = border_war

		fire_only_once = no

		cost = 50

		available = {
			check_variable = {
				var = VED_Chivalry_Points
				value = 1
				compare = greater_than_or_equals
			}

		}

		visible = {
			has_country_flag = VED_Artillery
			NOT = {
				has_country_flag = VED_Artillery_Trait_Flag
			}
		}

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			set_country_flag = VED_Artillery_Trait_Flag
			subtract_from_variable = {
				var = VED_Chivalry_Points
				value = 1
			}
		}

	}
	VED_Learn_From_Trickery = {
		icon = border_war

		fire_only_once = no

		cost = 50

		available = {
			check_variable = {
				var = VED_Chivalry_Points
				value = 1
				compare = greater_than_or_equals
			}

		}

		visible = {
			has_country_flag = VED_Trickery
			NOT = {
				has_country_flag = VED_Trickery_Trait_Flag
			}
		}

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			set_country_flag = VED_Trickery_Trait_Flag
			subtract_from_variable = {
				var = VED_Chivalry_Points
				value = 1
			}
		}

	}
	VED_Learn_From_No_Charity = {
		icon = border_war

		fire_only_once = no

		cost = 50

		available = {
			check_variable = {
				var = VED_Chivalry_Points
				value = 1
				compare = greater_than_or_equals
			}

		}

		visible = {
			has_country_flag = VED_Strength
			NOT = {
				has_country_flag = VED_Cold_Trait_Flag
			}
		}

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			set_country_flag = VED_Cold_Trait_Flag
			subtract_from_variable = {
				var = VED_Chivalry_Points
				value = 1
			}
		}

	}
	VED_Learn_From_Military_Prince = {
		icon = border_war

		fire_only_once = no

		cost = 50

		available = {
			check_variable = {
				var = VED_Chivalry_Points
				value = 1
				compare = greater_than_or_equals
			}

		}

		visible = {
			has_country_flag = VED_Chose_Military_Prince_Flag
			NOT = {
				has_country_flag = VED_Military_Trait_Flag
			}
		}

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			set_country_flag = VED_Military_Trait_Flag
			subtract_from_variable = {
				var = VED_Chivalry_Points
				value = 1
			}
		}

	}
	VED_Learn_From_Reformer_Prince = {
		icon = border_war

		fire_only_once = no

		cost = 50

		available = {
			check_variable = {
				var = VED_Chivalry_Points
				value = 1
				compare = greater_than_or_equals
			}

		}

		visible = {
			has_country_flag = VED_Chose_Reformer_Prince_Flag
			NOT = {
				has_country_flag = VED_Reformer_Trait_Flag
			}
		}

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			set_country_flag = VED_Reformer_Trait_Flag
			subtract_from_variable = {
				var = VED_Chivalry_Points
				value = 1
			}
		}

	}
	VED_Learn_From_Fascist_Prince = {
		icon = border_war

		fire_only_once = no

		cost = 50

		available = {
			check_variable = {
				var = VED_Chivalry_Points
				value = 1
				compare = greater_than_or_equals
			}

		}

		visible = {
			has_country_flag = VED_Chose_Fascist_Prince_Flag
			NOT = {
				has_country_flag = VED_Fascist_Trait_Flag
			}
		}

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			set_country_flag = VED_Fascist_Trait_Flag
			subtract_from_variable = {
				var = VED_Chivalry_Points
				value = 1
				}
		}

	}
	VED_Learn_From_Welfare = {
		icon = border_war

		fire_only_once = no

		cost = 50

		available = {
			check_variable = {
				var = VED_Chivalry_Points
				value = 1
				compare = greater_than_or_equals
			}

		}

		visible = {
			has_country_flag = VED_Welfare
			NOT = {
				has_country_flag = VED_Welfare_Trait_Flag
			}
		}

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			set_country_flag = VED_Welfare_Trait_Flag
			subtract_from_variable = {
				var = VED_Chivalry_Points
				value = 1
				}
		}

	}
}

VED_Rule_Of_Wingstrom = {

	VED_Suppress_Sepratists = {
		icon = border_war

		fire_only_once = no

		cost = 50

		available = {

		}

		visible = {
			has_country_flag = VED_Sepratist_Threat
		}

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			add_to_variable = {
				var = VED_Sepratist_Suppression
				value = 1
			}
		}

	}
	VED_Science_Crisis = {
		icon = border_war

		fire_only_once = no

		cost = 100

		available = {

		}

		visible = {
			NOT = { has_idea = proper_science_base }
		}

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			Improve_Science_Base = yes
		}

	}
}

VED_Foreign_Politics = {

	VED_Holy_Crusade = {
		icon = border_war
		fire_only_once = no
		cost = 100
		available = {
			is_subject = no #very important check
			has_war = no
		}
		#target_trigger updates every 20 or so days
		target_trigger = {
			FROM = { #FROM is the target
				is_neighbor_of = ROOT
				has_government = fascism
				NOT = {
					is_subject_of = ROOT
					is_in_faction_with = ROOT
					has_idea = detached_country
				}
			}
		}
		war_with_target_on_remove = yes #for AI
		visible = {
			has_country_flag = VED_Princess_Went_Good
			FROM = { #because target_trigger doesn't update right away, we add some checks here in case something happens
				exists = yes
				NOT = {
					has_government = fascism
					is_subject_of = ROOT
					is_in_faction_with = ROOT
					has_war_with = ROOT
					ROOT = { has_wargoal_against = FROM }
				}
			}
		}
		cancel_trigger = { #extra check since we've changed it to remove_effect
			FROM = {
				OR = {
					exists = no
					NOT = { has_government = fascism }
					is_subject_of = ROOT
					is_in_faction_with = ROOT
					has_war_with = ROOT
					ROOT = { has_wargoal_against = FROM }
				}
			}
		}
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				OR = {
					has_war = yes
					strength_ratio = {
						tag = FROM
						ratio > 1
					}
					enemies_strength_ratio > 0.8
				}
				has_opinion = {
    				target = FROM
    				value > 0
				}
			}
		}
		days_remove = 40 #so the AI has a chance to prepare
		remove_effect = {
			FROM = {
				ROOT = {
					create_wargoal = {
						type = annex_everything
						target = PREV
					}
				}
			}
		}
	}
	VED_Holy_Fury = {
		icon = border_war

		fire_only_once = no

		cost = 300

		days_re_enable = 180

		available = {
			has_war = yes
		}

		visible = {
			has_country_flag = VED_Princess_Went_Good
		}

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			add_manpower = 10000
		}

	}

	VED_UnHoly_Crusade = {
		icon = border_war
		fire_only_once = no
		cost = 100
		available = {
			is_subject = no #very important check
			has_war = no
		}
		#target_trigger updates every 20 or so days
		target_trigger = {
			FROM = { #FROM is the target
				is_neighbor_of = ROOT
				NOT = {
					is_subject_of = ROOT
					is_in_faction_with = ROOT
					has_idea = detached_country
				}
			}
		}
		war_with_target_on_remove = yes #for AI
		visible = {
			has_country_flag = VED_Princess_Went_Good
			FROM = { #because target_trigger doesn't update right away, we add some checks here in case something happens
				exists = yes
				NOT = {
					is_subject_of = ROOT
					is_in_faction_with = ROOT
					has_war_with = ROOT
					ROOT = { has_wargoal_against = FROM }
				}
			}
		}
		cancel_trigger = { #extra check since we've changed it to remove_effect
			FROM = {
				OR = {
					exists = no
					is_subject_of = ROOT
					is_in_faction_with = ROOT
					has_war_with = ROOT
					ROOT = { has_wargoal_against = FROM }
				}
			}
		}
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				OR = {
					has_war = yes
					strength_ratio = {
						tag = FROM
						ratio > 1
					}
					enemies_strength_ratio > 0.8
				}
				has_opinion = {
    				target = FROM
    				value > 0
				}
			}
		}
		days_remove = 40 #so the AI has a chance to prepare
		remove_effect = {
			FROM = {
				ROOT = {
					create_wargoal = {
						type = annex_everything
						target = PREV
					}
				}
			}
		}
	}

	VED_UnHoly_Fury = {
		icon = border_war

		fire_only_once = no

		cost = 100

		days_re_enable = 180

		available = {
			has_war = yes
		}

		visible = {
			has_country_flag = VED_Princess_Went_Evil
		}

		ai_will_do = {
			factor = 100
		}

		days_remove = 90

		modifier = {
			army_attack_factor = 0.10
		}

	}

	VED_Stalwart_Defence = {
		icon = border_war

		fire_only_once = no

		cost = 100

		days_re_enable = 180

		available = {
			has_war = yes
		}

		visible = {
			has_country_flag = VED_Princess_Went_Neutral
		}

		ai_will_do = {
			factor = 100
		}

		days_remove = 90

		modifier = {
			army_core_defence_factor = 0.1
		}

	}

	VED_Isolation_Defence = {
		icon = border_war

		fire_only_once = no

		cost = 100

		days_re_enable = 180

		available = {

		}

		visible = {
			has_country_flag = VED_Princess_Went_Neutral
		}

		ai_will_do = {
			factor = 100
		}

		days_remove = 90

		modifier = {
			production_speed_bunker_factor = 0.2
		}

	}
}
