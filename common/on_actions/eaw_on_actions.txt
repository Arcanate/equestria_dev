on_actions = {

  #Not run on a specific country.
  on_startup = {
    effect = {
			DED = {
				every_other_country = {
					add_opinion_modifier = { target = PREV modifier = mortal_enemies }
					add_opinion_modifier = { target = PREV modifier = embargo }
					reverse_add_opinion_modifier = { target = PREV modifier = mortal_enemies }
					reverse_add_opinion_modifier = { target = PREV modifier = embargo }
				}
			}
      if = {
        limit = { is_historical_focus_on = no }
        random_list = {
          20 = {
            set_global_flag = EQS_nice_celestia
          }
          60 = {

          }
          10 = {
            set_global_flag = EQS_evil_celestia
          }
        }
        else = { set_global_flag = EQS_nice_celestia }
      }
      every_country = {
        limit = { is_generic_race = yes }
        set_technology = { generic_race = 1 }
      }
      every_country = {
        limit = { NOT = { is_on_equestrian_continent = yes } }
        if = {
          limit = {
            num_of_civilian_factories > 2
            has_tech = melee_weapons1
            NOT = { owns_big_griffon_city = yes }
            NOT = { owns_major_griffon_city = yes }
          }
          add_ideas = better_science_base
          else = {
            if = {
            limit = { owns_big_griffon_city = yes
            }
            add_ideas = big_science_base
            else = {
              if = {
              limit = { owns_major_griffon_city = yes
              }
              add_ideas = proper_science_base
              else = {
                if = {
                limit = { NOT = { owns_major_griffon_city = yes }
                NOT = { owns_big_griffon_city = yes }
                OR = {
                NOT = { has_tech = melee_weapons1 }
                NOT = { num_of_civilian_factories > 2 }
                }
                is_griffon_continent_country = yes
                }
                add_ideas = poor_science_base
                }
              }
              }
            }
            }
          }
        }
      }
      every_country = {
        limit = {
          is_ai = yes
        }
        set_rule = { can_join_factions = no }
      }

      every_country = {
        limit = {
          OR = {
            is_on_equestrian_continent = yes
            has_idea = dummy_idea_science
            NOT = {
              has_idea_with_trait = science_idea
            }
          }
        }
        add_ideas = proper_science_base
      }

      every_country = {
        limit = {
          OR = {
            has_idea = dummy_idea_society
            NOT = {
              has_idea_with_trait = society_idea
            }
          }
        }
        if = {
          limit = { is_griffon_continent_country = yes }
          add_ideas = outdated_industry
          else = { add_ideas = modern_society }
        }
      }
      ### Development End ####
      EQS = {
        set_country_flag = manpower_laws_blocked
        set_country_flag = economic_laws_blocked
        set_country_flag = { flag = celestia_evil_meter value = 0 }
      }

    }
  }
  #FROM is war target
  on_declare_war = {
	  effect = {
			hidden_effect = {
				if = {
					limit = {
						original_tag = DED
						NOT = { has_country_flag = DED_conversion_on }
					}
					country_event = deadempire.30
				}
				if = {
					limit = {
						FROM = {
							AND = {
								original_tag = DED
								NOT = { has_country_flag = DED_conversion_on }
							}
						}
					}
					FROM = { country_event = deadempire.30 }
				}
		    if = {
		      limit = {
		        OR = {
		          tag = EQS
		          FROM = { tag = EQS }
		        }
		      }
		      clr_country_flag = manpower_laws_blocked
		      clr_country_flag = economic_laws_blocked
		      FROM = {
		        clr_country_flag = manpower_laws_blocked
		        clr_country_flag = economic_laws_blocked
		      }
		    }
				if = {
					limit = {
						original_tag = CRY
						FROM = { original_tag = CRY }
					}
					if = {
						limit = {
							has_government = democratic
							NOT = { has_completed_focus = CRY_oldorder }
						}
						complete_national_focus = CRY_oldorder
						else = {
							FROM = {
								if = {
									limit = {
										has_government = democratic
										NOT = { has_completed_focus = CRY_oldorder }
									}
									complete_national_focus = CRY_oldorder
								}
							}
						}
					}
				}
		    if = {
		      limit = {
		        #original_tag = FROM
		        OR = {
		          has_idea = dummy_idea_society
		          #has_idea = modern_society
		          NOT = { has_idea_with_trait = society_idea }
		        }
		      }
		      if = {
		        limit = {
		          FROM = {
		            NOT = {
		              has_idea = modern_society
		            }
		          }
		        }
		        FROM = { ROOT = { transfer_society_ideas = yes } }
		        else = {
		          add_ideas = modern_society
		        }
		      }
		    }
		    if = {
		      limit = {
		        original_tag = FROM
		      }
					if = {
						limit = { FROM = { NOT = { has_idea = generic_race_idea } } }
		      	FROM = { ROOT = { transfer_race_ideas = yes } }
					}
					if = {
						limit = {
							FROM = { has_focus_tree = generic_griffon_focus }
							has_focus_tree = generic_griffon_focus
						}
						if = {
							limit = {
								FROM = { NOT = { has_country_flag = be_regular_puppet } }
							}
							set_country_flag = be_regular_puppet
							set_country_flag = have_regular_puppets
						}
					}
		    }
		    if = {
		      limit = {
		        #original_tag = FROM
		        OR = {
		          has_idea = dummy_idea_science
		          #has_idea = proper_science_base
		          NOT = { has_idea_with_trait = science_idea }
		        }
		      }
		      if = {
		        limit = {
		          FROM = {
		            NOT = {
		              has_idea = proper_science_base
		            }
		          }
		        }
		        FROM = { ROOT = { transfer_science_ideas = yes } }
		        else = {
		          add_ideas = proper_science_base
		        }
		      }
		    }
			}
	  }
	}
  #FROM is state the nuke got dropped on
  on_nuke_drop = {

    effect = {
      FROM = {
        decrease_population_on_nuke = yes
      }
      if = {
        limit = {
          OR = {
          tag = EQS
          tag = SOL }
          FROM = { state = 251 }
          NOT = { has_country_flag = nuked_the_hive }
        }
        news_event = { id = news.50 days = 1}
        set_country_flag = nuked_the_hive
      }
    }
  }

  #used when puppeting in a peace conference
	#ROOT = nation being puppeted, FROM = overlord
  on_puppet = {
    effect = {
      if = {
        limit = {
          original_tag = JUN
          OR = {
            AND = {
              NOT = { has_completed_focus = JUN_alone }
              OR = {
                has_country_leader = { ruling_only = yes name = Caballeron }
                FROM = { AND = { original_tag = CHN has_government = fascism } }
                FROM = { AND = { original_tag = EQS has_government = democratic } }
              }
            }
            AND = {
              FROM = {
                OR = {
                  original_tag = EQS
                  original_tag = SOL
                  original_tag = CHN
                }
                is_ai = yes
              }
            }
          }
        }
        FROM = { country_event = jungle.17 }
      }
      if = {
        limit = {
          original_tag = EQS
          has_country_flag = EQS_CRY_has_twilight
          FROM = { original_tag = SOL }
        }
        FROM = { news_event = solarempire.22 }
      }
      if = {
        limit = {
          original_tag = CRY
          has_country_flag = EQS_CRY_has_twilight
          FROM = { original_tag = SOL }
        }
        FROM = { news_event = solarempire.26 }
      }
      if = {
        limit = {
          FROM = {
            is_ai = yes
            original_tag = GRF
           }
          ROOT = {
            original_tag = GFF
          }
        }
        FROM = { annex_country =  { target = ROOT } }
      }
      if = {
        limit = {
          FROM = {
            is_ai = yes
            is_eqs_civil_war_tag = yes
            NOT = { original_tag = JUN }
           }
          ROOT = {
            is_ai = yes
            is_eqs_civil_war_tag = yes
            NOT = { original_tag = JUN }
          }
        }
        FROM = { annex_country =  { target = ROOT } }
      }
      if = {
        limit = {
          original_tag = CHN
          FROM = {
            original_tag = EQS
            is_ai = yes
            has_government = democratic
          }
          OR = {
            OLE = {
              has_country_flag = OLE_was_annexed
            }
            FROM = {
              any_owned_state = {
                is_core_of = OLE
              }
            }
          }
          any_owned_state = {
            is_core_of = OLE
          }
        }
        every_owned_state = {
          limit = { is_core_of = OLE }
          OLE = { transfer_state = PREV }
        }
        EQS = {
          every_owned_state = {
            limit = { is_core_of = OLE }
            OLE = { transfer_state = PREV }
          }
        }
        OLE = {
          set_politics = { ruling_party = democratic elections_allowed = no }
          set_political_party = { ideology = democratic popularity = 1.0 }
          clr_country_flag = OLE_was_annexed
        }
        EQS = {
          if = {
            limit = { OLE = { NOT = { is_subject_of = EQS } } }
            puppet = OLE
          }
        }
      }
      if = {
        limit = { original_tag = CHN overlord = { has_government = fascism } }
        country_event = { id = solarempire.906 }
      }
      if = {
        limit = {
          FROM = {
            OR = {
              original_tag = EQS
              original_tag = SOL
            }
           }
        }
        if = {
          limit = {
            original_tag = CRY
            NOT = {
              has_idea = equestrian_overlord
              has_idea = equestrian_overlord2
            }
          }
          if = {
            limit = { has_completed_focus = CRY_eqsengineers }
            add_ideas = equestrian_overlord2
            else = {
              add_ideas = equestrian_overlord
            }
          }
        }
      }
      if = {
        limit = {
          original_tag = EQC
          FROM = {
            OR = {
              original_tag = EQS
              original_tag = NLR
              original_tag = SOL
            }
          }
        }
        country_event = equestriancolony.1
      }
			if = {
				limit = {
					is_griffon_continent_griffon_country = yes
					NOT = { has_country_flag = be_regular_puppet }
					FROM = { has_country_flag = have_regular_puppets }
				}
				set_country_flag = be_regular_puppet
				set_country_flag = have_regular_puppets
			}
      #COSMETIC TAG ON PUPPET BELOW, DO NOT USE break = yes ABOVE
			if = {
        limit = {
          FROM = {
            original_tag = GRI
						NOT = { has_country_flag = have_regular_puppets }
           }
					 NOT = { has_country_flag = be_regular_puppet }
        }
				country_event = griffonian.1
      }
			#sanity check
			if = {
        limit = {
          FROM = {
            is_ai = yes
            original_tag = JER
           }
					 OR = {
					 	original_tag = HEL
						original_tag = FLO
						original_tag = POM
						original_tag = AET
						original_tag = FEZ
						original_tag = JEB
						original_tag = JES
						original_tag = JRR
						original_tag = VIN
						original_tag = JFT
					 }
        }
				FROM = { annex_country = { target = ROOT transfer_troops = yes } }
				break = yes
      }
      if = {
        limit = {
          FROM = {
            original_tag = SOL
            has_government = fascism
           }
        }
        if = {
          limit = { original_tag = CRY }
          FROM = {
            set_country_flag = SOL_twilight_unavailable
            set_country_flag = SOL_twilight_governor
            set_autonomy = { target = ROOT autonomy_state = autonomy_reichskommissariat }
          }
          set_cosmetic_tag = CRY_SOL
          add_autonomy_ratio = { value = -0.20 }
          set_country_flag = CRY_solar_governorship
          set_party_name = { ideology = fascism long_name = SOL_fascism_party_long name = SOL_fascism_party }
          if = {
            limit = { NOT = { has_global_flag = SOL_twilight_converted } }
            create_country_leader = {
              name = "Nameless Busybody"
              #desc = "TWILIGHT_DESC"
              #picture = "TwilightSunrise.tga"
              expire = "1965.1.1"
              ideology = fascism_ideology
              traits = {
              }
            }
            else = {
              create_country_leader = {
                name = "Grand Inquisitor Sunrise Sparkle"
                #desc = "TWILIGHT_DESC"
                picture = "TwilightSunrise.tga"
                expire = "1965.1.1"
                ideology = fascism_ideology
                traits = {
                  lady_inquisitor
                }
              }
            }
          }
          break = yes
        }
        if = {
          limit = { original_tag = PLB }
          country_event = solarempire.1000
          break = yes
        }
        if = {
          limit = { original_tag = GRF }
          country_event = solarempire.1001
          break = yes
        }
        if = {
          limit = { original_tag = PNG }
          country_event = solarempire.1002
          break = yes
        }
        if = {
          limit = { original_tag = STL }
          country_event = solarempire.1003
          break = yes
        }
        if = {
          limit = { original_tag = BUF }
          country_event = solarempire.1004
          break = yes
        }
        if = {
          limit = { original_tag = DRG }
          country_event = solarempire.1005
          break = yes
        }
        if = {
          limit = { original_tag = GFF }
          country_event = solarempire.1006
          break = yes
        }
        if = {
          limit = { original_tag = OLE }
          country_event = solarempire.1008
          break = yes
        }
        if = {
          limit = { original_tag = BAL }
          country_event = solarempire.1009
          break = yes
        }
        if = {
          limit = { original_tag = CES }
          country_event = solarempire.1010
          break = yes
        }
        if = {
          limit = { original_tag = JUN }
          country_event = solarempire.1011
          break = yes
        }
        if = {
          limit = { original_tag = SCS }
          country_event = solarempire.1012
          break = yes
        }
        if = {
          limit = { original_tag = STG }
          country_event = solarempire.1013
          break = yes
        }
        if = {
          limit = { original_tag = JAK }
          country_event = solarempire.1015
          break = yes
        }
        if = {
          limit = { original_tag = CES }
          country_event = solarempire.1010
          break = yes
        }
        if = {
          limit = { original_tag = CHN }
          country_event = solarempire.1016
          break = yes
        }
        if = {
          limit = { original_tag = YAK }
          country_event = solarempire.1017
          break = yes
        }
      }
      if = {
        limit = {
          FROM = {
            original_tag = NLR
            has_government = fascism
           }
        }
        if = {
          limit = { original_tag = PLB }
          country_event = { id = lunas.900 }
          break = yes
        }
        if = {
          limit = { original_tag = GRF }
          country_event = { id = lunas.902 }
          break = yes
        }
        if = {
          limit = { original_tag = PNG }
          country_event = { id = lunas.901 }
          break = yes
        }
        if = {
          limit = { original_tag = STL }
          country_event = { id = lunas.903 }
          break = yes
        }
        if = {
          limit = { original_tag = BUF }
          country_event = { id = lunas.904 }
          break = yes
        }
        if = {
          limit = { original_tag = DRG }
          country_event = { id = lunas.905 }
          break = yes
        }
        if = {
          limit = { original_tag = GFF }
          country_event = { id = lunas.906 }
          break = yes
        }
        if = {
          limit = { original_tag = OLE }
          country_event = { id = lunas.911 }
          break = yes
        }
        if = {
          limit = { original_tag = BAL }
          country_event = { id = lunas.912 }
          break = yes
        }
        if = {
          limit = { original_tag = CES }
          country_event = { id = lunas.913 }
          break = yes
        }
        if = {
          limit = { original_tag = JUN }
          country_event = { id = lunas.914 }
          break = yes
        }
        if = {
          limit = { original_tag = SCS }
          country_event = { id = lunas.916 }
          break = yes
        }
        if = {
          limit = { original_tag = STG }
          country_event = { id = lunas.917 }
          break = yes
        }
        if = {
          limit = { original_tag = CRY }
          country_event = { id = lunas.918 }
          break = yes
        }
        if = {
          limit = { original_tag = JAK }
          country_event = { id = lunas.919 }
          break = yes
        }
        if = {
          limit = { original_tag = CHN }
          country_event = { id = lunas.920 }
          break = yes
        }
        if = {
          limit = { original_tag = YAK }
          country_event = { id = lunas.921 }
          break = yes
        }
      }

      if = {
        limit = {
          FROM = {
            original_tag = SOL
            has_government = fascism
           }
        }
        if = {
          limit = { original_tag = PLB }
          country_event = { id = solarempire.1000 }
          break = yes
        }
        if = {
          limit = { original_tag = GRF }
          country_event = { id = solarempire.1001 }
          break = yes
        }
        if = {
          limit = { original_tag = PNG }
          country_event = { id = solarempire.1002 }
          break = yes
        }
        if = {
          limit = { original_tag = STL }
          country_event = { id = solarempire.1003 }
          break = yes
        }
        if = {
          limit = { original_tag = BUF }
          country_event = { id = solarempire.1004 }
          break = yes
        }
        if = {
          limit = { original_tag = DRG }
          country_event = { id = solarempire.1005 }
          break = yes
        }
        if = {
          limit = { original_tag = GFF }
          country_event = { id = solarempire.1006 }
          break = yes
        }
        if = {
          limit = { original_tag = OLE }
          country_event = { id = solarempire.1008 }
          break = yes
        }
        if = {
          limit = { original_tag = BAL }
          country_event = { id =solarempire.1009 }
          break = yes
        }
        if = {
          limit = { original_tag = CES }
          country_event = { id = solarempire.1010 }
          break = yes
        }
        if = {
          limit = { original_tag = JUN }
          country_event = { id = solarempire.1011 }
          break = yes
        }
        if = {
          limit = { original_tag = SCS }
          country_event = { id = solarempire.1012 }
          break = yes
        }
        if = {
          limit = { original_tag = STG }
          country_event = { id = solarempire.1013 }
          break = yes
        }
        if = {
          limit = { original_tag = JAK }
          country_event = { id =solarempire.1015 }
          break = yes
        }
        if = {
          limit = { original_tag = CHN }
          country_event = { id = solarempire.1016 }
          break = yes
        }
        if = {
          limit = { original_tag = YAK }
          country_event = { id = solarempire.1017 }
          break = yes
        }
      }

      if = {
        limit = {
          FROM = {
            original_tag = CHN
            has_government = fascism
           }
        }
        if = {
          limit = { original_tag = OLE }
          country_event = { id = olenia.718 }
          break = yes
        }
        if = {
          limit = { original_tag = PLB }
          country_event = { id = changelings.900 }
          break = yes
        }
        if = {
          limit = { original_tag = GRF }
          country_event = { id = changelings.902 }
          break = yes
        }
        if = {
          limit = { original_tag = PNG }
          country_event = { id = changelings.901 }
          break = yes
        }
        if = {
          limit = { original_tag = STL }
          country_event = { id = changelings.903 }
          break = yes
        }
        if = {
          limit = { original_tag = BUF }
          country_event = { id = changelings.904 }
          break = yes
        }
        if = {
          limit = { original_tag = DRG }
          country_event = { id = changelings.905 }
          break = yes
        }
        if = {
          limit = { original_tag = GFF }
          country_event = { id = changelings.906 }
          break = yes
        }
        if = {
          limit = { original_tag = GFF }
          country_event = { id = changelings.906 }
          break = yes
        }
        if = {
          limit = { original_tag = OLE }
          country_event = { id = olenia.718 }
          break = yes
        }
        if = {
          limit = { original_tag = CRY }
          country_event = { id = crystalemp.23 }
          break = yes
        }
        if = {
          limit = { original_tag = EQS }
          country_event = { id = equestriachn.3 }
          break = yes
        }
        if = {
          limit = { original_tag = STG }
          country_event = { id = stalliongrad.98 }
          break = yes
        }
        if = {
          limit = { original_tag = YAK }
          country_event = { id = yakistan.12 }
          break = yes
        }
        if = {
          limit = { original_tag = JAK }
          country_event = { id = yakistan.13 }
          break = yes
        }
      }
    }
  }

  #used when puppeting through the occupied territories menu during peace time (or when releasing from non-core but owned territory, f.e. Britain releasing Egypt)
	#ROOT = nation being released, FROM = overlord
	on_release_as_puppet = {
		effect = {
      if = {
        limit = { original_tag = CHN overlord = { has_government = fascism } }
        country_event = { id = solarempire.906 }
      }
      if = {
        limit = {
          FROM = {
            OR = {
              original_tag = EQS
              original_tag = SOL
            }
           }
        }
        if = {
          limit = {
            original_tag = CRY
            NOT = {
              has_idea = equestrian_overlord
              has_idea = equestrian_overlord2
            }
          }
          if = {
            limit = { has_completed_focus = CRY_eqsengineers }
            add_ideas = equestrian_overlord2
            else = {
              add_ideas = equestrian_overlord
            }
          }
        }
      }
      if = {
        limit = {
          original_tag = EQC
          FROM = {
            OR = {
              original_tag = EQS
              original_tag = NLR
              original_tag = SOL
            }
          }
        }
        country_event = equestriancolony.1
      }
      #COSMETIC TAG ON PUPPET BELOW, DO NOT USE break = yes ABOVE
			if = {
        limit = {
          FROM = {
            original_tag = GRI
						NOT = { has_country_flag = have_regular_puppets }
           }
					 NOT = { has_country_flag = be_regular_puppet }
        }
				country_event = griffonian.1
      }
			if = {
        limit = {
          FROM = {
            original_tag = SOL
            has_government = fascism
           }
        }
        if = {
          limit = { original_tag = CRY }
          FROM = {
            set_country_flag = SOL_twilight_unavailable
            set_country_flag = SOL_twilight_governor
            set_autonomy = { target = ROOT autonomy_state = autonomy_reichskommissariat }
          }
          set_cosmetic_tag = CRY_SOL
          add_autonomy_ratio = { value = -0.20 }
          set_country_flag = CRY_solar_governorship
          set_party_name = { ideology = fascism long_name = SOL_fascism_party_long name = SOL_fascism_party }
          if = {
            limit = { NOT = { has_global_flag = SOL_twilight_converted } }
            create_country_leader = {
              name = "Nameless Busybody"
              #desc = "TWILIGHT_DESC"
              #picture = "TwilightSunrise.tga"
              expire = "1965.1.1"
              ideology = fascism_ideology
              traits = {
              }
            }
            else = {
              create_country_leader = {
                name = "Grand Inquisitor Sunrise Sparkle"
                #desc = "TWILIGHT_DESC"
                picture = "TwilightSunrise.tga"
                expire = "1965.1.1"
                ideology = fascism_ideology
                traits = {
                  lady_inquisitor
                }
              }
            }
          }
          break = yes
        }
        if = {
          limit = { original_tag = PLB }
          country_event = solarempire.1000
          break = yes
        }
        if = {
          limit = { original_tag = GRF }
          country_event = solarempire.1001
          break = yes
        }
        if = {
          limit = { original_tag = PNG }
          country_event = solarempire.1002
          break = yes
        }
        if = {
          limit = { original_tag = STL }
          country_event = solarempire.1003
          break = yes
        }
        if = {
          limit = { original_tag = BUF }
          country_event = solarempire.1004
          break = yes
        }
        if = {
          limit = { original_tag = DRG }
          country_event = solarempire.1005
          break = yes
        }
        if = {
          limit = { original_tag = GFF }
          country_event = solarempire.1006
          break = yes
        }
        if = {
          limit = { original_tag = OLE }
          country_event = solarempire.1008
          break = yes
        }
        if = {
          limit = { original_tag = BAL }
          country_event = solarempire.1009
          break = yes
        }
        if = {
          limit = { original_tag = CES }
          country_event = solarempire.1010
          break = yes
        }
        if = {
          limit = { original_tag = JUN }
          country_event = solarempire.1011
          break = yes
        }
        if = {
          limit = { original_tag = SCS }
          country_event = solarempire.1012
          break = yes
        }
        if = {
          limit = { original_tag = STG }
          country_event = solarempire.1013
          break = yes
        }
        if = {
          limit = { original_tag = JAK }
          country_event = solarempire.1015
          break = yes
        }
        if = {
          limit = { original_tag = CES }
          country_event = solarempire.1010
          break = yes
        }
        if = {
          limit = { original_tag = CHN }
          country_event = solarempire.1016
          break = yes
        }
        if = {
          limit = { original_tag = YAK }
          country_event = solarempire.1017
          break = yes
        }
      }
      if = {
        limit = {
          FROM = {
            original_tag = NLR
            has_government = fascism
           }
        }
        if = {
          limit = { original_tag = PLB }
          country_event = { id = lunas.900 }
          break = yes
        }
        if = {
          limit = { original_tag = GRF }
          country_event = { id = lunas.902 }
          break = yes
        }
        if = {
          limit = { original_tag = PNG }
          country_event = { id = lunas.901 }
          break = yes
        }
        if = {
          limit = { original_tag = STL }
          country_event = { id = lunas.903 }
          break = yes
        }
        if = {
          limit = { original_tag = BUF }
          country_event = { id = lunas.904 }
          break = yes
        }
        if = {
          limit = { original_tag = DRG }
          country_event = { id = lunas.905 }
          break = yes
        }
        if = {
          limit = { original_tag = GFF }
          country_event = { id = lunas.906 }
          break = yes
        }
        if = {
          limit = { original_tag = OLE }
          country_event = { id = lunas.911 }
          break = yes
        }
        if = {
          limit = { original_tag = BAL }
          country_event = { id = lunas.912 }
          break = yes
        }
        if = {
          limit = { original_tag = CES }
          country_event = { id = lunas.913 }
          break = yes
        }
        if = {
          limit = { original_tag = JUN }
          country_event = { id = lunas.914 }
          break = yes
        }
        if = {
          limit = { original_tag = SCS }
          country_event = { id = lunas.916 }
          break = yes
        }
        if = {
          limit = { original_tag = STG }
          country_event = { id = lunas.917 }
          break = yes
        }
        if = {
          limit = { original_tag = CRY }
          country_event = { id = lunas.918 }
          break = yes
        }
        if = {
          limit = { original_tag = JAK }
          country_event = { id = lunas.919 }
          break = yes
        }
        if = {
          limit = { original_tag = CHN }
          country_event = { id = lunas.920 }
          break = yes
        }
        if = {
          limit = { original_tag = YAK }
          country_event = { id = lunas.921 }
          break = yes
        }
      }

       if = {
        limit = {
          FROM = {
            original_tag = SOL
            has_government = fascism
           }
        }
        if = {
          limit = { original_tag = PLB }
          country_event = { id = solarempire.1000 }
          break = yes
        }
        if = {
          limit = { original_tag = GRF }
          country_event = { id = solarempire.1001 }
          break = yes
        }
        if = {
          limit = { original_tag = PNG }
          country_event = { id = solarempire.1002 }
          break = yes
        }
        if = {
          limit = { original_tag = STL }
          country_event = { id = solarempire.1003 }
          break = yes
        }
        if = {
          limit = { original_tag = BUF }
          country_event = { id = solarempire.1004 }
          break = yes
        }
        if = {
          limit = { original_tag = DRG }
          country_event = { id = solarempire.1005 }
          break = yes
        }
        if = {
          limit = { original_tag = GFF }
          country_event = { id = solarempire.1006 }
          break = yes
        }
        if = {
          limit = { original_tag = OLE }
          country_event = { id = solarempire.1008 }
          break = yes
        }
        if = {
          limit = { original_tag = BAL }
          country_event = { id =solarempire.1009 }
          break = yes
        }
        if = {
          limit = { original_tag = CES }
          country_event = { id = solarempire.1010 }
          break = yes
        }
        if = {
          limit = { original_tag = JUN }
          country_event = { id = solarempire.1011 }
          break = yes
        }
        if = {
          limit = { original_tag = SCS }
          country_event = { id = solarempire.1012 }
          break = yes
        }
        if = {
          limit = { original_tag = STG }
          country_event = { id = solarempire.1013 }
          break = yes
        }
        if = {
          limit = { original_tag = JAK }
          country_event = { id =solarempire.1015 }
          break = yes
        }
        if = {
          limit = { original_tag = CHN }
          country_event = { id = solarempire.1016 }
          break = yes
        }
        if = {
          limit = { original_tag = YAK }
          country_event = { id = solarempire.1017 }
          break = yes
        }
      }

      if = {
        limit = {
          FROM = {
            original_tag = CHN
            has_government = fascism
           }
        }
        if = {
          limit = { original_tag = OLE }
          country_event = { id = olenia.718 }
          break = yes
        }
        if = {
          limit = { original_tag = PLB }
          country_event = { id = changelings.900 }
          break = yes
        }
        if = {
          limit = { original_tag = GRF }
          country_event = { id = changelings.902 }
          break = yes
        }
        if = {
          limit = { original_tag = PNG }
          country_event = { id = changelings.901 }
          break = yes
        }
        if = {
          limit = { original_tag = STL }
          country_event = { id = changelings.903 }
          break = yes
        }
        if = {
          limit = { original_tag = BUF }
          country_event = { id = changelings.904 }
          break = yes
        }
        if = {
          limit = { original_tag = DRG }
          country_event = { id = changelings.905 }
          break = yes
        }
        if = {
          limit = { original_tag = GFF }
          country_event = { id = changelings.906 }
          break = yes
        }
        if = {
          limit = { original_tag = GFF }
          country_event = { id = changelings.906 }
          break = yes
        }
        if = {
          limit = { original_tag = OLE }
          country_event = { id = olenia.718 }
          break = yes
        }
        if = {
          limit = { original_tag = CRY }
          country_event = { id = crystalemp.23 }
          break = yes
        }
        if = {
          limit = { original_tag = EQS }
          country_event = { id = equestriachn.3 }
          break = yes
        }
        if = {
          limit = { original_tag = STG }
          country_event = { id = stalliongrad.98 }
          break = yes
        }
        if = {
          limit = { original_tag = YAK }
          country_event = { id = yakistan.12 }
          break = yes
        }
        if = {
          limit = { original_tag = JAK }
          country_event = { id = yakistan.13 }
          break = yes
        }
      }
      if = {
        limit = {
          FROM = {
            NOT = { has_idea = modern_society }
          }
        }
        hidden_effect = { FROM = { ROOT = { transfer_society_ideas = yes } } }
        else = {
          hidden_effect = { add_ideas = modern_society }
        }
      }
      if = {
        limit = {
          FROM = {
            NOT = { has_idea = proper_science_base }
          }
        }
        hidden_effect = { FROM = { ROOT = { transfer_science_ideas = yes } } }
        else = {
          hidden_effect = { add_ideas = proper_science_base }
        }
      }
    }
  }

  #ROOT is winner #FROM gets annexed - For civil wars on_civil_war_end is also fired
	on_annex = {
		effect = {
			if = {
        limit = {
          original_tag = OLE
          NOT = { tag = OLE }
          FROM = { original_tag = OLE }
        }
        set_cosmetic_tag = OLE_CWWON
      }

      if = {
        limit = {
          tag = CHN
          FROM = { original_tag = OLE }
        }
      FROM = { set_country_flag = OLE_was_annexed }
      }

      if = {
        limit = {
          original_tag = SOL
          FROM = {
            has_country_flag = EQS_CRY_has_twilight
            original_tag = EQS
          }
        }
        news_event = solarempire.22
      }
      if = {
        limit = {
          original_tag = SOL
          FROM = {
            has_country_flag = EQS_CRY_has_twilight
            original_tag = CRY
          }
        }
        news_event = solarempire.26
      }
		}
	}

  on_civil_war_end = {
		effect = {
			#
		}
	}
on_capitulation = {
  effect = {
    if = {
      limit = {
        tag = EQP
      }
      EQS = { annex_country = { target = EQP } }
    }
    if = {
      limit = {
        tag = GRI
        is_major = yes
      }
      set_major = no
    }
    if = {
      limit = {
        original_tag = EQS
        has_country_flag = EQS_CRY_has_twilight
        FROM = { original_tag = SOL }
      }
      FROM = { news_event = solarempire.22 }
    }
    if = {
      limit = {
        original_tag = CRY
        has_country_flag = EQS_CRY_has_twilight
        FROM = { original_tag = SOL }
      }
      FROM = { news_event = solarempire.26 }
    }
  }
}
#ROOT is free nation FROM is releaser
on_release_as_free = {
  effect = {
    if = {
      limit = {
        OR = {
          has_idea = dummy_idea_society
          #has_idea = modern_society
          NOT = { has_idea_with_trait = society_idea }
        }
        FROM = {
            NOT = {
              has_idea = modern_society
            }
          }
      }
      FROM = { ROOT = { transfer_society_ideas = yes } }
      else = {
        add_ideas = modern_society
      }
    }
    if = {
      limit = {
        OR = {
          has_idea = dummy_idea_science
          #has_idea = modern_society
          NOT = { has_idea_with_trait = science_idea }
        }
        FROM = {
          NOT = {
            has_idea = proper_science_base
          }
        }
      }
      FROM = { ROOT = { transfer_science_ideas = yes } }
      else = {
        add_ideas = proper_science_base
      }
    }
  }
}

on_subject_free = {
    effect = {
      if = {
        limit = {
					has_country_flag = griffon_empire_puppet
        }
        country_event = griffonian.2
				break = yes
      }
			if = {
        limit = {
					has_country_flag = is_changeling_puppet
					NOT = { tag = EQS }
        }
        country_event = changelings.910
				break = yes
      }
			if = {
        limit = {
					has_country_flag = is_changeling_puppet
					original_tag = EQS
	        num_of_controlled_states > 15
	        controls_fillydelphia = yes
	        controls_manehattan = yes
	        controls_los_pegasus = yes
	        controls_baltimare = yes
	        controls_canterlot = yes
        }
        country_event = changelings.911
				break = yes
      }
			if = {
        limit = {
					original_tag = EQC
			    OR = {
			      has_country_flag = is_sol_puppet
			      has_country_flag = is_eqs_puppet
			      has_country_flag = is_nlr_puppet
			    }
        }
        country_event = equestriancolony.2
				break = yes
      }
			if = {
        limit = {
					NOT = { original_tag = EQS }
			    has_country_flag = is_luna_puppet
        }
        country_event = lunas.910
				break = yes
      }
			if = {
        limit = {
					original_tag = CRY
			    NOT = {
			      is_subject_of = SOL
			      is_in_faction_with = SOL
			    }
			    has_country_flag = is_sol_puppet
        }
        country_event = solarempiresparkles.104
				break = yes
      }
			if = {
        limit = {
					has_country_flag = is_solar_puppet
        }
        country_event = solarempire.1007
				break = yes
      }
    }
  }

	on_government_change = {
		effect = {
			if = {
				limit = {
					original_tag = BAN
					has_government = neutrality
				}
				clr_country_flag = have_regular_puppets
			}
		}
	}
}
