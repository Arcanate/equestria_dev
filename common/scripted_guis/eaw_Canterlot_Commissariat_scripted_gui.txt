scripted_gui = {
	CHN_love_erot_display_container_gui = {
		context_type = decision_category
		parent_window_token = decision_tab
		
		window_name = "CHN_love_erot_display_container"
		
		visible = {
			original_tag = CHN
			has_completed_focus = CHN_post_war_5
		}
	}
	CHN_vesalipolis_queens_tower_container_gui = {
		context_type = selected_state_context
		parent_window_token = selected_state_view
		
		window_name = "CHN_vesalipolis_queens_tower_container"
		
		visible = {
			ROOT = {
				original_tag = CHN
				has_completed_focus = CHN_post_war_3
			}
			THIS = {
				state = 251
			}
		}
	}
	CHN_everfree_forest_resistance_container_gui = {
		context_type = selected_state_context
		parent_window_token = selected_state_view
		
		window_name = "CHN_everfree_forest_resistance_container"
		
		visible = {
			has_global_flag = ZRS_uprising_has_happened
			THIS = {
				OR = {
					state = 1
					state = 5
				}
			}
		}
	}
	
	CHN_mobile_task_force_gui = {
		context_type = selected_state_context
		parent_window_token = selected_state_view
		
		visible = {
			ROOT = {
				original_tag = CHN 
				has_country_flag = CHN_unlocked_dispatch_mtf_ability_flag
			}
		}
		
		window_name = "CHN_mobile_task_force_button_container"
	}
	
	CHN_mobile_task_force_clickable_gui = {
		context_type = selected_state_context
		parent_window_token = selected_state_view
		
		visible = {
			ROOT = {
				original_tag = CHN 
				has_country_flag = CHN_unlocked_dispatch_mtf_ability_flag
				NOT = { has_country_flag = CHN_recall_jagdkommandos_decision_in_progress_flag }
				has_political_power > 24
				command_power > 29
				check_variable = {
					var = CHN_mobile_task_force_deployed_var
					value = 4
					compare = less_than_or_equals
				}
			}
			THIS = {
				NOT = { has_state_flag = CHN_has_already_dispatched_mtf_to_this_state }
				owner = {
					OR = {
						original_tag = CHN
						is_subject_of = CHN
						is_in_faction_with = CHN
					}
				}
			}
		}
		
		window_name = "CHN_mobile_task_force_button_clickable_window"
		
		effects = {
			CHN_mobile_task_force_button_click = {
				hidden_effect = {
					ROOT = {
						add_political_power = -25
						add_command_power = -30
						add_to_variable = { CHN_mobile_task_force_deployed_var = 1 } 
						subtract_from_variable = { CHN_mobile_task_force_in_reserve_var = 2 }
					}
					THIS = {
						set_state_flag = CHN_has_already_dispatched_mtf_to_this_state
						if = {
							limit = { 
								CHN = {
									check_variable = { CHN_mobile_task_force_deployed_var = 1 }
								}
							}
							CHN = {
								set_variable = { CHN_dispatched_mtf_state_decision_1_duration_var = 251.distance_to@PREV }
								divide_variable = { CHN_dispatched_mtf_state_decision_1_duration_var = 40 }
								add_to_variable = { CHN_dispatched_mtf_state_decision_1_duration_var = 3 }
							}
							set_state_flag = CHN_dispatched_mtf_state_decision_1
						}
						else_if = {
							limit = { 
								CHN = {
									check_variable = { CHN_mobile_task_force_deployed_var = 2 }
								}
							}
							CHN = {
								set_variable = { CHN_dispatched_mtf_state_decision_2_duration_var = 251.distance_to@PREV }
								divide_variable = { CHN_dispatched_mtf_state_decision_2_duration_var = 40 }
								add_to_variable = { CHN_dispatched_mtf_state_decision_2_duration_var = 3 }
							}
							set_state_flag = CHN_dispatched_mtf_state_decision_2
						}
						else_if = {
							limit = { 
								CHN = {
									check_variable = { CHN_mobile_task_force_deployed_var = 3 }
								}
							}
							CHN = {
								set_variable = { CHN_dispatched_mtf_state_decision_3_duration_var = 251.distance_to@PREV }
								divide_variable = { CHN_dispatched_mtf_state_decision_3_duration_var = 40 }
								add_to_variable = { CHN_dispatched_mtf_state_decision_3_duration_var = 3 }
							}
							set_state_flag = CHN_dispatched_mtf_state_decision_3
						}
						else_if = {
							limit = { 
								CHN = {
									check_variable = { CHN_mobile_task_force_deployed_var = 4 }
								}
							}
							CHN = {
								set_variable = { CHN_dispatched_mtf_state_decision_4_duration_var = 251.distance_to@PREV }
								divide_variable = { CHN_dispatched_mtf_state_decision_4_duration_var = 40 }
								add_to_variable = { CHN_dispatched_mtf_state_decision_4_duration_var = 3 }
							}
							set_state_flag = CHN_dispatched_mtf_state_decision_4
						}
						else_if = {
							limit = { 
								CHN = {
									check_variable = { CHN_mobile_task_force_deployed_var = 5 }
								}
							}
							CHN = {
								set_variable = { CHN_dispatched_mtf_state_decision_5_duration_var = 251.distance_to@PREV }
								divide_variable = { CHN_dispatched_mtf_state_decision_5_duration_var = 40 }
								add_to_variable = { CHN_dispatched_mtf_state_decision_5_duration_var = 3 }
							}
							set_state_flag = CHN_dispatched_mtf_state_decision_5
						}
					}
				}
			}
		}
	}
}