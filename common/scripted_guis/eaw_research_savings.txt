scripted_gui = {
	EaW_research_savings = {
		window_name = "EaW_research_savings"
		parent_window_token = technology_tab
		
		visible = {
			has_country_flag = RS_GUI_unlocked_flag # remove on_action
		}
		
		triggers = {
			RS_infantry_25_button_click_enabled = {
				check_variable = {
					var = RS_total_army_savings_var
					compare = greater_than_or_equals
					value = RS_infantry_25_boost_cost_var
				}
				
				has_completed_focus = NTR_new_rifles
			}
			RS_infantry_50_button_click_enabled = {
				check_variable = {
					var = RS_total_army_savings_var
					compare = greater_than_or_equals
					value = RS_infantry_50_boost_cost_var
				}
				
				has_completed_focus = NTR_new_rifles
			}
			
			RS_armor_25_button_click_enabled = {
				check_variable = {
					var = RS_total_army_savings_var
					compare = greater_than_or_equals
					value = RS_armor_25_boost_cost_var
				}
				
				has_completed_focus = NTR_everfrost_military_academy
			}
			RS_armor_50_button_click_enabled = {
				check_variable = {
					var = RS_total_army_savings_var
					compare = greater_than_or_equals
					value = RS_armor_50_boost_cost_var
				}
				
				has_completed_focus = NTR_everfrost_military_academy
			}
			
			RS_artillery_25_button_click_enabled = {
				check_variable = {
					var = RS_total_army_savings_var
					compare = greater_than_or_equals
					value = RS_artillery_25_boost_cost_var
				}
				
				has_completed_focus = NTR_guns_to_shake_the_earth
			}
			RS_artillery_50_button_click_enabled = {
				check_variable = {
					var = RS_total_army_savings_var
					compare = greater_than_or_equals
					value = RS_artillery_50_boost_cost_var
				}
				
				has_completed_focus = NTR_guns_to_shake_the_earth
			}
			
			RS_naval_25_button_click_enabled = {
				check_variable = {
					var = RS_total_naval_savings_var
					compare = greater_than_or_equals
					value = RS_naval_25_boost_cost_var
				}
				
				has_completed_focus = NTR_founding_the_northern_navy
			}
			RS_naval_50_button_click_enabled = {
				check_variable = {
					var = RS_total_naval_savings_var
					compare = greater_than_or_equals
					value = RS_naval_50_boost_cost_var
				}
				
				has_completed_focus = NTR_founding_the_northern_navy
			}
			
			RS_air_25_button_click_enabled = {
				check_variable = {
					var = RS_total_air_savings_var
					compare = greater_than_or_equals
					value = RS_air_25_boost_cost_var
				}
				
				has_completed_focus = NTR_a_northern_airforce
			}
			RS_air_50_button_click_enabled = {
				check_variable = {
					var = RS_total_air_savings_var
					compare = greater_than_or_equals
					value = RS_air_50_boost_cost_var
				}
				
				has_completed_focus = NTR_a_northern_airforce
			}
			
			RS_industry_25_button_click_enabled = {
				check_variable = {
					var = RS_total_industrial_savings_var
					compare = greater_than_or_equals
					value = RS_industry_25_boost_cost_var
				}
			}
			RS_industry_50_button_click_enabled = {
				check_variable = {
					var = RS_total_industrial_savings_var
					compare = greater_than_or_equals
					value = RS_industry_50_boost_cost_var
				}
			}
			
			RS_engineering_25_button_click_enabled = {
				check_variable = {
					var = RS_total_industrial_savings_var
					compare = greater_than_or_equals
					value = RS_engineering_25_boost_cost_var
				}
			}
			RS_engineering_50_button_click_enabled = {
				check_variable = {
					var = RS_total_industrial_savings_var
					compare = greater_than_or_equals
					value = RS_engineering_50_boost_cost_var
				}
			}
		}
		
		effects = {
			RS_infantry_25_button_click = {
				subtract_from_variable = { RS_total_army_savings_var = RS_infantry_25_boost_cost_var }
				
				if = {
					limit = {
						has_completed_focus = NTR_operative_battalions
					}
					
					add_tech_bonus = {
						name = infantry_weapons_bonus
						bonus = 0.25
						category = infantry_weapons
						category = motorized_equipment
					}
				}
				else = {
					add_tech_bonus = {
						name = infantry_weapons_bonus
						bonus = 0.25
						category = infantry_weapons
					}
				}
			}
			RS_infantry_50_button_click = {
				subtract_from_variable = { RS_total_army_savings_var = RS_infantry_50_boost_cost_var }
				
				if = {
					limit = {
						has_completed_focus = NTR_operative_battalions
					}
					
					add_tech_bonus = {
						name = infantry_weapons_bonus
						bonus = 0.5
						category = infantry_weapons
						category = motorized_equipment
					}
				}
				else = {
					add_tech_bonus = {
						name = infantry_weapons_bonus
						bonus = 0.5
						category = infantry_weapons
					}
				}
			}
			
			RS_armor_25_button_click = {
				subtract_from_variable = { RS_total_army_savings_var = RS_armor_25_boost_cost_var }
				
				add_tech_bonus = {
					name = armor_bonus
					bonus = 0.25
					category = armor
				}
			}
			RS_armor_50_button_click = {
				subtract_from_variable = { RS_total_army_savings_var = RS_armor_50_boost_cost_var }
				
				add_tech_bonus = {
					name = armor_bonus
					bonus = 0.5
					category = armor
				}
			}
			
			RS_artillery_25_button_click = {
				subtract_from_variable = { RS_total_army_savings_var = RS_artillery_25_boost_cost_var }
				
				add_tech_bonus = {
					name = arty_bonus
					bonus = 0.25
					category = artillery
				}
			}
			RS_artillery_50_button_click = {
				subtract_from_variable = { RS_total_army_savings_var = RS_artillery_50_boost_cost_var }
				
				add_tech_bonus = {
					name = arty_bonus
					bonus = 0.5
					category = artillery
				}
			}
			
			RS_naval_25_button_click = {
				subtract_from_variable = { RS_total_naval_savings_var = RS_naval_25_boost_cost_var }
				
				add_tech_bonus = {
					name = ships_bonus
					bonus = 0.25
					category = naval_equipment
				}
			}
			RS_naval_50_button_click = {
				subtract_from_variable = { RS_total_naval_savings_var = RS_naval_50_boost_cost_var }
				
				add_tech_bonus = {
					name = ships_bonus
					bonus = 0.5
					category = naval_equipment
				}
			}
			
			RS_air_25_button_click = {
				subtract_from_variable = { RS_total_air_savings_var = RS_air_25_boost_cost_var }
				
				add_tech_bonus = {
					name = air_bonus
					bonus = 0.25
					category = light_air
					category = medium_air
					category = heavy_air
				}
			}
			RS_air_50_button_click = {
				subtract_from_variable = { RS_total_air_savings_var = RS_air_50_boost_cost_var }
				
				add_tech_bonus = {
					name = air_bonus
					bonus = 0.5
					category = light_air
					category = medium_air
					category = heavy_air
				}
			}
			
			RS_industry_25_button_click = {
				subtract_from_variable = { RS_total_industrial_savings_var = RS_industry_25_boost_cost_var }
				
				add_tech_bonus = {
					name = industrial_bonus
					bonus = 0.25
					category = industry
				}
			}
			RS_industry_50_button_click = {
				subtract_from_variable = { RS_total_industrial_savings_var = RS_industry_50_boost_cost_var }
				
				add_tech_bonus = {
					name = industrial_bonus
					bonus = 0.5
					category = industry
				}
			}
			
			RS_engineering_25_button_click = {
				subtract_from_variable = { RS_total_industrial_savings_var = RS_engineering_25_boost_cost_var }
				
				add_tech_bonus = {
					name = electronics_bonus
					bonus = 0.25
					category = electronics
				}
			}
			RS_engineering_50_button_click = {
				subtract_from_variable = { RS_total_industrial_savings_var = RS_engineering_50_boost_cost_var }
				
				add_tech_bonus = {
					name = electronics_bonus
					bonus = 0.5
					category = electronics
				}
			}
		}
		
		ai_enabled = {
			original_tag = NTR
		}
		
		ai_test_interval = 700 # hours = 29,1(6) days (int)
		ai_test_variance = 0.2 # ai_test_interval * 0.1 = x +- ai_test_interval = hours_to_next_ai_check (float)
		
		ai_check = {
			OR = {
				check_variable = { RS_total_army_savings_var > 0 }
				check_variable = { RS_total_industrial_savings_var > 0 }
				check_variable = { RS_total_naval_savings_var > 0 }
				check_variable = { RS_total_air_savings_var > 0 }
			}
		}
		
		ai_max_weight_taken_per_test = 4 # 4 categories
		
		ai_weights = { # ALPHA; works only with NTR_AI_processor (Ntribes.1000)
			RS_industry_25_button_click = {
				ai_will_do = {
					base = 3
					
					modifier = { # save for RS_industry_50_button
						factor = 0
						
						has_tech_bonus = { category = industry }
					}
				}
			}
			RS_industry_50_button_click = {
				ai_will_do = { base = 3 }
			}
			
			RS_engineering_25_button_click = {
				ai_will_do = {
					base = 2
					
					modifier = {
						factor = 0
						
						OR = {
							check_variable = { NTR_war_production_AI_factor > 0 }
							check_variable = { NTR_war_construction_AI_factor > 0 }
						}
						
						NOT = { has_tech_bonus = { category = industry } }
					}
				}
			}
			RS_engineering_50_button_click = {
				ai_will_do = {
					base = 2
					
					modifier = {
						factor = 0
						
						OR = {
							check_variable = { NTR_war_production_AI_factor > 0 }
							check_variable = { NTR_war_construction_AI_factor > 0 }
						}
						
						NOT = { has_tech_bonus = { category = industry } }
					}
				}
			}
			
			RS_infantry_25_button_click = {
				ai_will_do = {
					base = 3
					
					modifier = { # save for RS_infantry_50_button
						factor = 0
						
						has_tech_bonus = { category = infantry_weapons }
					}
				}
			}
			RS_infantry_50_button_click = {
				ai_will_do = { base = 3 }
			}
			
			RS_armor_25_button_click = {
				ai_will_do = {
					base = 1
					
					modifier = { # save for RS_armor_50_button
						factor = 0
						
						has_tech_bonus = { category = armor }
					}
				}
			}
			RS_armor_50_button_click = {
				ai_will_do = { base = 1 }
			}
			
			RS_artillery_25_button_click = {
				ai_will_do = {
					base = 2
					
					modifier = { # save for RS_artillery_50_button
						factor = 0
						
						has_tech_bonus = { category = artillery }
					}
				}
			}
			RS_artillery_50_button_click = {
				ai_will_do = { base = 2 }
			}
			
			RS_naval_25_button_click = {
				ai_will_do = {
					base = 2
					
					modifier = { # save for RS_naval_50_button
						factor = 0
						
						has_tech_bonus = { category = naval_equipment }
					}
				}
			}
			RS_naval_50_button_click = {
				ai_will_do = { base = 2 }
			}
			
			RS_air_25_button_click = {
				ai_will_do = {
					base = 2
					
					modifier = { # save for RS_air_50_button
						factor = 0
						
						has_tech_bonus = { category = light_air }
						has_tech_bonus = { category = medium_air }
						has_tech_bonus = { category = heavy_air }
					}
				}
			}
			RS_air_50_button_click = {
				ai_will_do = { base = 2 }
			}
		}
	}
}