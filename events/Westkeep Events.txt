add_namespace = westkeep
add_namespace = westkeep_debug

country_event = { #Westkeep revolution paths, MPA republicans or the Neutrality Countess
	id = westkeep.1
	immediate = {log = "[GetDateText]: [Root.GetName]: event westkeep.1"}
	title = westkeep.1.t
	desc = westkeep.1.d
	picture = GFX_event_medieval_castle_on_hill
	fire_only_once = yes
	is_triggered_only = yes
	option = { #side with the Marquess
		name = westkeep.1.a
		ai_chance = {
			factor = 50
		}
		custom_effect_tooltip = JRR_option_1_tp
		hidden_effect = {
			set_country_flag = JRR_monarchist
			set_politics = {
				ruling_party = neutrality
				elections_allowed = no
			}
			load_focus_tree = {
			    tree = westkeep_focus_marquess_1
			    keep_completed = yes
		    }
			complete_national_focus = JRR_b1
			JRR_marquess_aurel_discret = {
			    add_field_marshal_role = {
				    traits = { 
	                    griffon_race_trait 
						brilliant_strategist
						fast_planner
	                }
					desc = JRR_AUREL_DISCRET_DESC
                    skill = 2
                    attack_skill = 1
                    defense_skill = 2
                    planning_skill = 3
                    logistics_skill = 3
                }
			}
			add_ideas = JRR_MPA_resistance
			add_ideas = JRR_legacy_of_serfdom
			activate_mission = JRR_revolutionary_gain_support_mission
		}
	}
	option = { #side with the Colonel
		name = westkeep.1.b
		ai_chance = {
			factor = 50
		}
		custom_effect_tooltip = JRR_option_2_tp
		hidden_effect = {
			set_country_flag = JRR_revolutionary
			set_politics = {
				ruling_party = fascism
				elections_allowed = no
			}
			load_focus_tree = {
			    tree = westkeep_focus_colonel_1
			    keep_completed = yes
		    }
			complete_national_focus = JRR_a1
			JRR_colonel_colette_solide = {
			    add_field_marshal_role = {
				    traits = { 
	                    griffon_race_trait 
						politically_connected
						aggressive_assaulter
	                }
					desc = JRR_COLETTE_SOLIDE_DESC
                    skill = 3
                    attack_skill = 4
                    defense_skill = 2
                    planning_skill = 2
                    logistics_skill = 2
                }
			}
			JRR_rouge_guirlande = {
			    add_corps_commander_role = {
				    traits = { 
	                    pony_race_trait 
						hill_fighter
						trait_mountaineer
						adaptable
	                }
					desc = JRR_ROUGE_GUIRLANDE_DESC
                    skill = 3
                    attack_skill = 2
                    defense_skill = 1
                    planning_skill = 4
                    logistics_skill = 4
                }
			}
			add_ideas = JRR_marquess_resistance
			add_ideas = JRR_legacy_of_serfdom
			activate_mission = JRR_monarchist_gain_support_mission
		}
	}
}

country_event = { #Aurele and her buddies manage to retake Westkeep fully
	id = westkeep.2
	immediate = {log = "[GetDateText]: [Root.GetName]: event westkeep.2"}
	title = westkeep.2.t
	desc = westkeep.2.d
	picture = GFX_event_medieval_castle_on_hill
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = westkeep.2.a
		#Insert Westkeep Characters Here Once I get around to that part of development
		hidden_effect = {
			if = {
			    limit = {
				    JER = {
					    has_completed_focus = JER_fight_for_freedom
					}
				}
			    JER = { 
				    end_puppet = JRR 
				}
			    JRR = { 
				    drop_cosmetic_tag = yes 
				}
			    if = {
				    limit = {
					    JRR = {
						    is_in_faction_with = JER
					    }
				    }
				    JRR = {
					    leave_faction = yes
				    }
			    }
		    }
			if = {
				limit = { 
					JER = { 
						has_completed_focus = JER_fight_for_freedom 
					} 
				}
				declare_war_on = {
					target = JER
					type = annex_everything
				}
			}
		}
	}
}

country_event = { #Revolutionaries Take Control of Westkeep and kill off the Marquess
	id = westkeep.3
	immediate = {log = "[GetDateText]: [Root.GetName]: event westkeep.3"}
	title = westkeep.3.t
	desc = westkeep.3.d
	picture = GFX_event_griffon_back
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = westkeep.3.a
		#Insert Westkeep Characters Here Once I get around to that part of development
		hidden_effect = {
			if = {
			    limit = {
				    JER = {
					    has_completed_focus = JER_state_of_aquileia
					}
				}
			    JER = { 
				    end_puppet = JRR 
				}
			    JRR = { 
				    drop_cosmetic_tag = yes 
				}
			    if = {
				    limit = {
					    JRR = {
						    is_in_faction_with = JER
					    }
				    }
				    JRR = {
					    leave_faction = yes
				    }
			    }
		    }
			if = {
				limit = { 
					JER = { 
						has_completed_focus = JER_state_of_aquileia
					} 
				}
				declare_war_on = {
					target = JER
					type = annex_everything
				}
			}
		}
	}
}

country_event = { #Monarchist Support Debug
	id = westkeep_debug.1
	immediate = {log = "[GetDateText]: [Root.GetName]: event westkeep_debug.1"}
	title = westkeep_debug.1.t
	desc = westkeep_debug.1.d
	picture = GFX_event_medieval_castle_on_hill

	is_triggered_only = yes
	hidden = yes
	
	option = {
		name = westkeep_debug.1.a
		activate_mission = JRR_monarchist_gain_support_mission
	}
}

country_event = { #Republican Support Debug
	id = westkeep_debug.2
	immediate = {log = "[GetDateText]: [Root.GetName]: event westkeep_debug.2"}
	title = westkeep_debug.2.t
	desc = westkeep_debug.2.d
	picture = GFX_event_medieval_castle_on_hill

	is_triggered_only = yes
	hidden = yes
	
	option = {
		name = westkeep_debug.2.a
		activate_mission = JRR_revolutionary_gain_support_mission
	}
}