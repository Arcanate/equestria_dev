add_namespace = equestriadem
country_event = { #President Election
	id = equestriadem.1
	title = equestriadem.1.t
	desc = equestriadem.1.d
	picture = GFX_event_democratic_elections

	is_triggered_only = yes

	option = {
		name = equestriadem.1.a #Fancypants
		add_political_power = -35
		hidden_effect = { news_event = { days = 1 id = newseqsdem.7 } }
		create_country_leader = { name = "Fancy Pants" desc = "POLITICS_PANTS_DESC" picture = "Prez-PM_Pants.tga" expire = "1965.1.1" ideology = liberalism traits = { connected_diplomat } }
		ai_chance = { factor = 40 }
	}
	option = {
		name = equestriadem.1.b #Filthy Rich
		add_political_power = -35
		hidden_effect = { news_event = { days = 1 id = newseqsdem.6 } }
		create_country_leader = { name = "Filthy Rich" desc = "POLITICS_RICH_DESC" picture = "Prez-PM_Filth.tga" expire = "1965.1.1" ideology = liberalism traits = { rich_industrialist } }
		ai_chance = { factor = 30 }
	}
	option = {
		name = equestriadem.1.c #Mayor Mare
		add_political_power = -35
		hidden_effect = { news_event = { days = 1 id = newseqsdem.8 } }
		create_country_leader = { name = "Mayor Mare" desc = "POLITICS_MARE_DESC" picture = "Prez_Mare.tga" expire = "1965.1.1" ideology = liberalism traits = { populist } }
		ai_chance = { factor = 20 }
	}
	option = {
		name = equestriadem.1.e
		country_event = { hours = 1 id = equestriadem.10 }
		ai_chance = { factor = 10 }
	}
}
country_event = { #PM Election
	id = equestriadem.9
	immediate = {log = "[Root.GetName]: event equestriadem.9"}#Auto-logging
	title = equestriadem.9.t
	desc = equestriadem.9.d
	picture = GFX_event_democratic_elections

	is_triggered_only = yes

	option = {
		name = equestriadem.9.a #Blueblood
		add_political_power = -35
		hidden_effect = { news_event = { days = 1 id = newseqsdem.9 } }
		create_country_leader = { name = "Prince Blueblood" desc = "POLITICS_BLUEBLOOD_DESC" picture = "Blueblood.tga" expire = "1965.1.1" ideology = liberalism traits = { war_hero_general } }
		ai_chance = { factor = 30 }
		trigger = {
			has_unit_leader = 1
		}
	}
	option = {
		name = equestriadem.9.b #Filthy Rich
		add_political_power = -35
		hidden_effect = { news_event = { days = 1 id = newseqsdem.6 } }
		create_country_leader = { name = "Filthy Rich" desc = "POLITICS_RICH_DESC" picture = "Prez-PM_Filth.tga" expire = "1965.1.1" ideology = liberalism traits = { rich_industrialist } }
		ai_chance = { factor = 25 }
	}
	option = {
		name = equestriadem.9.c #Fancypants
		add_political_power = -35
		hidden_effect = { news_event = { days = 1 id = newseqsdem.7 } }
		create_country_leader = { name = "Fancy Pants" desc = "POLITICS_PANTS_DESC" picture = "Prez-PM_Pants.tga" expire = "1965.1.1" ideology = liberalism traits = { connected_diplomat } }
		ai_chance = { factor = 35 }
	}
	option = {
		name = equestriadem.9.e
		country_event = { hours = 1 id = equestriadem.11 }
		ai_chance = { factor = 10 }
	}
}
country_event = { #Moderates' Discontent
	id = equestriadem.8
	immediate = {log = "[Root.GetName]: event equestriadem.8"}#Auto-logging
	title = equestriadem.8.t
	desc = {
		trigger = { has_global_flag = equestrian_civil_war_ended }
		text = equestriadem.8.d_lcw
	}
	desc = {
		trigger = { has_global_flag = equestrian_com_civil_war_ended }
		text = equestriadem.8.d_com
	}
	desc = {
		trigger = { has_global_flag = equestrian_civil_war_daybreaker_ended }
		text = equestriadem.8.d_db
	}
	desc = {
		trigger = {
			OR = {
				has_global_flag = the_war_ended
				has_country_flag = EQS_had_big_war
			}
		}
		text = equestriadem.8.d_war
	}
	picture = GFX_event_moderates_discontent

	fire_only_once = yes

	trigger = {
		is_original_EQS = yes
		is_subject = no
		has_war = no
		has_government = democratic
		NOT = { has_country_flag = EQS_force_republic }
		OR = {
			has_country_flag = EQS_had_big_war
			has_global_flag = equestrian_com_civil_war_ended
			has_global_flag = equestrian_civil_war_ended
			has_global_flag = equestrian_civil_war_daybreaker_ended
			has_global_flag = the_war_ended
		}
		date > 1010.1.1
	}
	mean_time_to_happen = {
		days = 60
	}

	immediate = {
		hidden_effect = {
			if = {
				limit = { has_country_leader = { ruling_only = yes name = "Princess Luna" } }
				set_country_flag = EQD_dem_luna
			}
		}
	}

	option = {
		name = equestriadem.8.a
		add_ideas = popular_discontent
		if = {
			limit = { 
				has_country_leader = { ruling_only = yes name = "Princess Celestia" } 
				has_country_flag = { flag = celestia_evil_meter value > 32 }
			}
			load_focus_tree = equestria_focus_prevent
		}
		hidden_effect = { country_event = { days = 30 id = equestriadem.2 } }
	}
}
country_event = { #Democratic Opposition
	id = equestriadem.2
	immediate = {log = "[Root.GetName]: event equestriadem.2"}#Auto-logging
	title = equestriadem.2.t
	desc = equestriadem.2.d
	picture = GFX_event_democratic_opposition

	is_triggered_only = yes

	fire_only_once = yes
	option = { ##placeholder
		name = equestriadem.2.a
		hidden_effect = { country_event = { days = 30 id = equestriadem.6 } }
	}
}
country_event = { #Demand the Vote
	id = equestriadem.3
	immediate = {log = "[Root.GetName]: event equestriadem.3"}#Auto-logging
	title = equestriadem.3.t
	desc = equestriadem.3.d
	picture = GFX_event_demand_the_vote

	is_triggered_only = yes

	fire_only_once = yes
	option = { ##placeholder
		name = equestriadem.3.a
	}
}
country_event = { #The Vote
	id = equestriadem.4
	immediate = {log = "[Root.GetName]: event equestriadem.4"}#Auto-logging
	title = equestriadem.4.t
	desc = equestriadem.4.d
	picture = GFX_event_the_vote

	is_triggered_only = yes

	fire_only_once = yes

	option = { ##reaffirm
		trigger = { NOT = { has_country_flag = EQS_force_republic } }
		name = equestriadem.4.a
		set_country_flag = reaffirming_princessdom
		if = {
			limit = { NOT = { has_idea = alicorn_sisters } }
			if = {
				limit = { has_country_flag = EQS_dem_luna }
				add_ideas = lone_princess_luna
				else = { add_ideas = lone_princess }
			}
		}
		hidden_effect = { news_event = { days = 1 id = newseqsdem.1 } }
		ai_chance = { factor = 5 }
	}
	option = { ##diet
		name = equestriadem.4.b
		trigger = { NOT = { has_country_flag = EQS_force_republic } }
		set_country_flag = the_diet
		hidden_effect = { news_event = { days = 1 id = newseqsdem.2 } }
		set_party_name = { ideology = democratic long_name = EQS_diet_long name = EQS_diet }
		if = {
			limit = { NOT = { has_idea = alicorn_sisters } }
			if = {
				limit = { has_country_flag = EQS_dem_luna }
				add_ideas = lone_princess_luna
				else = { add_ideas = lone_princess }
			}
		}
		remove_country_leader_trait = princess_of_ponies
		ai_chance = {
			factor = 3
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
	option = { ##commonwealth
		name = equestriadem.4.c
		trigger = { NOT = { has_country_flag = EQS_force_republic } }
		set_country_flag = parliament_prime_minister
		hidden_effect = { news_event = { days = 1 id = newseqsdem.3 } }
		set_party_name = { ideology = democratic long_name = EQS_commonwealth_long name = EQS_commonwealth }
		country_event = { hours = 24 id = equestriadem.9 }
		if = {
			limit = { NOT = { has_idea = alicorn_sisters } }
			if = {
				limit = { has_country_flag = EQS_dem_luna }
				add_ideas = lone_princess_luna
				set_cosmetic_tag = EQS_DEM2L
				else = {
					add_ideas = lone_princess
					set_cosmetic_tag = EQS_DEM2
				}
			}
		}
		else = {
			set_cosmetic_tag = EQS_DEM2CL
		}
		remove_country_leader_trait = princess_of_ponies
		ai_chance = {
			factor = 2
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
	option = { ##republic
		name = equestriadem.4.e
		set_country_flag = congress_president
		hidden_effect = { news_event = { days = 1 id = newseqsdem.4 } }
		set_cosmetic_tag = EQS_DEM1
		set_party_name = { ideology = democratic long_name = EQS_republic_long name = EQS_republic }
		country_event = { hours = 24 id = equestriadem.1 }
		remove_ideas = alicorn_sisters
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
}
country_event = { ###Protest for democracy
	id = equestriadem.6
	immediate = {log = "[Root.GetName]: event equestriadem.6"}#Auto-logging
	title = equestriadem.6.t
	desc = equestriadem.6.d
	picture = GFX_event_democratic_protest

	is_triggered_only = yes

	fire_only_once = yes
	option = { ##placeholder
		name = equestriadem.6.a
		add_political_power = -50
		add_ideas = democratic_protest
		set_country_flag = demands_democracy
	}
}
country_event = { #PM Election pt 2
	id = equestriadem.11
	immediate = {log = "[Root.GetName]: event equestriadem.11"}#Auto-logging
	title = equestriadem.11.t
	desc = equestriadem.11.d
	picture = GFX_event_democratic_elections

	is_triggered_only = yes

	#option = {
	#	name = equestriadem.11.a #Copper Gearheart
	#	add_political_power = -35
	#	hidden_effect = { news_event = { days = 1 id = newseqsdem.10 } }
	#	create_country_leader = { name = "Copper Gearheart" desc = "POLITICS_GEARHEART_DESC" picture = "Prez-PM_Gear.tga" expire = "1965.1.1" ideology = liberalism traits = { industrial_researcher } }
	#	ai_chance = { factor = 25 }
	#}
	option = {
		name = equestriadem.11.b #Maxos Eternal
		add_political_power = -35
		hidden_effect = { news_event = { days = 1 id = newseqsdem.11 } }
		create_country_leader = { name = "Maxos Eternal" desc = "POLITICS_ETERNAL_DESC" picture = "Prez-PM_Maxos.tga" expire = "1965.1.1" ideology = liberalism traits = { rural_populist } }
		ai_chance = { factor = 25 }
	}
	option = {
		name = equestriadem.11.c #Ledd Metal Lol that name
		create_country_leader = { name = "Ledd Metal" desc = "POLITICS_LEAD_DESC" picture = "PM_Ledd_Metal.tga" expire = "1965.1.1" ideology = liberalism traits = { oddball } }
		add_political_power = -35
		hidden_effect = { news_event = { days = 1 id = newseqsdem.12 } }
		ai_chance = { factor = 25 }
	}
	option = {
		name = equestriadem.11.e
		country_event = { hours = 1 id = equestriadem.9 }
		ai_chance = { factor = 25 }
	}
}
country_event = { #President Election Pt 2
	id = equestriadem.10
	title = equestriadem.10.t
	desc = equestriadem.10.d
	picture = GFX_event_democratic_elections

	is_triggered_only = yes

	#option = {
	#	name = equestriadem.10.a #Copper Gearheart
	#	add_political_power = -35
	#	hidden_effect = { news_event = { days = 1 id = newseqsdem.10 } }
	#	create_country_leader = { name = "Copper Gearheart" desc = "POLITICS_GEARHEART_DESC" picture = "Prez-PM_Gear.tga" expire = "1965.1.1" ideology = liberalism traits = { industrial_researcher } }
	#	ai_chance = { factor = 25 }
	#}
	option = {
		name = equestriadem.10.b #Maxos Eternal
		hidden_effect = { news_event = { days = 1 id = newseqsdem.11 } }
		add_political_power = -35
		create_country_leader = { name = "Maxos Eternal" desc = "POLITICS_ETERNAL_DESC" picture = "Prez-PM_Maxos.tga" expire = "1965.1.1" ideology = liberalism traits = { rural_populist } }
		ai_chance = { factor = 25 }
	}
	option = {
		name = equestriadem.10.c #Ember Spark
		hidden_effect = { news_event = { days = 1 id = newseqsdem.13 } }
		create_country_leader = { name = "Ember Spark" desc = "POLITICS_SPARK_DESC" picture = "Prez_Ember.tga" expire = "1965.1.1" ideology = liberalism traits = { war_hero_grunt } }
		add_political_power = -35
		ai_chance = { factor = 25 }
	}
	option = {
		name = equestriadem.10.e
		country_event = { hours = 1 id = equestriadem.1 }
		ai_chance = { factor = 25 }
	}
}

country_event = { #Prevent the vote
	id = equestriadem.12
	immediate = {log = "[Root.GetName]: event equestriadem.12"}#Auto-logging
	title = equestriadem.12.t
	desc = equestriadem.12.d
	picture = GFX_event_democratic_opposition

	is_triggered_only = yes

	fire_only_once = yes
	option = { ##placeholder
		name = equestriadem.12.a
		add_popularity = { ideology = democratic popularity = -0.1 }
	}
}

country_event = { #GRI gets warned
	id = equestriadem.13
	immediate = {log = "[Root.GetName]: event equestriadem.13"}#Auto-logging
	title = equestriadem.13.t
	desc = equestriadem.13.d
	picture = GFX_event_canterlot

	is_triggered_only = yes

	option = { ##placeholder
		name = equestriadem.13.a
		add_opinion_modifier = {
			target = FROM
			modifier = warned_us
		}
		set_global_flag = EQS_warned_GRI
		hidden_effect = { news_event = { id = newseqsdem.10 days = 2 } }
	}
}

country_event = { #EQS gets called
	id = equestriadem.14
	immediate = {log = "[Root.GetName]: event equestriadem.14"}#Auto-logging
	title = equestriadem.14.t
	desc = equestriadem.14.d
	picture = GFX_event_canterlot

	is_triggered_only = yes
	fire_only_once = yes
	trigger = {
		#has_country_leader = { ruling_only = yes name = "Prince Blueblood" }
		is_subject = no
		NOT = {
			has_country_flag = considering_dem14
			has_war_with = event_target:griffonian_empire
			is_in_faction_with = event_target:griffonian_empire
		}
	}

	option = {
		name = equestriadem.14.a
		ai_chance = {
			factor = 12
		}
		event_target:gri_enemy = {
			ROOT = {
				add_to_war = {
					targeted_alliance = PREV
					enemy = FROM
				}
			}
		}
	}

	option = {
		name = equestriadem.14.b
		ai_chance = {
			factor = 0
			modifier = {
				add = 6
				has_war = yes
			}
			modifier = {
				add = 6
				strength_ratio = { tag = event_target:griffonian_empire ratio < 0.7 }
			}
			modifier = {
				add = 10
				strength_ratio = { tag = event_target:griffonian_empire ratio < 0.4 }
			}
		}
		clr_global_flag = EQS_warned_GRI
		add_political_power = -300
		add_stability = -0.1
		add_war_support = -0.1
	}
}

country_event = { #CON invite
	id = equestriadem.15
	immediate = {log = "[Root.GetName]: event equestriadem.15"}#Auto-logging
	title = equestriadem.15.t
	desc = equestriadem.15.d
	picture = GFX_event_canterlot

	is_triggered_only = yes

	option = { ##ok
		name = equestriadem.15.a
		join_CON_effect = yes
		FROM = { country_event = { id = equestriadem.16 days = 1 } } 
		ai_chance = {
			base = opinion@FROM
			modifier = {
				factor = 2.5
				has_government = democratic
			}
			modifier = {
				factor = 0.66
				NOT = { has_government = democratic }
			}
			modifier = {
				factor = 0.66
				OR = {
					has_government = fascism
					AND = {
						has_government = communism
						OR = {
							has_country_flag = JER_AWPR_wins
							has_completed_focus = FEA_rozenkamp_strasserists
							has_country_leader = { ruling_only = yes name = "Sinister Serov" }
						}
					}
				}
			}
			modifier = {
				factor = 0.5
				is_major = yes
			}
			modifier = {
				factor = 2
				strength_ratio = {
					tag = FROM
					ratio < 0.6
				}
			}
			modifier = {
				factor = 0.66
				strength_ratio = {
					tag = FROM
					ratio > 0.9
				}
			}
			modifier = {
				factor = 1.2
				is_guaranteed_by = FROM
			}
		}
	}
	option = { ##noh
		name = equestriadem.15.a
		add_political_power = 35
		hidden_effect = { 
			FROM = { country_event = { id = equestriadem.17 days = 1 } } 
		}
		ai_chance = {
			base = opinion@FROM
		}
	}
}

country_event = { #CON invite accepted
	id = equestriadem.16
	immediate = {log = "[Root.GetName]: event equestriadem.16"}#Auto-logging
	title = equestriadem.16.t
	desc = equestriadem.16.d
	picture = GFX_event_canterlot

	is_triggered_only = yes

	option = { ##yay!
		name = equestriadem.16.a
	}
}

country_event = { #CON invite declined
	id = equestriadem.17
	immediate = {log = "[Root.GetName]: event equestriadem.17"}#Auto-logging
	title = equestriadem.17.t
	desc = equestriadem.17.d
	picture = GFX_event_canterlot

	is_triggered_only = yes

	option = { ##noh!
		name = equestriadem.17.a
	}
}

country_event = { #FROM leaves con
	id = equestriadem.18
	immediate = {log = "[Root.GetName]: event equestriadem.18"}#Auto-logging
	title = equestriadem.18.t
	desc = equestriadem.18.d
	picture = GFX_event_canterlot

	is_triggered_only = yes

	option = { ##noh!
		name = equestriadem.18.a
		effect_tooltip = {
			add_opinion_modifier = {
				target = FROM
				modifier = left_con
			}
		}
		add_ai_strategy = {
			id = FROM
			type = contain
			value = 100
		}
	}
}

country_event = { #Maintenance
	id = equestriadem.19
	immediate = {log = "[Root.GetName]: event equestriadem.19"}#Auto-logging
	hidden = yes

	trigger = {
		NOT = { has_idea = EQS_PR_convention_of_nations_member }
		has_opinion_modifier = con_bonus
	}

	mean_time_to_happen = { days = 2 }

	option = { ##noh!
		every_other_country = {
			limit = {
				has_opinion_modifier = con_bonus
			}
			remove_opinion_modifier = { target = ROOT modifier = con_bonus }
			remove_opinion_modifier = { target = PREV modifier = con_trading }
			ROOT = {
				remove_opinion_modifier = { target = PREV modifier = con_bonus }
				remove_opinion_modifier = { target = PREV modifier = con_trading }
				if = {
					limit = { has_global_flag = EQS_PR_integration_formed }
					add_ai_strategy = {
						id = PREV
						type = alliance
						value = -50
					}
					add_ai_strategy = {
						id = PREV
						type = support
						value = -50
					}
					add_ai_strategy = {
						id = PREV
						type = protect
						value = -50
					}
				}
				add_ai_strategy = {
					id = PREV
					type = alliance
					value = -25
				}
				add_ai_strategy = {
					id = PREV
					type = befriend
					value = -75
				}
				add_ai_strategy = {
					id = PREV
					type = antagonize
					value = 75
				}
			}
			if = {
				limit = { has_global_flag = EQS_PR_integration_formed }
				add_ai_strategy = {
					id = ROOT
					type = alliance
					value = -50
				}
				add_ai_strategy = {
					id = ROOT
					type = support
					value = -50
				}
				add_ai_strategy = {
					id = ROOT
					type = protect
					value = -50
				}
			}
			add_ai_strategy = {
				id = ROOT
				type = alliance
				value = -25
			}
			add_ai_strategy = {
				id = ROOT
				type = befriend
				value = -75
			}
			add_ai_strategy = {
				id = ROOT
				type = antagonize
				value = 75
			}
		}
		every_other_country = {
			ROOT = { remove_opinion_modifier = { target = PREV modifier = con_sanctions } }
		}
	}
}

country_event = { #Sanctions
	id = equestriadem.20
	immediate = {log = "[Root.GetName]: event equestriadem.20"}#Auto-logging
	title = equestriadem.20.t
	desc = equestriadem.20.d
	picture = GFX_event_canterlot

	is_triggered_only = yes

	option = { ##noh!
		name = equestriadem.20.a
		add_opinion_modifier = { target = FROM modifier = sanctioned_us }
		every_other_country = {
			limit = {
				OR = {
					has_idea = EQS_PR_convention_of_nations_member
					has_idea = EQS_PR_convention_of_nations_leader
				}
			}
			add_opinion_modifier = { target = ROOT modifier = con_sanctions }
		}
	}
}

country_event = { #Maintenance
	id = equestriadem.21
	immediate = {log = "[Root.GetName]: event equestriadem.21"}#Auto-logging
	hidden = yes

	trigger = {
		event_target:equestria = { has_idea = EQS_PR_convention_of_nations_leader }
		NOT = { has_idea = EQS_PR_convention_of_nations_leader has_idea = EQS_PR_convention_of_nations_member }
		OR = {
			is_in_faction_with = event_target:equestria
			is_subject_of = event_target:equestria
		}
	}

	mean_time_to_happen = { days = 2 }

	option = {
		join_CON_effect = yes
	}
}
