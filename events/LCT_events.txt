add_namespace = lakecity
add_namespace = lakecity_news

### Intro Event ###
country_event = {
	id = lakecity.1
	immediate = {log = "[Root.GetName]: event lakecity.1"}#Auto-logging
	title = lakecity.1.t
	desc = lakecity.1.d
	picture = GFX_event_lake_city

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			country_event = { id = lakecity.2 days = 10 }
		}
	}

	option = {
		name = lakecity.1.a
	}
}

### Political Background ###
country_event = {
	id = lakecity.2
	immediate = {log = "[Root.GetName]: event lakecity.2"}#Auto-logging
	title = lakecity.2.t
	desc = lakecity.2.d
	picture = GFX_event_lake_city

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			country_event = { id = lakecity.3 days = 5 }
		}
	}

	option = {
		name = lakecity.2.a
	}
}

### Wavebreaker Speaks ###
country_event = {
	id = lakecity.3
	immediate = {log = "[Root.GetName]: event lakecity.3"}#Auto-logging
	title = lakecity.3.t
	desc = lakecity.3.d
	#picture = 

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			country_event = { id = lakecity.4 days = 5 }
		}
	}

	option = {
		name = lakecity.3.a
	}
}

### Westerly does something ###
country_event = {
	id = lakecity.4
	immediate = {log = "[Root.GetName]: event lakecity.4"}#Auto-logging
	title = lakecity.4.t
	desc = lakecity.4.d
	#picture = 

	immediate = {
		hidden_effect = {
			country_event = { id = lakecity.5 days = 13 }
		}
	}

	is_triggered_only = yes

	option = {
		name = lakecity.4.a
	}
}

#The Coup
country_event = {
	id = lakecity.5
	immediate = {log = "[Root.GetName]: event lakecity.5"}#Auto-logging
	title = lakecity.5.t
	desc = lakecity.5.d
	#picture = 

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			add_stability = -0.3 
		}
	}

	option = { # Wavebreaker
		name = lakecity.5.a
		ai_chance = {
			base = 10
			modifier = {
				factor = 10
				is_historical_focus_on = yes
			}
		}

		custom_effect_tooltip = LCT_coup_fail_tt

		hidden_effect = {
			complete_national_focus = LCT_democracy_prevails
			set_global_flag = LCT_coup_delt_with_peacefully
			country_event = { days = 2 id = lakecity.6 }
			news_event = { days = 1 id = lakecity_news.1 }
		}
	}
	option = { # Westerly
		name = lakecity.5.b

		ai_chance = {
			base = 4
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}

		custom_effect_tooltip = LCT_westerly_is_sent_in_tt
		hidden_effect = {
			set_country_flag = LCT_vanguard_sent_in
			complete_national_focus = LCT_vanguard_restores_order
			country_event = { days = 2 id = lakecity.7 }
		}
	}
	option = { # Prince
		name = lakecity.5.c

		ai_chance = {
			base = 5
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}

		custom_effect_tooltip = LCT_coup_sucsess_tt
		hidden_effect = {
			country_event = { days = 2 id = lakecity.8 }
			news_event = { days = 1 id = lakecity_news.2 }
		}
	}
}

#The Coup Fails
country_event = {
	id = lakecity.6
	immediate = {log = "[Root.GetName]: event lakecity.6"}#Auto-logging
	title = lakecity.6.t
	desc = lakecity.6.d
	#picture = 

	is_triggered_only = yes

	option = {
		name = lakecity.6.a
	}
}

#Westerly's choice
country_event = {
	id = lakecity.7
	immediate = {log = "[Root.GetName]: event lakecity.7"}#Auto-logging
	title = lakecity.7.t
	desc = lakecity.7.d
	#picture = 

	is_triggered_only = yes

	option = { #Allow Elections
		name = lakecity.7.a
		add_stability = 0.1
		hidden_effect = {
			news_event = { days = 1 id = lakecity_news.1 }
		}
	}
	option = { #Take Control
		name = lakecity.7.b

		set_political_party = { ideology = fascism popularity = 20 }
		set_politics = { ruling_party = fascism elections_allowed = no }

		hidden_effect = {
			news_event = { days = 1 id = lakecity_news.3 }
			set_global_flag = LCT_vanguard_chosen
		}
	}
}

#The Coup Wins
country_event = {
	id = lakecity.8
	immediate = {log = "[Root.GetName]: event lakecity.8"}#Auto-logging
	title = lakecity.8.t
	desc = lakecity.8.d
	#picture = 

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			kill_country_leader = yes
			create_country_leader = {
				name = "Wild Tree"
				desc = "POLITICS_WILDTREE_DESC"
				picture = "WildTree.dds"
				expire = "1989.1.1"
				ideology = fascism_ideology
				traits = {
				}
			}
			set_party_name = {
				ideology = fascism
				long_name = LCT_prince_faction_long
				name = LCT_prince_faction
			}
			if = {
				limit = { has_cosmetic_tag = RIV_federation_mem }
				set_cosmetic_tag = LCT_prince_ally
			}
			else = {
				set_cosmetic_tag = LCT_prince
			}
			set_political_party = { ideology = fascism popularity = 20 }
			set_politics = { ruling_party = fascism elections_allowed = no }
		}
	}

	option = {
		name = lakecity.8.a
		hidden_effect = {
			set_global_flag = LCT_prince_restored
		}
	}
}

# Election 1007
country_event = {
	id = lakecity.9
	immediate = {log = "[Root.GetName]: event lakecity.9"}#Auto-logging
	title = lakecity.9.t
	desc = lakecity.9.d
	picture = GFX_report_event_usa_election_generic
	
	fire_only_once = yes
	
	trigger = {
		original_tag = LCT
		OR = {
			has_government = neutrality
			has_government = democratic
		}
		NOT = { has_country_flag =  LCT_election_1007 }
	}
	
	is_triggered_only = yes 
	
	immediate = {
		hidden_effect = {
			set_country_flag = LCT_election_1007
			create_country_leader = {
				name = "Wavebreaker"
				desc = "POLITICS_WAVEBREAKER_DESC"
				picture = "WaveBreaker.tga"
				expire = "1965.1.1"
				ideology = centrism
				traits = {
					dislikes_griffon_empire
				}
				id = 903
			}
		}
	}
	
	option = { #Wavebreaaker
		name = lakecity.9.a
		ai_chance = {
			factor = 10
		}
		custom_effect_tooltip = LCT_wavebreaker_elected_effect_tt
		set_global_flag = LCT_wavebreaker_elected
	}
	
	option = { #Westerly
		name = lakecity.9.b
		ai_chance = {
			factor = 6
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		custom_effect_tooltip = LCT_westerly_elected_effect_tt
		add_popularity = { ideology = fascism popularity = 0.20 }
		set_political_party = { ideology = fascism popularity = 20 }
		set_politics = { ruling_party = fascism elections_allowed = no }
		set_global_flag = LCT_westerly_elected
	}
}

#LCT demmands DEP
country_event = {
	id = lakecity.10
	immediate = {log = "[Root.GetName]: event lakecity.10"}#Auto-logging
	title = lakecity.10.t
	desc = lakecity.10.d
	#picture = 

	is_triggered_only = yes

	option = { #Ok
		name = lakecity.10.a
		ai_chance = {
			factor = 10
		}
		FROM = { country_event = lakecity.11 }
		effect_tooltip = {
			FROM = { puppet = ROOT }
		}
	}
	option = { #No
		name = lakecity.10.b
		ai_chance = {
			factor = 3
		}
		FROM = { country_event = lakecity.12 }
	}
}
#DEP says yes
country_event = {
	id = lakecity.11
	immediate = {log = "[Root.GetName]: event lakecity.11"}#Auto-logging
	title = lakecity.11.t
	desc = lakecity.11.d
	#picture = 

	is_triggered_only = yes

	option = { #Yes!
		name = lakecity.11.a

		if = {
			limit = {
				has_dlc = "Together for Victory"
			}
			DEP = { get_current_government_type = yes }
			set_autonomy = {
				target = DEP
				autonomous_state = autonomy_integrated_puppet
			}
			DEP = { restore_previous_government_type = yes }
		}
		else = {
			puppet = FROM
		}
	}
}
#DEP says no
country_event = {
	id = lakecity.12
	immediate = {log = "[Root.GetName]: event lakecity.12"}#Auto-logging
	title = lakecity.12.t
	desc = lakecity.12.d
	#picture = 

	is_triggered_only = yes

	option = { #Ok...
		name = lakecity.12.a
		create_wargoal = {
			type = puppet_wargoal_focus
			target = FROM
		}
	}
	#option = { #Press
	#	name = lakecity.12.b
	#	
	#}
}

#Buckrovic Incident
country_event = {
	id = lakecity.13
	immediate = {log = "[Root.GetName]: event lakecity.13"}#Auto-logging
	title = lakecity.13.t
	desc = lakecity.13.d
	picture = GFX_event_griffons_machine_gun


	is_triggered_only = yes

	option = { # We will fight!
		name = lakecity.13.a
		ai_chance = { factor = 90 }
		effect_tooltip = {
			FROM = {
				add_war_support = 0.05
				country_event = { id = lakecity.14 }
				create_wargoal = {
  					type = annex_everything
  					target = LNS
  				}
  				create_wargoal = {
  					type = annex_everything
  					target = HLQ
  				}
			}
		}
		hidden_effect = {
			FROM = { country_event = { id = lakecity.14 } }
		}
	}
	option = { # Make more concessions
		name = lakecity.13.b
		ai_chance = { factor = 10 }
		FROM = {
			set_truce = { target = ROOT days = 180 }
			effect_tooltip = {
				transfer_state = 552
				transfer_state = 505
				add_state_claim = 540
			}
			country_event = { id = lakecity.15 }
		}
	}
}

# Longsword Refuse Concessions
country_event = {
	id = lakecity.14
	title = lakecity.13.t
	desc = lakecity.14.d
	picture = GFX_event_griffons_machine_gun

	is_triggered_only = yes
	
	option = {
		name = lakecity.14.a
		create_wargoal = {
  			type = annex_everything
  			target = LNS
  		}
  		create_wargoal = {
  			type = annex_everything
  			target = HLQ
  		}
		hidden_effect = {
			news_event = { days = 1 id = lakecity_news.4 }
		}
	}
}

# Longsword Concessions
country_event = {
	id = lakecity.15
	title = lakecity.13.t
	desc = lakecity.15.d
	picture = GFX_event_griffons_machine_gun
	
	is_triggered_only = yes
	
	option = {
		name = lakecity.15.a
		effect_tooltip = {
			set_truce = { target = FROM days = 180 }
		}
		hidden_effect = {
			news_event = { days = 1 id = lakecity_news.5 }
		}
		if = {
			limit = {
				552 = {
					is_controlled_by = FROM
				}
			}
			LCT = {
				transfer_state = 552
			}
		}
		if = {
			limit = {
				505 = {
					is_controlled_by = FROM
				}
			}
			LCT = {
				transfer_state = 505
			}
		}
		add_state_claim = 540
		
		add_ai_strategy = {
			type = antagonize
			id = "LNS"
			value = 500
		}
		add_ai_strategy = {
			type = antagonize
			id = "HLQ"
			value = 500
		}

		hidden_effect = {
			GRI = {
				country_event = { id = lakecity.16 days = 3 }
			}
		}
	}
}

# The Longsword Problem
country_event = {
	id = lakecity.16
	title = lakecity.16.t
	desc = lakecity.16.d
	#picture = GFX_event_griffons_machine_gun

	is_triggered_only = yes

	trigger = {
		LNS = { exists = yes }
	}
	
	option = {
		name = lakecity.16.a
		ai_chance = {
			factor = 100
		}
		LNS = { country_event = { id = lakecity.17 days = 1 } }
	}
	option = { # Do Nothing
		name = lakecity.17.a
		ai_chance = {
			factor = 0
		}
	}
}

# LNS Annex by GRI
country_event = {
	id = lakecity.17
	title = lakecity.17.t
	desc = lakecity.17.d
	#picture = GFX_event_griffons_machine_gun

	is_triggered_only = yes
	
	option = { # Acept Annexation
		name = lakecity.17.a
		ai_chance = {
			factor = 100
		}
		custom_effect_tooltip = GAME_OVER_TT
		GRI = { country_event = { id = lakecity.18 days = 1 } }
		effect_tooltip = {
			every_unit_leader = {
				set_nationality = GRI
			}
			if = {
				limit = { has_navy_size = { size > 0 } }
				transfer_navy = { target = GRI }
			}			
			GRI = {
				annex_country = { target = ROOT transfer_troops = yes }
			}
		}		
	}
	option = { # Do Nothing
		name = lakecity.17.b
		GRI = { country_event = { id = lakecity.19 days = 1 } }
		ai_chance = {
			factor = 0
		}
	}
}

# LNS Annexed by GRI
country_event = {
	id = lakecity.18
	title = lakecity.18.t
	desc = lakecity.18.d
	#picture = GFX_event_griffons_machine_gun

	is_triggered_only = yes
	
	option = {
		name = lakecity.18.a
		
		540 = {
			if = {
				limit = { is_owned_by = LNS }
				add_core_of = GRI
			}
		}
		LNS = {
			every_unit_leader = {
				set_nationality = GRI
			}
			if = {
				limit = { has_navy_size = { size > 0 } }
				transfer_navy = { target = GRI }
			}			
		}
		annex_country = { target = LNS transfer_troops = yes }
		
	}
}

# LNS said no
country_event = {
	id = lakecity.19
	title = lakecity.19.t
	desc = lakecity.19.d
	#picture = GFX_event_griffons_machine_gun

	is_triggered_only = yes
	
	option = {
		name = lakecity.19.a
	}
}

#############################
######## NEWS EVENTS ########
#############################

#Coup Failed
news_event = {
	id = lakecity_news.1
	immediate = {log = "[Root.GetName]: event lakecity_news.1"}#Auto-logging
	title = lakecity_news.1.t
	desc = lakecity_news.1.d
	picture = GFX_news_ponies_last_stand

	major = yes

	is_triggered_only = yes

	option = {		
		name = lakecity_news.1.a
	}
}

#Coup Sucsess
news_event = {
	id = lakecity_news.2
	immediate = {log = "[Root.GetName]: event lakecity_news.2"}#Auto-logging
	title = lakecity_news.2.t
	desc = lakecity_news.2.d
	picture = GFX_news_ponies_last_stand

	major = yes

	is_triggered_only = yes

	option = {		
		name = lakecity_news.2.a
	}
}

#Westerly Seized Power
news_event = {
	id = lakecity_news.3
	immediate = {log = "[Root.GetName]: event lakecity_news.3"}#Auto-logging
	title = lakecity_news.3.t
	desc = lakecity_news.3.d
	picture = GFX_news_ponies_last_stand

	major = yes

	is_triggered_only = yes

	option = {		
		name = lakecity_news.3.a
	}
}

# Buckrovic Incident - WAR
news_event = {
	id = lakecity_news.4
	title = lakecity.13.t
	desc = lakecity_news.4.d
	picture = GFX_news_event_001
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = lakecity_news.4.a
		trigger = {
			NOT = {
				TAG = LCT
				TAG = LNS
				TAG = HLQ
			}
		}
	}
	option = {
		name = lakecity_news.4.b
		trigger = { TAG = LCT }
	}
	option = {
		name = lakecity_news.4.c
		trigger = { OR = { TAG = LNS TAG = HLQ } }
	}
}

# Buckrovic Incident - PEACE
news_event = {
	id = lakecity_news.5
	title = lakecity.13.t
	desc = lakecity_news.5.d
	picture = GFX_news_event_018
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = lakecity_news.5.a
		trigger = {
			NOT = {
				TAG = LCT
				TAG = LNS
				TAG = HLQ
			}
		}
	}
	option = {
		name = lakecity_news.5.b
		trigger = { TAG = LCT }
	}
	option = {
		name = lakecity_news.5.c
		trigger = { OR = { TAG = LNS TAG = HLQ } }
	}
}