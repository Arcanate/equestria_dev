# Augenis and Void were here

add_namespace = maretania
add_namespace = marcsi

country_event = { ### The Ruins of Something Great
	id = maretania.0
	immediate = {log = "[GetDateText]: [Root.GetName]: event maretania.0"}
	title = maretania.0.t
	desc = maretania.0.d
	picture = GFX_event_green_mountain

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = maretania.0.a
	}
}

country_event = { ### The Cave
	id = maretania.1
	immediate = {log = "[GetDateText]: [Root.GetName]: event maretania.1"}
	title = maretania.1.t
	desc = maretania.1.d
	picture = GFX_event_cave

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = maretania.1.a
		remove_ideas = MTA_legacy_of_storm
		custom_effect_tooltip = MTA_open_cave_tt
		set_country_flag = MTA_opened_cave_flag # this flag needs to be set or clr whenever the cave needs to be accessible, fyi
		hidden_effect = {
			country_event = { id = maretania.4 days = 3 }
		}
	}
}

country_event = { ### The Analysis Committee
	id = maretania.2
	immediate = {log = "[GetDateText]: [Root.GetName]: event maretania.2"}
	title = maretania.2.t
	desc = maretania.2.d
	picture = GFX_event_cave

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = maretania.2.a
		add_popularity = {
			ideology = communism
			popularity = 0.04
		}
	}
}
country_event = { ### The Outreach Office
	id = maretania.3
	immediate = {log = "[GetDateText]: [Root.GetName]: event maretania.3"}
	title = maretania.3.t
	desc = maretania.3.d
	picture = GFX_event_cave

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = maretania.3.a
		add_popularity = {
			ideology = neutrality
			popularity = 0.04
		}
	}
}
country_event = { ### The Outreach Office
	id = maretania.4
	immediate = {log = "[GetDateText]: [Root.GetName]: event maretania.4"}
	title = maretania.4.t
	desc = maretania.4.d
	picture = GFX_event_crystal_library

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = maretania.4.a
		activate_mission = MTA_quarterly_review
	}
}

####

country_event = { ### Artifact Experimentation
	id = marcsi.1
	immediate = {log = "[GetDateText]: [Root.GetName]: event marcsi.1"}
	title = marcsi.1.t
	desc = marcsi.1.d
	picture = GFX_event_cave

	is_triggered_only = yes

	option = {
		trigger = {
			FROM = {
				NOT = {
					set_state_flag = MTA_figured_out_threat_flag
				}
			}
		}
		name = marcsi.1.a
		custom_effect_tooltip = MTA_experiment_tt
		country_event = marcsi.2
	}
	option = {
		trigger = {
			FROM = {
				NOT = {
					set_state_flag = MTA_activated_artifact_flag
				}
			}
		}
		name = marcsi.1.b
		custom_effect_tooltip = MTA_activate_tt
		country_event = marcsi.3
	}
	option = {
		name = marcsi.1.c
		custom_effect_tooltip = MTA_secure_tt
		FROM = { set_state_flag = MTA_sealed_artifact_flag }
		MTA_deactivate_artifact_effect = yes
		clear_array = ROOT.MTA_tested_artifact
	}
}

country_event = { ### Experiment
	id = marcsi.2
	immediate = {log = "[GetDateText]: [Root.GetName]: event marcsi.2"}
	title = marcsi.2.t
	desc = {
		text = marcsi.2.d1
		trigger = { 
			1 = { is_in_array = { MTA.MTA_tested_artifact = THIS }}
		}
	}
	desc = {
		text = marcsi.2.d2
		trigger = { 
			3 = { is_in_array = { MTA.MTA_tested_artifact = THIS }}
		}
	}
	# ^ make a new desc entry for each artifact.
	picture = GFX_event_cave

	is_triggered_only = yes

	option = {
		name = marcsi.2.a
		custom_effect_tooltip = MTA_experimented_tt
		for_each_scope_loop = {
			array = ROOT.MTA_tested_artifact
			set_state_flag = MTA_figured_out_threat_flag
		}
		clear_array = ROOT.MTA_tested_artifact
	}
}
country_event = { ### Activate
	id = marcsi.3
	immediate = {log = "[GetDateText]: [Root.GetName]: event marcsi.3"}
	title = marcsi.3.t
	desc = {
		text = marcsi.3.d1
		trigger = { 
			1 = { is_in_array = { MTA.MTA_tested_artifact = THIS }}
		}
	}
	desc = {
		text = marcsi.3.d2
		trigger = { 
			3 = { is_in_array = { MTA.MTA_tested_artifact = THIS }}
		}
	}
	# ^ make a new desc entry for each artifact.
	picture = GFX_event_cave

	is_triggered_only = yes

	option = {
		name = marcsi.3.a
		for_each_scope_loop = {
			array = ROOT.MTA_tested_artifact
			set_state_flag = MTA_activated_artifact_flag
		}
		MTA_activate_artifact_effect = yes
		clear_array = ROOT.MTA_tested_artifact
	}
}
country_event = { ### Test event
	id = marcsi.4
	immediate = {log = "[GetDateText]: [Root.GetName]: event marsci.4"}
	title = marcsi.4.t
	desc = marcsi.4.d
	picture = GFX_event_cave

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = marcsi.4.a
		3 = { add_to_array = { ROOT.MTA_owned_artifacts = THIS } } # Void's new event
		add_to_variable = { MTA_number_of_artifacts = 1 }
	}
}
