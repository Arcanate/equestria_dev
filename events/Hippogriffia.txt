add_namespace = hippogriff
add_namespace = hippogriff_border_conflict

#For NUM - Hippogriffs have made us a monarchy.
country_event = {
	id = hippogriff.1
	immediate = {log = "[Root.GetName]: event hippogriff.1"}#Auto-logging
	title = hippogriff.1.t
	desc = hippogriff.1.d

	#picture = GFX_event_equestria_fail

	is_triggered_only = yes

	option = {
		name = hippogriff.1.a
		effect_tooltip = {
			add_stability = 0.1
			if = {
				limit = {
					has_government = neutrality
				}
				set_politics = {
					ruling_party = neutrality
					elections_allowed = no
				}
				create_country_leader = {
					name = "King Zaru Maqar"
					expire = "1965.1.1"
					#portrait_path = "gfx/leaders/Hippogriff/portrait_hippogriff_generic_land_1.dds"
					ideology = despotism
					traits = {

					}
				}
			}
			else_if = {
				limit = {
					has_government = fascism
				}
				set_politics = {
					ruling_party = fascism
					elections_allowed = no
				}
				create_country_leader = {
					name = "King Zaru Maqar"
					expire = "1965.1.1"
					#portrait_path = "gfx/leaders/Hippogriff/portrait_hippogriff_generic_land_1.dds"
					ideology = rexism
					traits = {

					}
				}
			}
			else = {
				set_politics = {
					ruling_party = democratic
					elections_allowed = no
				}
				create_country_leader = {
					name = "King Zaru Maqar"
					expire = "1965.1.1"
					#portrait_path = "gfx/leaders/Hippogriff/portrait_hippogriff_generic_land_1.dds"
					ideology = conservatism
					traits = {

					}
				}
			}
		}
	}
}

#For NUM - Hippogriffs have made us a Federation.
country_event = {
	id = hippogriff.2
	immediate = {log = "[Root.GetName]: event hippogriff.2"}#Auto-logging
	title = hippogriff.2.t
	desc = hippogriff.2.d

	#picture = GFX_event_equestria_fail

	is_triggered_only = yes

	option = {
		name = hippogriff.2.a
		effect_tooltip = {
			add_stability = 0.1	
			if = {
				limit = {
					has_government = neutrality
				}
				set_politics = {
					ruling_party = neutrality
					elections_allowed = yes
				}
				create_country_leader = {
					name = "Federal Council"
					expire = "1965.1.1"
					#portrait_path = "gfx/leaders/Hippogriff/portrait_hippogriff_generic_land_1.dds"
					ideology = moderatism
					traits = {

					}
				}
			}
			else_if = {
				limit = {
					has_government = fascism
				}
				set_politics = {
					ruling_party = fascism
					elections_allowed = no
				}
				create_country_leader = {
					name = "Federal Council"
					expire = "1965.1.1"
					#portrait_path = "gfx/leaders/Hippogriff/portrait_hippogriff_generic_land_1.dds"
					ideology = fascism_ideology
					traits = {

					}
				}
			}
			else_if = {
				limit = {
					has_government = communism
				}
				set_politics = {
					ruling_party = communism
					elections_allowed = no
				}
				create_country_leader = {
					name = "Federal Council"
					expire = "1965.1.1"
					#portrait_path = "gfx/leaders/Hippogriff/portrait_hippogriff_generic_land_1.dds"
					ideology = marxism
					traits = {

					}
				}
			}
			else = {
				set_politics = {
					ruling_party = democratic
					elections_allowed = yes
				}
				create_country_leader = {
					name = "Federal Council"
					expire = "1965.1.1"
					#portrait_path = "gfx/leaders/Hippogriff/portrait_hippogriff_generic_land_1.dds"
					ideology = liberalism
					traits = {

					}
				}
			}
		}		
	}
}

#For NUM - Hippogriffs have assumed control.
country_event = {
	id = hippogriff.3
	immediate = {log = "[Root.GetName]: event hippogriff.3"}#Auto-logging
	title = hippogriff.3.t
	desc = hippogriff.3.d

	#picture = GFX_event_equestria_fail

	is_triggered_only = yes

	option = {
		name = hippogriff.3.a
		effect_tooltip = {
			add_stability = -0.15
			add_political_power = 50
			if = {
				limit = { has_dlc = "Together for Victory" }
				FROM = {
					set_autonomy = {
						target = NUM
						autonomy_state = autonomy_puppet
					}
				}				
			}
			if = {
				limit = {
					has_government = neutrality
				}
				set_politics = {
					ruling_party = neutrality
					elections_allowed = no
				}
				create_country_leader = {
					name = "Nimbus Cloudstriker"
					expire = "1965.1.1"
					ideology = moderatism
					traits = {

					}
				}
			}
			else_if = {
				limit = {
					has_government = fascism
				}
				set_politics = {
					ruling_party = fascism
					elections_allowed = no
				}
				create_country_leader = {
					name = "Nimbus Cloudstriker"
					expire = "1965.1.1"
					ideology = fascism_ideology
					traits = {

					}
				}
			}
			else_if = {
				limit = {
					has_government = communism
				}
				set_politics = {
					ruling_party = communism
					elections_allowed = no
				}
				create_country_leader = {
					name = "Chrismon Seaweed"
					expire = "1965.1.1"
					ideology = marxism
					traits = {

					}
				}
			}
			else = {
				set_politics = {
					ruling_party = democratic
					elections_allowed = no
				}
				create_country_leader = {
					name = "Nimbus Cloudstriker"
					expire = "1965.1.1"
					ideology = conservatism
					traits = {

					}
				}
			}
		}
	}
}

#Free the Mandate
country_event = {
	id = hippogriff.4
	title = hippogriff.4.t
	desc = hippogriff.4.d
	immediate = {log = "[Root.GetName]: event hippogriff.4"}#Auto-logging
	#picture = 

	trigger = {
		tag = HIP
		has_global_flag = wingnot_accords_prommissed		
		NUM = {
			NOT = { has_idea = HIP_wingnot_accords }
			is_puppet_of = HIP
		}
	}
	
	mean_time_to_happen = {
		days = 30
	}
	
	option = {
		name = hippogriff.4.a
		set_global_flag = wingnot_accords_promise_true
		end_puppet = NUM
		ai_chance = {
			factor = 10
		}
	}

	option = {
		name = hippogriff.4.b
		ai_chance = {
			factor = 1
			modifier = {
				has_government = fascism
				factor = 100
			}
		}
		set_global_flag = wingnot_accords_promise_broke
		NUM = {
			add_stability = -0.3
			add_war_support = -0.2
		}
	}
}

#The Wingnot Accords
country_event = {
	id = hippogriff.5
	title = hippogriff.5.t
	desc = hippogriff.5.d
	immediate = {log = "[Root.GetName]: event hippogriff.5"}#Auto-logging
	#picture = 

	is_triggered_only = yes
	
	option = {#5 yaers
		name = hippogriff.5.a
		set_global_flag = wingnot_accords_prommissed
		ai_chance = {
			factor = 1
		}
		NUM = {
			set_country_flag = wingnot_accords_5
			add_stability = 0.1
			add_timed_idea = { idea = HIP_wingnot_accords days = 1800 }
			remove_ideas = NUM_call_for_freedom
			hidden_effect = {
				country_event = hippogriff.6
			}
		}
	}

	option = {#10 years
		name = hippogriff.5.b
		ai_chance = {
			factor = 2
		}
		set_global_flag = wingnot_accords_prommissed
		NUM = {
			set_country_flag = wingnot_accords_10
			add_timed_idea = { idea = HIP_wingnot_accords days = 3600 }
			remove_ideas = NUM_call_for_freedom
			hidden_effect = {
				country_event = hippogriff.6
			}
		}
	}
}

#The Wingnot Accords - For NUM
country_event = {
	id = hippogriff.6
	title = hippogriff.6.t
	desc = hippogriff.6.d
	immediate = {log = "[Root.GetName]: event hippogriff.6"}#Auto-logging
	#picture = 

	is_triggered_only = yes
	
	option = {#5 yaers
		name = hippogriff.6.a
		trigger = {
			has_country_flag = wingnot_accords_5
		}
		effect_tooltip = {
			add_stability = 0.1
			add_timed_idea = { idea = HIP_wingnot_accords days = 1800 }
			remove_ideas = NUM_call_for_freedom
		}
	}

	option = {#10 years
		name = hippogriff.6.b
		trigger = {
			has_country_flag = wingnot_accords_10
		}
		effect_tooltip = {
			add_timed_idea = { idea = HIP_wingnot_accords days = 3600 }
			remove_ideas = NUM_call_for_freedom
		}		
	}
}

#Demmand Nation to Submit
country_event = {
	id = hippogriff_border_conflict.1
	title = hippogriff_border_conflict.1.t
	desc = hippogriff_border_conflict.1.d
	immediate = {log = "[Root.GetName]: event hippogriff_border_conflict.1"}#Auto-logging
	#picture = 

	is_triggered_only = yes
	
	option = { # Accept demands
		name = hippogriff_border_conflict.1.a
		ai_chance = {
			base = 5
			modifier = {
				factor = 0
				OR = {
					any_other_country = {
						OR = {
							is_in_faction_with = ROOT
							has_guaranteed = ROOT
						}
					}
					FROM = { surrender_progress > 0.2 }
				}
			}
		}
		FROM = {
			country_event = { days = 1 id = hippogriff_border_conflict.2 }
		}
		custom_effect_tooltip = GAME_OVER_TT
	}

	option = { # Refuse
		name = hippogriff_border_conflict.1.b
		ai_chance = {
			base = 5
			modifier = {
				add = 10
				OR = {
					any_other_country = {
						is_in_faction_with = ROOT
					}
				}
			}
			modifier = {
				add = 5
				any_other_country = {
					has_guaranteed = ROOT
				}
			}
		}

		FROM = {
			country_event = { days = 1 id = hippogriff_border_conflict.3 }
			effect_tooltip = {
				create_wargoal = {
					type = annex_everything
					target = ROOT
				}	
			}
		}
	}
}

# Nation Submits
country_event = {
	id = hippogriff_border_conflict.2
	title = hippogriff_border_conflict.2.t
	desc = hippogriff_border_conflict.2.d
	#picture = GFX_report_event_soviet_invasion_map
	
	is_triggered_only = yes
	
	option = {
		name = hippogriff_border_conflict.2.a
		NUM = {
			annex_country = { target = FROM }
		}		
	}
}

# Nation Submits
country_event = {
	id = hippogriff_border_conflict.3
	title = hippogriff_border_conflict.3.t
	desc = hippogriff_border_conflict.3.d
	#picture = GFX_report_event_soviet_invasion_map
	
	is_triggered_only = yes
	
	option = {
		name = hippogriff_border_conflict.3.a
		create_wargoal = {
			type = annex_everything
			target = FROM
		}		
	}
}

