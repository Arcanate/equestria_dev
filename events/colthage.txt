add_namespace = colthage_sicameon_murder
add_namespace = colthage_civil_war

# A Murder in Scarlet
country_event = {
	id = colthage_sicameon_murder.1
	title = colthage_sicameon_murder.1.t
	desc = colthage_sicameon_murder.1.desc
	picture = GFX_event_forest_depression

	trigger = {
		tag = SIC
		date > 1007.1.19
	}

	mean_time_to_happen = {
		days = 2
	}

	fire_only_once = yes

	immediate = {
		hidden_effect = {
			CTH = {
				country_event = {
					id = colthage_sicameon_murder.2
					days = 1
				}
			}
		}
	}

	option = { # This isn't good
		name = colthage_sicameon_murder.1.a
	}
}

# A Murder in Sicameon
country_event = {
	id = colthage_sicameon_murder.2
	title = colthage_sicameon_murder.2.t
	desc = colthage_sicameon_murder.2.d
	picture = GFX_event_forest_depression

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			country_event = {
				id = colthage_sicameon_murder.6
				days = 1
			}
		}
	}

	option = { # Demand an apology and compensation
		name = colthage_sicameon_murder.2.a
		SIC = {
			country_event = {
				id = colthage_sicameon_murder.3
				days = 2
			}
		}
	}
	option = { # We trust Sicameon will handle this well
		name = colthage_sicameon_murder.2.b
		
	}
}

# Colthage Demands Compensation and an Apology
country_event = {
	id = colthage_sicameon_murder.3
	title = colthage_sicameon_murder.3.t
	desc = colthage_sicameon_murder.3.desc
	#picture = GFX_report_event_generic_parliament

	is_triggered_only = yes

	option = { # We will give them what they want
		name = colthage_sicameon_murder.3.a
		CTH = {
			country_event = {
				id = colthage_sicameon_murder.4
				days = 2
			}
		}
	}
	option = { # Colthage won't get anything more from us
		name = colthage_sicameon_murder.3.b
		CTH = {
			country_event = {
				id = colthage_sicameon_murder.5
				days = 2
			}
		}
	}
}

# Sicameon Apologies
country_event = {
	id = colthage_sicameon_murder.4
	title = colthage_sicameon_murder.4.t
	desc = colthage_sicameon_murder.4.desc
	#picture = GFX_report_event_generic_parliament

	is_triggered_only = yes

	option = { # Let's put this behind us
		name = colthage_sicameon_murder.4.a

	}
}

# Sicameon Refuses our Demands
country_event = {
	id = colthage_sicameon_murder.5
	title = colthage_sicameon_murder.5.t
	desc = colthage_sicameon_murder.5.desc
	#picture = GFX_report_event_generic_parliament

	is_triggered_only = yes

	option = { # It's obvious where Sicameon stands
		name = colthage_sicameon_murder.5.a

	}
}

# The Murder Riots
country_event = {
	id = colthage_sicameon_murder.6
	title = colthage_sicameon_murder.6.t
	desc = colthage_sicameon_murder.6.desc
	#picture = GFX_report_event_generic_parliament

	is_triggered_only = yes

	option = { # Zarcaid
		name = colthage_sicameon_murder.6.a
		trigger = {
			always = yes #TODO - Connect this to focuse choice
		}
		add_political_power = 75
		add_stability = -0.05
		#TODO - Unlock Decisions
	}
	option = { # Constatutionalist
		name = colthage_sicameon_murder.6.b
		trigger = {
			always = no #TODO - Connect this to focuse choice
		}
		add_political_power = 75
		add_stability = -0.05
		#TODO - Unlock Decisions
	}
}

# The Anti-Zarca threat
country_event = {
	id = colthage_civil_war.1
	title = colthage_civil_war.1.t
	desc = colthage_civil_war.1.desc
	#picture = GFX_report_event_generic_parliament

	trigger = {
		tag = CTH
	}

	mean_time_to_happen = {
		days = 2
	}

	fire_only_once = yes

	option = { # Zarcaid
		name = colthage_civil_war.1.a
		set_country_flag = CTH_colthage_zarcaid
	}
}

# The Civil War Starts
country_event = {
	id = colthage_civil_war.2
	title = colthage_civil_war.2.t
	desc = colthage_civil_war.2.desc
	#picture = GFX_report_event_generic_parliament

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			every_owned_state = {
				limit = {
					is_core_of = ROOT
				}
				set_state_flag = CTH_core_of_colthage_flag
			}
			set_global_flag = { flag = SPR_civil_war_startup value = 1 days = 3 } # Make AI avoid attacking for a few days
		}
	}

	option = { # Zarcaid
		name = colthage_civil_war.2.a
		set_country_flag = CTH_colthage_zarcaid
		set_cosmetic_tag = CTH_zarcid

		#Setup CTC
		CTC = {
			clr_country_flag = CTH_colthage_zarcaid
			drop_cosmetic_tag = yes
			set_cosmetic_tag = CTH_constitutionalist
			retire_ideology_leader = fascism
			retire_ideology_leader = neutrality
			create_country_leader = {
				name = "Zanno Mzelqatid"
				expire = "1965.1.1"
				picture = "zanno_mzelqatid.tga"
				ideology = centrism
				desc = "POLITICS_ZANNO_MZELQATID_DESC"
			}
			set_popularities = {
				democratic = 39
				neutrality = 50
				communism = 11
			}
			transfer_state = 709
			709 = { set_state_flag = CTH_sided_with_constitutionalists }
		}

		CTA = {
			retire_ideology_leader = democratic
		}

		add_popularity = {
			ideology = democratic
			popularity = -0.3
		}
		add_popularity = {
			ideology = communism
			popularity = -0.1
		}

		#Add Devisions to CTC
		CTC = {
			division_template = {
				name = "Abiyot Yennterib"
				is_locked = yes
				template_counter = 6
				division_names_group = CTH_GAR_02
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
				}
				priority = 0
			}
		}

		#Give CTC all supporting leaders
		every_unit_leader = {
			limit = {
				has_trait = constitutionalist_supporter
			}
			set_nationality = CTC
		}

		# Start the Civil War
		CTC = {
			declare_war_on = {
				target = CTA
				type = civil_war
			}
			add_civil_war_target = CTA
		}

		# Setup CTC cores, capital, ideas, tech
		CTC = {
			every_state = {
				limit = {
					has_state_flag = CTH_core_of_colthage_flag
				}
				add_core_of = CTC
			}
			every_owned_state = {
				set_state_flag = CTH_sided_with_constitutionalists
			}
			inherit_technology = CTA
			if = {
				limit = {
					709 = { is_owned_by = CTC }
				}
				CTC = { set_capital = 709 }
			}
			else = {
				random_owned_state = {
					CTC = { set_capital = PREV }
				}
			}
			set_party_name = { ideology = neutrality long_name = CTH_democratic_party_long name = CTH_democratic_party }
		}

		#Set State Flags
		every_owned_state = {
			set_state_flag = CTH_sided_with_zarcids
		}
		set_global_flag = colthaginian_civil_war
	}
	option = { # Constatutionalist
		name = colthage_civil_war.2.b
	}
}