add_namespace = bufstate

country_event = {
	id = bufstate.1
	title = bufstate.1.t
	desc = bufstate.1.d
	picture = GFX_event_canyons
	
	is_triggered_only = yes
	
	
	option = {
		name = bufstate.1.a
		add_opinion_modifier = { target = EQS modifier = promote_equality }
		reverse_add_opinion_modifier = { target = EQS modifier = promote_equality }
		ai_chance = { factor = 75
			modifier = {
				is_historical_focus_on = yes
				factor = 100
			}
		}
		FROM = {
			country_event = { days = 1 id = equestria.63 }
		}
	}
	option = {
		name = bufstate.1.b
		add_opinion_modifier = { target = EQS modifier = nationalistic_thought }
		reverse_add_opinion_modifier = { target = EQS modifier = refused_to_cooperate }
		FROM = {
			country_event = { days = 1 id = equestria.64 }
		}
		ai_chance = { factor = 25 }
		set_politics = { ruling_party = neutrality elections_allowed = no }
		add_popularity = { ideology = neutrality popularity = 0.1 }
	}
}

country_event = {
	id = bufstate.2
	title = bufstate.2.t
	desc = bufstate.2.d
	picture = GFX_event_canyons
	
	is_triggered_only = yes
	
	
	option = {
		name = bufstate.2.a
		
	}
}
country_event = {
	id = bufstate.3
	title = bufstate.3.t
	desc = bufstate.3.d
	picture = GFX_event_canyons
	
	trigger = {
		tag = BUF
		has_global_flag = equestrian_civil_war
	}
	fire_only_once = yes
	
	option = {
		name = bufstate.3.a
		ai_chance = { factor = 100 }
		add_popularity = {
			ideology = neutrality popularity = 0.3
		}
		add_popularity = {
			ideology = communism popularity = 0.3
		}
		add_popularity = {
			ideology = fascism popularity = 0.3
		}
		add_popularity = {
			ideology = democratic popularity = -0.4
		}
		BUF = {
			transfer_state = 80
			transfer_state = 93
		}
	}
	option = {
		ai_chance = { factor = 0 }
		name = bufstate.3.b
	}
}
country_event = {
	id = bufstate.4
	title = bufstate.4.t
	desc = bufstate.4.d
	picture = GFX_event_canyons
	
	trigger = {
		tag = BUF
		has_global_flag = equestrian_com_civil_war
	}
	fire_only_once = yes
	
	option = {
		name = bufstate.4.a
		ai_chance = { factor = 100 }
		add_popularity = {
			ideology = neutrality popularity = 0.3
		}
		add_popularity = {
			ideology = communism popularity = 0.3
		}
		add_popularity = {
			ideology = fascism popularity = 0.3
		}
		add_popularity = {
			ideology = democratic popularity = -0.4
		}
		BUF = {
			transfer_state = 80
			transfer_state = 93
		}
		set_politics = { ruling_party = neutrality elections_allowed = no }
		add_popularity = { ideology = neutrality popularity = 0.1 }
	}
	option = {
		ai_chance = { factor = 0 }
		name = bufstate.4.b
	}
}
country_event = {
	id = bufstate.5
	title = bufstate.5.t
	desc = bufstate.5.d
	picture = GFX_event_canyons
	
	is_triggered_only = yes
	
	
	option = {
		name = bufstate.5.a
		EQS = { country_event = { days = 1 id = equestria.12 } }
		ai_chance = { factor = 3 }
	}
	option = {
		name = bufstate.5.b
		EQS = { country_event = { days = 1 id = equestria.65 } }
		ai_chance = { factor = 1 }
	}
	option = {
		name = bufstate.5.c
		EQS = { country_event = { days = 1 id = equestria.66 } }
		ai_chance = { factor = 1
		modifier = {
			is_historical_focus_on = yes
			factor = 0
			}
		}
		set_politics = { ruling_party = neutrality elections_allowed = no }
		add_popularity = { ideology = neutrality popularity = 0.1 }
	}
}
country_event = {
	id = bufstate.6
	title = bufstate.6.t
	desc = bufstate.6.d
	picture = GFX_event_canyons
	
	is_triggered_only = yes
	
	option = {
		name = bufstate.6.ninety
		set_country_flag = ninety_percent
		custom_effect_tooltip = 90pptt
		hidden_effect = {
			country_event = bufstate.7
		}
		ai_chance = { factor = 1 }
	}
	option = {
		name = bufstate.6.seventy
		set_country_flag = seventy_percent
		custom_effect_tooltip = 70pptt
		hidden_effect = {
			country_event = bufstate.7
		}
		ai_chance = { factor = 2 }
	}
	option = {
		name = bufstate.6.fifty
		set_country_flag = fifty_percent
		custom_effect_tooltip = 50pptt
		hidden_effect = {
			country_event = bufstate.7
		}
		ai_chance = { factor = 2.5 }
	}
	option = {
		name = bufstate.6.thirty
		set_country_flag = thirty_percent
		custom_effect_tooltip = 30pptt
		hidden_effect = {
			country_event = bufstate.7
		}
		ai_chance = { factor = 1 }
	}
	option = {
		name = bufstate.6.ten
		set_country_flag = ten_percent
		custom_effect_tooltip = 10pptt
		hidden_effect = {
			country_event = bufstate.7
		}
		ai_chance = { factor = 0 }
	}
}
country_event = {
	id = bufstate.7
	title = bufstate.7.t
	desc = bufstate.7.d
	picture = GFX_event_canyons
	
	is_triggered_only = yes
	
	option = {
		name = bufstate.7.three_years
		ai_chance = { factor = 1 }
		if = { limit = { has_country_flag = ninety_percent }
			add_timed_idea = { idea = BUF_buying_tech days = 1095 }
			else = {
				if = { limit = { has_country_flag = seventy_percent }
				add_timed_idea = { idea = BUF_buying_tech1 days = 1095 }
				else = {
					if = { limit = { has_country_flag = fifty_percent }
					add_timed_idea = { idea = BUF_buying_tech2 days = 1095 }
					else = {
						if = { limit = { has_country_flag = thirty_percent }
						add_timed_idea = { idea = BUF_buying_tech3 days = 1095 }
						else = {
							if = { limit = { has_country_flag = ten_percent }
							add_timed_idea = { idea = BUF_buying_tech4 days = 1095 }
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	option = {
		name = bufstate.7.two_years
		ai_chance = { factor = 1 }
		if = { limit = { has_country_flag = ninety_percent }
			add_timed_idea = { idea = BUF_buying_tech days = 700 }
			else = {
				if = { limit = { has_country_flag = seventy_percent }
				add_timed_idea = { idea = BUF_buying_tech1 days = 700 }
				else = {
					if = { limit = { has_country_flag = fifty_percent }
					add_timed_idea = { idea = BUF_buying_tech2 days = 700 }
					else = {
						if = { limit = { has_country_flag = thirty_percent }
						add_timed_idea = { idea = BUF_buying_tech3 days = 700 }
						else = {
							if = { limit = { has_country_flag = ten_percent }
							add_timed_idea = { idea = BUF_buying_tech4 days = 700 }
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	option = {
		name = bufstate.7.one_year
		ai_chance = { factor = 1 }
		if = { limit = { has_country_flag = ninety_percent }
			add_timed_idea = { idea = BUF_buying_tech days = 365 }
			else = {
				if = { limit = { has_country_flag = seventy_percent }
				add_timed_idea = { idea = BUF_buying_tech1 days = 365 }
				else = {
					if = { limit = { has_country_flag = fifty_percent }
					add_timed_idea = { idea = BUF_buying_tech2 days = 365 }
					else = {
						if = { limit = { has_country_flag = thirty_percent }
						add_timed_idea = { idea = BUF_buying_tech3 days = 365 }
						else = {
							if = { limit = { has_country_flag = ten_percent }
							add_timed_idea = { idea = BUF_buying_tech4 days = 365 }
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	option = {
		name = bufstate.7.twohundred_days
		ai_chance = { factor = 1 }
		if = { limit = { has_country_flag = ninety_percent }
			add_timed_idea = { idea = BUF_buying_tech days = 200 }
			else = {
				if = { limit = { has_country_flag = seventy_percent }
				add_timed_idea = { idea = BUF_buying_tech1 days = 200 }
				else = {
					if = { limit = { has_country_flag = fifty_percent }
					add_timed_idea = { idea = BUF_buying_tech2 days = 200 }
					else = {
						if = { limit = { has_country_flag = thirty_percent }
						add_timed_idea = { idea = BUF_buying_tech3 days = 200 }
						else = {
							if = { limit = { has_country_flag = ten_percent }
							add_timed_idea = { idea = BUF_buying_tech4 days = 200 }
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}

country_event = {
	id = bufstate.8
	title = bufstate.8.t
	desc = bufstate.8.d
	picture = GFX_event_canyons
	
	is_triggered_only = yes
	
	
	option = {
		name = bufstate.8.a
		add_ideas = BUF_equestrian_traders
	}
}
country_event = {
	id = bufstate.9
	title = { text = bufstate.9.t_small_traders
	trigger = { has_equestrian_traders_small = yes } }
	desc = { text = bufstate.9.d_small_traders 
	trigger = { has_equestrian_traders_small = yes } }
	title = { text = bufstate.9.t_establishing_production
	trigger = { has_equestrian_traders_bigger = yes } }
	desc = { text = bufstate.9.d_establishing_production 
	trigger = { has_equestrian_traders_bigger = yes } }
	title = { text = bufstate.9.t_oil_companies_n_factories
	trigger = { has_equestrian_traders_large = yes } }
	desc = { text = bufstate.9.d_oil_companies_n_factories 
	trigger = { has_equestrian_traders_large = yes } }
	picture = GFX_event_canyons
	
	trigger = {
		original_tag = BUF
		has_equestrian_traders = yes
		NOT = { has_country_flag = regulated_market }
	}
	mean_time_to_happen = {
		days = 30
		modifier = {
			factor = 2.5
			has_country_flag = protected_market
		}
		modifier = {
			factor = 0.7
			has_idea = BUF_equestrian_corporations
		}
		modifier = {
			factor = 0.7
			OR = {
				has_idea = BUF_equestrian_traders5
				has_idea = BUF_equestrian_traders6
				has_idea = BUF_equestrian_traders7
				has_idea = BUF_equestrian_traders8 
				}
		}
		modifier = {
			factor = 0.5
			OR = {
				has_idea = BUF_equestrian_traders9
				has_idea = BUF_equestrian_traders10
				has_idea = BUF_equestrian_traders11
				has_idea = BUF_equestrian_traders12
				has_idea = BUF_equestrian_traders13
				}
		}
	}
	option = {
		name = bufstate.9.a
		increase_equestrian_trade = yes
	}
}
country_event = {
	id = bufstate.10
	title = bufstate.10.t
	desc = bufstate.10.d
	picture = GFX_event_canyons
	
	is_triggered_only = yes
	
	
	option = {
		name = bufstate.10.a
		add_ideas = BUF_equestrian_corporations
	}
}
country_event = {
	id = bufstate.11
	title = bufstate.11.t
	desc = bufstate.11.d
	picture = GFX_event_canyons
	
	trigger = {
		tag = BUF
		has_equestrian_traders = yes
		has_country_flag = regulated_market
	}
	option = {
		name = bufstate.11.a
		remove_ideas = BUF_equestrian_corporations
		effect_tooltip = {
			if = { limit = { has_equestrian_traders_small = yes }
			remove_ideas = BUF_equestrian_traders
			else = {
				if = { limit = { has_equestrian_traders_bigger = yes }
				remove_ideas = BUF_equestrian_traders8
				else = {
					if = { limit = { has_equestrian_traders_large = yes }
					remove_ideas = BUF_equestrian_traders14
							}
						}
					}
				}
			}
		}
		hidden_effect = {
			remove_ideas = {
				BUF_equestrian_traders
				BUF_equestrian_traders2
				BUF_equestrian_traders3
				BUF_equestrian_traders4
				BUF_equestrian_traders5
				BUF_equestrian_traders6
				BUF_equestrian_traders7
				BUF_equestrian_traders8
				BUF_equestrian_traders9
				BUF_equestrian_traders10
				BUF_equestrian_traders11
				BUF_equestrian_traders12
				BUF_equestrian_traders13
				BUF_equestrian_traders14
			}
		}
	}
}
country_event = {
	id = bufstate.12
	title = bufstate.12.t
	desc = bufstate.12.d
	picture = GFX_event_canyons
	
	is_triggered_only = yes
	
	
	option = {
		name = bufstate.12.a
		EQS = {
			set_country_flag = BUF_annex
			country_event = { days = 1 id = equestria.68 }
		}
		custom_effect_tooltip = will_be_annexed
		ai_chance = { factor = 2 }
	}
	option = {
		name = bufstate.12.b
		EQS = {
			set_country_flag = BUF_puppet
			country_event = { days = 1 id = equestria.68 }
		}
		custom_effect_tooltip = PUPPET_TT
		ai_chance = { factor = 1 }
	}
}
country_event = {
	id = bufstate.13
	title = bufstate.13.t
	desc = bufstate.13.d
	picture = GFX_event_canyons
	
	trigger = {
		original_tag = BUF
		has_country_flag = regulated_market
		NOT = {
			has_equestrian_traders = yes
		}
		NOT = { has_idea = BUF_pony_protest }
		NOT = { has_country_flag = one_pony_protest }
	}
	mean_time_to_happen = { days = 40 }
	
	option = {
		name = bufstate.13.a
		set_country_flag = one_pony_protest
		add_timed_idea = { idea = BUF_pony_protest days = 60 }
		ai_chance = { factor = 1 }
	}
	option = {
		name = bufstate.13.b
		set_country_flag = one_pony_protest
		add_political_power = -30
		random_list = {
			20 = { add_timed_idea = { idea = BUF_pony_protest days = 30 } }
			20 = { add_timed_idea = { idea = BUF_pony_protest days = 40 } }
			20 = { add_timed_idea = { idea = BUF_pony_protest days = 20 } }
			20 = { add_timed_idea = { idea = BUF_pony_protest days = 25 } }
			}
		ai_chance = { factor = 1 }
	}
}
country_event = {
	id = bufstate.14
	title = bufstate.14.t
	desc = bufstate.14.d
	picture = GFX_event_canyons
	
	trigger = {
		original_tag = BUF
		has_country_flag = regulated_market
		NOT = {
			has_equestrian_traders = yes
		}
		NOT = { has_idea = BUF_pony_protest }
		has_country_flag = one_pony_protest
		NOT = { has_country_flag = protests_settled }
		NOT = { has_idea = BUF_steady_growth }
	}
	mean_time_to_happen = { days = 40 }
	
	option = {
		name = bufstate.14.a
		add_timed_idea = { idea = BUF_pony_protest days = 60 }
		clr_country_flag = one_pony_protest
		ai_chance = {
			factor = 1
			modifier = {
				has_government = democratic
				factor = 0
			}
		}
	}
	option = {
		name = bufstate.14.b
		EQS = { country_event = { id = equestria.69 days = 1 } }
		add_political_power = -20
		clr_country_flag = one_pony_protest
		EQS = { has_government = democratic }
		random_list = {
			20 = { add_timed_idea = { idea = BUF_pony_protest days = 30 } }
			20 = { add_timed_idea = { idea = BUF_pony_protest days = 35 } }
			20 = { add_timed_idea = { idea = BUF_pony_protest days = 20 } }
			20 = { add_timed_idea = { idea = BUF_pony_protest days = 25 } }
			}
		ai_chance = {
			factor = 1
			modifier = {
				has_government = democratic
				factor = 2
			}
			modifier = {
				has_government = fascism
				factor = 0
			}
		}
	}
}
country_event = {
	id = bufstate.21
	title = {
		text = bufstate.21.t_not_settled
		trigger = { NOT = { has_country_flag = protests_settled }
		}
	}
	title = {
		text = bufstate.21.t_settled
		trigger = { has_country_flag = protests_settled }
	}
	desc = {
		text = bufstate.21.d_not_settled
		trigger = { NOT = { has_country_flag = protests_settled }
		}
	}
	desc = {
		text = bufstate.21.d_settled
		trigger = { has_country_flag = protests_settled }
	}
	picture = GFX_event_canyons
	
	is_triggered_only = yes
	
	option = {
		name = bufstate.21.a
		trigger = { NOT = { has_country_flag = protests_settled }
		add_timed_idea = { idea = BUF_pony_protest days = 60 }
	}
	option = {
		name = bufstate.21.b
		trigger = { has_country_flag = protests_settled }
		if = { limit = { has_idea = BUF_pony_protest }
			random_list = { 50 = { remove_ideas = BUF_pony_protest } 50 = { add_political_power = 30 } } }
	}
}

## CHIEF COUNCIL ##
country_event = {
	id = bufstate.15
	title = bufstate.15.t
	desc = bufstate.15.d
	picture = GFX_event_canyons
	
	is_triggered_only = yes
	
	option = {
		name = bufstate.15.a
		country_event = { hours = 1 id = bufstate.16 }
	}
}
## THE ELDER SPEAKS ##
country_event = {
	id = bufstate.16
	title = bufstate.16.t
	desc = bufstate.16.d
	picture = GFX_event_canyons
	
	is_triggered_only = yes
	
	option = {
		name = bufstate.16.a
		country_event = { hours = 1 id = bufstate.17 }
	}
}
## THUNDERHOOVES SPEAKS ##
country_event = {
	id = bufstate.17
	title = bufstate.17.t
	desc = bufstate.17.d
	picture = GFX_event_canyons
	
	is_triggered_only = yes
	
	option = {
		name = bufstate.17.a
		country_event = { hours = 1 id = bufstate.18 }
	}
}
## CHIEFTESS STRONGHEART SPEAKS ##
country_event = {
	id = bufstate.18
	title = bufstate.18.t
	desc = bufstate.18.d
	picture = GFX_event_canyons
	
	is_triggered_only = yes
	
	option = {
		name = bufstate.18.a
		country_event = { hours = 1 id = bufstate.19 }
	}
}
country_event = {
	id = bufstate.19
	title = bufstate.19.t
	desc = bufstate.19.d
	picture = GFX_event_canyons
	
	is_triggered_only = yes
	## THE ELDER##
	option = {
		name = bufstate.19.a
		ai_chance = {
			factor = 1
		}
		hidden_effect = {
			random_list = {
				43 = { set_country_flag = support_chief_strongheart }
				35 = { set_country_flag = support_chief_thunderhooves }
				23 = { set_country_flag = support_elder_greyhorn }
			}
		}
		country_event = { hours = 1 id = bufstate.20 }
	}
	## THUNDERHOOVES# #
	option = {
		name = bufstate.19.b
		ai_chance = {
			factor = 1
		}
		hidden_effect = {
			random_list = {
				45 = { set_country_flag = support_chief_strongheart }
				46 = { set_country_flag = support_chief_thunderhooves }
				9 = { set_country_flag = support_elder_greyhorn }
			}
		}
		country_event = { hours = 1 id = bufstate.20 }
	}
	## STRONGHEART ##
	option = {
		name = bufstate.19.c
		ai_chance = {
			factor = 2
		}
		hidden_effect = {
			random_list = {
				51 = { set_country_flag = support_chief_strongheart }
				35 = { set_country_flag = support_chief_thunderhooves }
				14 = { set_country_flag = support_elder_greyhorn }
			}
		}
		country_event = { hours = 1 id = bufstate.20 }

	}
}
country_event = {
	id = bufstate.20
	title = {
		text = bufstate.20.t_strongheart
		trigger = { has_country_flag = support_chief_strongheart }
		}
	title = {
		text = bufstate.20.t_thunderhooves
		trigger = { has_country_flag = support_chief_thunderhooves }
		}
	title = {
		text = bufstate.20.t_greyhorn
		trigger = { has_country_flag = support_chief_greyhorn }
		}
	desc = {
		text = bufstate.20.d_strongheart
		trigger = { has_country_flag = support_chief_strongheart }
		}
	desc = {
		text = bufstate.20.d_thunderhooves
		trigger = { has_country_flag = support_chief_thunderhooves }
		}
	desc = {
		text = bufstate.20.d_greyhorn
		trigger = { has_country_flag = support_chief_greyhorn }
		}
	picture = GFX_event_canyons
	
	is_triggered_only = yes
	
	option = {
		name = bufstate.20.strongheart
		trigger = { has_country_flag = support_chief_strongheart }
		add_political_power_depending_on_popularity_democratic = yes
	}
	option = {
		name = bufstate.20.thunderhooves
		trigger = { has_country_flag = support_chief_thunderhooves }
		add_political_power_depending_on_popularity_neutrality = yes
	}
	option = {
		name = bufstate.20.greyhorn
		trigger = { has_country_flag = support_chief_thunderhooves }
		add_political_power_depending_on_popularity_fascism = yes
	}
}