add_namespace = cityfall
# The Fall of Vaverfront (Changelings)
news_event = {
	id = cityfall.1
	immediate = {log = "[Root.GetName]: event cityfall.1"}#Auto-logging
	title = cityfall.1.t
	desc = cityfall.1.d
	picture = GFX_news_event_vanhoover_surrenders
	
	major = yes
	
	immediate = {
		set_global_flag = fall_of_vaverfront_CHN
	}
	
	is_triggered_only = yes
	
	option = {
		name = cityfall.1.a
		trigger = {
			NOT = {
				TAG = CHN
				TAG = OLE
			}
		}
	}
	option = {
		name = cityfall.1.b
		trigger = { TAG = CHN }
	}
	option = {
		name = cityfall.1.c
		trigger = { TAG = OLE }
	}
}
# The Fall of Hjortland (Changelings)
news_event = {
	id = cityfall.2
	immediate = {log = "[Root.GetName]: event cityfall.2"}#Auto-logging
	title = cityfall.2.t
	desc = cityfall.2.d
	picture = GFX_news_event_vanhoover_surrenders
	
	major = yes
	
	immediate = {
		set_global_flag = fall_of_hjortland_CHN
	}
	
	is_triggered_only = yes
	
	option = {
		name = cityfall.2.a
		trigger = {
			NOT = {
				TAG = CHN
				TAG = OLE
			}
		}
	}
	option = {
		name = cityfall.2.b
		trigger = { TAG = CHN }
	}
	option = {
		name = cityfall.2.c
		trigger = { TAG = OLE }
	}
}
# The Fall of Cervus (Changelings)
news_event = {
	id = cityfall.3
	immediate = {log = "[Root.GetName]: event cityfall.3"}#Auto-logging
	title = cityfall.3.t
	desc = cityfall.3.d
	picture = GFX_news_event_vanhoover_surrenders
	
	major = yes
	
	immediate = {
		set_global_flag = fall_of_cervus_CHN
	}
	
	is_triggered_only = yes
	
	option = {
		name = cityfall.3.a
		trigger = {
			NOT = {
				TAG = CHN
				TAG = OLE
			}
		}
	}
	option = {
		name = cityfall.3.b
		trigger = { TAG = CHN }
	}
	option = {
		name = cityfall.3.c
		trigger = { TAG = OLE }
	}
}
# The Fall of Sakara (Changelings)
news_event = {
	id = cityfall.4
	immediate = {log = "[Root.GetName]: event cityfall.4"}#Auto-logging
	title = cityfall.4.t
	desc = cityfall.4.d
	picture = GFX_news_event_vanhoover_surrenders
	
	major = yes

	immediate = {
		set_global_flag = fall_of_sakara_CHN
	}
	
	is_triggered_only = yes
	
	option = {
		name = cityfall.4.a
		trigger = {
			NOT = {
				TAG = CHN
				TAG = OLE
			}
		}
	}
	option = {
		name = cityfall.4.b
		trigger = { TAG = CHN }
	}
	option = {
		name = cityfall.4.c
		trigger = { TAG = OLE }
	}
}
# The Fall of River City
news_event = {
	id = cityfall.5
	immediate = {log = "[Root.GetName]: event cityfall.5"}#Auto-logging
	title = cityfall.5.t
	desc = cityfall.5.d
	picture = GFX_news_fall_of_river_city
	
	major = yes
	is_triggered_only = yes
	
	immediate = {
		set_global_flag = fall_of_river_city
		619 = { set_state_flag = state_has_fallen }
		FROM.FROM = { save_event_target_as = old_controller }
		ROOT = { save_event_target_as = new_controller }
	}
	
	option = { #One city does not make a Federation!
		name = cityfall.5.a
		trigger = {
			tag = event_target:old_controller
		}
	}

	option = { #The Federation Shall Fall.
		name = cityfall.5.b
		trigger = {
			tag = event_target:new_controller
		}
	}

	option = { #The sun begins to set on the eastern ponies.
		name = cityfall.5.c
		trigger = {
			NOT = {
				tag = event_target:old_controller
				tag = event_target:new_controller
			}
		}
	}
}
# The Fall of Sunset
news_event = {
	id = cityfall.6
	immediate = {log = "[Root.GetName]: event cityfall.6"}#Auto-logging
	title = cityfall.6.t
	desc = {
		text = cityfall.6.d.maresoc_take
		trigger = { event_target:new_controller = { has_country_flag = is_maresoc } }
	}
	desc = {
		text = cityfall.6.d.maresoc_loose
		trigger = { event_target:old_controller = { has_country_flag = is_maresoc } }
	}
	desc = {
		text = cityfall.6.d.other
		trigger = { 
			event_target:new_controller = { NOT = { has_country_flag = is_maresoc } }
			event_target:old_controller = { NOT = { has_country_flag = is_maresoc } }
		}
	}
	picture = GFX_news_sunset_city
	
	major = yes
	is_triggered_only = yes
	
	immediate = {
		set_global_flag = fall_of_sunset_city
		619 = { set_state_flag = state_has_fallen }
		FROM.FROM = { save_event_target_as = old_controller }
		ROOT = { save_event_target_as = new_controller }
	}
	
	option = { #The madness of MARESOC cannot be allowed to win!
		name = cityfall.6.a.maresoc_take
		trigger = {
			tag = event_target:old_controller
			event_target:new_controller = { has_country_flag = is_maresoc }
		}
	}
	option = { #They can have the ashes.
		name = cityfall.6.a.maresoc_loose
		trigger = {
			tag = event_target:old_controller
			event_target:old_controller = { has_country_flag = is_maresoc }
		}
	}
	option = { #Give it time and the sun will rise over Sunset once again.
		name = cityfall.6.a
		trigger = {
			tag = event_target:old_controller
			event_target:new_controller = { NOT = { has_country_flag = is_maresoc } }
			event_target:old_controller = { NOT = { has_country_flag = is_maresoc } }
		}
	}

	option = { #This is a great victory for the party.
		name = cityfall.6.b.maresoc_take
		trigger = {
			tag = event_target:new_controller
			event_target:new_controller = { has_country_flag = is_maresoc }
		}
	}
	option = { #The corruption of MARESOC is washing away.
		name = cityfall.6.b.maresoc_loose
		trigger = {
			tag = event_target:new_controller
			event_target:old_controller = { has_country_flag = is_maresoc }
		}
	}
	option = { #Time to have a barby on the beach.
		name = cityfall.6.b
		trigger = {
			tag = event_target:new_controller
			event_target:new_controller = { NOT = { has_country_flag = is_maresoc } }
			event_target:old_controller = { NOT = { has_country_flag = is_maresoc } }
		}
	}	

	option = { #And thus darkness falls over New Mareland.
		name = cityfall.6.c.maresoc_take
		trigger = {
			event_target:new_controller = { has_country_flag = is_maresoc }
			NOT = {
				tag = event_target:old_controller
				tag = event_target:new_controller
			}
		}
	}
	option = { #The sun rises over Sunset once again.
		name = cityfall.6.c.maresoc_loose
		trigger = {
			event_target:old_controller = { has_country_flag = is_maresoc }
			NOT = {
				tag = event_target:old_controller
				tag = event_target:new_controller
			}
		}
	}
	option = { #With the end of Sunset, darkness has fallen over New Mareland.
		name = cityfall.6.c
		trigger = {
			event_target:new_controller = { NOT = { has_country_flag = is_maresoc } }
			event_target:old_controller = { NOT = { has_country_flag = is_maresoc } }
			NOT = {
				tag = event_target:old_controller
				tag = event_target:new_controller
			}
		}
	}
}

news_event = { # Fall of Shire
	id = cityfall.7
	immediate = {log = "[Root.GetName]: event cityfall.7"}#Auto-logging
	title = cityfall.7.t
	desc = cityfall.7.d
	picture = GFX_news_event_vanhoover_surrenders

	major = yes

	immediate = {
		set_global_flag = fall_of_shire_chn
	}

	is_triggered_only = yes

	option = {
		name = cityfall.7.a
		trigger = {
			NOT = {
				original_tag = EQS
				TAG = CHN
			}
		}
	}
	option = {
		name = cityfall.7.b
		trigger = { original_tag = EQS }
		add_stability = -0.01
	}
	option = {
		name = cityfall.7.c
		trigger = { TAG = CHN }
	}
}

news_event = { # Fall of Los Pegasus
	id = cityfall.8
	immediate = {log = "[Root.GetName]: event cityfall.8"}#Auto-logging
	title = cityfall.8.t
	desc = cityfall.8.d
	picture = GFX_news_event_los_pegasus

	major = yes

	immediate = {
		set_global_flag = fall_of_lospegasus_chn
	}

	is_triggered_only = yes

	option = {
		name = cityfall.8.a
		trigger = {
			NOT = {
				original_tag = EQS
				TAG = CHN
			}
		}
	}
	option = {
		name = cityfall.8.b
		trigger = { original_tag = EQS  }
		add_stability = -0.025
	}
	option = {
		name = cityfall.8.c
		trigger = { TAG = CHN }
	}
}

news_event = { # Fall of Manehattan
	id = cityfall.9
	immediate = {log = "[Root.GetName]: event cityfall.9"}#Auto-logging
	title = cityfall.9.t
	desc = cityfall.9.d
	picture = GFX_news_event_manehattan

	major = yes

	immediate = {
		set_global_flag = fall_of_manehattan_chn
	}

	is_triggered_only = yes

	option = {
		name = cityfall.9.a
		trigger = {
			NOT = {
				original_tag = EQS
				TAG = CHN
			}
		}
	}
	option = {
		name = cityfall.9.b
		trigger = { original_tag = EQS }
		add_stability = -0.035
	}
	option = {
		name = cityfall.9.c
		trigger = { TAG = CHN }
	}
}

news_event = { # Fall of Canterlot
	id = cityfall.10
	immediate = {log = "[Root.GetName]: event cityfall.10"}#Auto-logging
	title = cityfall.10.t
	desc = cityfall.10.d
	picture = GFX_news_event_galloping_gala

	major = yes

	immediate = {
		set_global_flag = fall_of_canterlot_nlr
	}

	is_triggered_only = yes

	option = {
		name = cityfall.10.a
		trigger = {
			NOT = {
				original_tag = EQS
				TAG = NLR
			}
		}
	}
	option = {
		name = cityfall.10.b
		trigger = { original_tag = EQS }
	}
	option = {
		name = cityfall.10.c
		trigger = { TAG = NLR }
	}
}

news_event = { # Fall of Canterlot
	id = cityfall.12
	immediate = {log = "[Root.GetName]: event cityfall.12"}#Auto-logging
	title = cityfall.12.t
	desc = cityfall.12.d
	picture = GFX_news_event_galloping_gala

	major = yes

	immediate = {
		set_global_flag = fall_of_canterlot_stg
	}

	is_triggered_only = yes

	option = {
		name = cityfall.12.a
		trigger = {
			NOT = {
				original_tag = EQS
				TAG = STG
			}
		}
	}
	option = {
		name = cityfall.12.b
		trigger = { original_tag = EQS }
	}
	option = {
		name = cityfall.12.c
		trigger = { TAG = STG }
	}
}

news_event = { # Fall of Stalliongrad
	id = cityfall.11
	immediate = {log = "[Root.GetName]: event cityfall.11"}#Auto-logging
	title = cityfall.11.t
	desc = cityfall.11.d
	picture = GFX_news_event_stalliongrad

	major = yes

	immediate = {
		ROOT = { save_event_target_as = new_controller }
		set_global_flag = fall_of_stalliongrad_eqs
	}

	is_triggered_only = yes

	option = {
		name = cityfall.11.a
		trigger = {
			NOT = {
				tag = event_target:new_controller
				TAG = STG
			}
		}
	}
	option = {
		name = cityfall.11.b
		trigger = { tag = event_target:new_controller }
	}
	option = {
		name = cityfall.11.c
		trigger = { TAG = STG }
	}
}
