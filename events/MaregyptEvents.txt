###########################
# Maregypt Events
###########################

add_namespace = MGY
#add_namespace = news_maresopotamia

##SOMNAMBULA SERIES - Somnambula tries to figure out modernity, getting swayed politically in the process
 country_event = {
	 id = MGY.1##Somnambula goes to visit R'ataphet on a public goodwill tour
	 immediate = {log = "[GetDateText]: [Root.GetName]: event MGY.1"}#Auto-logging
	 title = MGY.1.t
	 desc = MGY.1.d

	 fire_only_once = yes
	
	 is_triggered_only = yes

	
	option = { #Send her through the central street - can lead to her gaining Communist sympathy points
		 name = MGY.1.a
		 hidden_effect = {
			country_event = {id = MGY.2 days = 9 random = 48}				
			country_event = { id = MGY.4 days = 45 random = 48 }
	     }
	 }
	 option = { # Keep her confined to dining with dignitaries - she won't see the plight of the commonfolk but might get swayed by some Neutrals
		 name = MGY.1.b
		 hidden_effect = {
		   country_event = {id = MGY.3 days = 9 random = 48}				
		   country_event = { id = MGY.4 days = 45 random = 48 }
		}
		#ai_chance = { ##don't actually want an ai_chance for this event but I do want to have the code format on hand
		#	 base = 0
		#}
	 }
	 option = {#Cancel the trip - but she won't like this
		name = MGY.1.c
			add_political_power = -50
			add_to_variable = { var = somnAnger value = 1 }
			custom_effect_tooltip = MGY_get_angry
			hidden_effect = {
				country_event = { id = MGY.4 days = 45 random = 48 }			
			}
	 }
 }
 
 country_event = {
	 id = MGY.2##Somnambula sees the cheering masses and is inspired 
	 immediate = {log = "[GetDateText]: [Root.GetName]: event MGY.2"}#Auto-logging
	 title = MGY.2.t
	 desc = MGY.2.d

	 fire_only_once = yes
	
	 is_triggered_only = yes

	
	option = { #She gives a speech to the ponies
		 name = MGY.2.a
			add_stability = 0.01
			add_to_variable = { var = somnHarmony value = 1 }
			custom_effect_tooltip = MGY_somn_get_harmony
	}
	option = { #She insists on going in to see the slumdwellers
		 name = MGY.2.b
			add_stability = -0.01
			add_to_variable = { var = somnCommunism value = 1 }
			custom_effect_tooltip = MGY_somn_get_communism
	}
	option = { #Refuse to allow her to go, for safety concerns
		name = MGY.2.c
			add_political_power = -100
			custom_effect_tooltip = MGY_get_angry
			add_to_variable = { var = somnAnger value = 1 }
	}
 }
 country_event = {
	 id = MGY.3##Somnambula spends the day dining with rich dignitaries, and is impressed with how far technology has come
	 immediate = {log = "[GetDateText]: [Root.GetName]: event MGY.3"}#Auto-logging
	 title = MGY.3.t
	 desc = MGY.3.d

	 fire_only_once = yes
	
	 is_triggered_only = yes

	
	option = { #She meets the distant descendants of some nobles she knew and regales them with tales of their ancestors
		 name = MGY.3.a
		 add_stability = 0.01
		 custom_effect_tooltip = MGY_som_get_neutrality
		 add_to_variable = { var = somnNeutrality value = 1 }
	}
	option = { #She is wowed by modern, Equestrian technology
		name = MGY.3.b
			custom_effect_tooltip = MGY_somn_get_harmony
			add_to_variable = { var = somnHarmony value = 1 }
	}
 }

 country_event = {
	 id = MGY.4##Second Somnambula event - she goes on a trip to Maneisrata, but who knows what she will support...
	 immediate = {log = "[GetDateText]: [Root.GetName]: event MGY.4"}#Auto-logging
	 title = MGY.4.t
	 desc = MGY.4.d

	 fire_only_once = yes
	
	 is_triggered_only = yes

	
	option = { #She praises the Manedalusian culture, and their ability to work together
		 name = MGY.4.a
			custom_effect_tooltip = MGY_somn_get_harmony
			add_to_variable = { var = somnHarmony value = 1 }
			hidden_effect = {
				country_event = { id = MGY.5 days = 45 random = 48 }
			}
	}
	option = { #She casually states that MGY used to own land in ABY even in her day, a fact widely known in her day but in the modern day doubted by most except for Maregyptian nationalists. This is taken as support for ARM
		name = MGY.4.b
			custom_effect_tooltip = MGY_somn_get_fascism
			add_to_variable = { var = somnFascism value = 1 }
			hidden_effect = {
				country_event = { id = MGY.5 days = 45 random = 48 }
			}
	}
	option = { #She's unpredictable, what if she says something that makes things worse? Shut down the event.
		name = MGY.4.c
			custom_effect_tooltip = MGY_get_angry
			add_to_variable = { var = somnAnger value = 1 }
			hidden_effect = {
				country_event = { id = MGY.5 days = 45 random = 48 }
			}
	}
 }
 country_event = {
	 id = MGY.5##Third Somnambula event - she goes to ARM HQ to figure out what their deal is
	 immediate = {log = "[GetDateText]: [Root.GetName]: event MGY.5"}#Auto-logging
	 title = MGY.5.t
	 desc = MGY.5.d

	 fire_only_once = yes
	
	 is_triggered_only = yes

	
	option = { #Prince Shepser reminds her of old Hisan
		 name = MGY.5.a
			custom_effect_tooltip = MGY_somn_get_neutrality
			add_to_variable = { var = somnNeutrality value = 1 }
			hidden_effect = {
				country_event = { id = MGY.6 days = 45 random = 48 }
			}
	}
	option = { #She is impressed by the DRP leader's eloquence
		name = MGY.5.b
			custom_effect_tooltip = MGY_somn_get_fascism
			add_to_variable = { var = somnFascism value = 1 }
			hidden_effect = {
				country_event = { id = MGY.6 days = 45 random = 48 }
			}
	}
	option = { #Stop her from attending
		 name = MGY.5.c
			custom_effect_tooltip = MGY_get_angry
			add_to_variable = { var = somnAnger value = 1 }
			hidden_effect = {
				country_event = { id = MGY.6 days = 45 random = 48 }
				if = {
					limit = {
						check_variable = { somnAnger > 2 }##if you've stopped her three times
					}
					country_event = { id = MGY.9 days = 180 random = 24 }
				}
			}
	}
 }
 country_event = {
	 id = MGY.6##Fourth Somnambula event - she goes undercover in the marketplace, and stumbles across a strike
	 immediate = {log = "[GetDateText]: [Root.GetName]: event MGY.6"}#Auto-logging
	 title = MGY.6.t
	 desc = MGY.6.d

	 fire_only_once = yes
	
	 is_triggered_only = yes

	
	option = { #She sympathises with the common folk
		 name = MGY.6.a
			custom_effect_tooltip = MGY_somn_get_communism
			add_to_variable = { var = somnCommunism value = 1 }
	}
	option = { #She is outraged by their blithe verbal abuse of the King
		name = MGY.6.b
			custom_effect_tooltip = MGY_somn_get_neutrality
			add_to_variable = { var = somnNeutrality value = 1 }
	}
 }
 country_event = {
	 id = MGY.7##Fifth Somnambula event - she follows a long-running dispute in academic literature about the merits of Republicanism vs Communism
	 immediate = {log = "[GetDateText]: [Root.GetName]: event MGY.7"}#Auto-logging
	 title = MGY.7.t
	 desc = MGY.7.d

	 fire_only_once = yes
	
	 is_triggered_only = yes

	
	option = { #She muses that the commonfolk often knew their business better than the Pharaoh did
		 name = MGY.7.a
			custom_effect_tooltip = MGY_somn_get_fascism
			add_to_variable = { var = somnFascism value = 1 }
	}
	option = { #She remembers the cringing slaves that used to support the Old Kingdom, and weeps for them
		name = MGY.7.b
			custom_effect_tooltip = MGY_somn_get_communism
			add_to_variable = { var = somnCommunism value = 1 }
	}
	option = { #She muses that both of them are ivory-tower scholars who know nothing about the plight on the ground
		name = MGY.7.c

	}
 }
 country_event = {
	 id = MGY.8##Sixth Somnambula event - she goes to a major public debate
	 immediate = {log = "[GetDateText]: [Root.GetName]: event MGY.7"}#Auto-logging
	 title = MGY.8.t
	 desc = MGY.8.d

	 fire_only_once = yes
	
	 is_triggered_only = yes

	
	option = { #She is convinced by the KM speaker
		 name = MGY.8.a
			custom_effect_tooltip = MGY_somn_get_harmony
			add_to_variable = { var = somnHarmony value = 1 }
	}
	option = { #She sympathises with the LPMG speaker
		name = MGY.8.b
			custom_effect_tooltip = MGY_somn_get_communism
			add_to_variable = { var = somnCommunism value = 1 }
	}
	option = { #She naturally feels at ease with the Pharaonist idea
		name = MGY.8.c
			custom_effect_tooltip = MGY_somn_get_neutrality
			add_to_variable = { var = somnNeutrality value = 1 }
	}
	option = { #She considers that Republicanism might be worth a try after all
		name = MGY.8.d
			custom_effect_tooltip = MGY_somn_get_fascism
			add_to_variable = { var = somnFascism value = 1 }
	}
 }
 country_event = {
	 id = MGY.9##Somnambula storms out if her anger is above a certain level
	 immediate = {log = "[GetDateText]: [Root.GetName]: event MGY.9"}#Auto-logging
	 title = MGY.9.t
	 desc = MGY.9.d

	 fire_only_once = yes
	
	 is_triggered_only = yes

	
	option = { #Somnambula goes into hiding and refuses to cooperate with the government anymore
		 name = MGY.9.a
			remove_ideas = MGY_somnambula
			set_country_flag = MGY_som_gone
	}

 }
 