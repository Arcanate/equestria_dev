add_namespace = solarempire

country_event = {
  id = solarempire.1
  title = solarempire.1.t
  desc = solarempire.1.d
  picture = GFX_event_hearthswarming

  fire_only_once = yes

  is_triggered_only = yes

  option = {
    name = solarempire.1.a
    CRY = { country_event = { id = solarempire.2 days = 2 } } #pressure cadence
    ai_chance = {
      factor = 1
      modifier = {
        factor = 2
        has_completed_focus = SOL_empress_protector
      }
    }
  }
  option = {
    name = solarempire.1.b
    CRY = { country_event = { id = solarempire.3 days = 2 } } #replace cadence
    ai_chance = {
      factor = 1
      modifier = {
        factor = 2
        has_completed_focus = SOL_empress_mother
      }
    }
  }
  option = {
    name = solarempire.1.c
    CRY = { country_event = { id = solarempire.4 days = 2 } } #annex CRY
    ai_chance = {
      factor = 1
      modifier = {
        factor = 2
        has_completed_focus = SOL_god_empress
      }
    }
  }
}

#For CRY
country_event = {
  id = solarempire.2
  title = solarempire.2.t
  desc = solarempire.2.d
  picture = GFX_event_hearthswarming

  fire_only_once = yes

  is_triggered_only = yes

  option = {
    name = solarempire.2.a
    add_political_power = -100
    hidden_effect = {
      set_country_flag = SOL_CRY_force_protectorate
      FROM = { country_event = { id = solarempire.5 days = 1 }}
    }
    ai_chance = {
      factor = 2
      modifier = {
        factor = 0
        strength_ratio = { tag = SOL ratio > 0.8 }
      }
    }
  }
  option = {
    name = solarempire.2.b
    add_political_power = 100
    FROM = { country_event = { id = solarempire.5 days = 1 }}
    ai_chance = {
      factor = 1
      modifier = {
        factor = 1.2
        democratic > 0.8
      }
    }
  }
}

#For CRY
country_event = {
  id = solarempire.3
  title = solarempire.3.t
  desc = solarempire.3.d
  picture = GFX_event_hearthswarming

  fire_only_once = yes

  is_triggered_only = yes

  option = {
    name = solarempire.3.a
    add_political_power = -100
    hidden_effect = {
      set_country_flag = SOL_CRY_force_protectorate
      FROM = { country_event = { id = solarempire.5 days = 1 }}
    }
    ai_chance = {
      factor = 2
      modifier = {
        factor = 0
        strength_ratio = { tag = SOL ratio > 0.8 }
      }
    }
  }
  option = {
    name = solarempire.3.b
    add_political_power = 100
    FROM = { country_event = { id = solarempire.5 days = 1 }}
    ai_chance = {
      factor = 1
      modifier = {
        factor = 1.2
        democratic > 0.8
      }
    }
  }
}

#For CRY
country_event = {
  id = solarempire.4
  title = solarempire.4.t
  desc = solarempire.4.d
  picture = GFX_event_hearthswarming

  fire_only_once = yes

  is_triggered_only = yes

  option = {
    name = solarempire.4.a
    custom_effect_tooltip = GAME_OVER_TT
    FROM = { annex_country = { target = ROOT transfer_troops = yes } }
    ai_chance = {
      factor = 1
      modifier = {
        factor = 0
        strength_ratio = { tag = SOL ratio > 0.8 }
      }
    }
  }
  option = {
    name = solarempire.4.b
    add_political_power = 100
    FROM = { country_event = { id = solarempire.5 days = 1 }}
    ai_chance = {
      factor = 1
    }
  }
}

country_event = {
  id = solarempire.5
  title = solarempire.5.t
  desc = {
    text = solarempire.5.d_agree
    trigger = {
      CRY = { has_country_flag = SOL_CRY_force_protectorate }
    }
  }
  desc = {
    text = solarempire.5.d_noagree
    trigger = {
     NOT = { CRY = { has_country_flag = SOL_CRY_force_protectorate } }
    }
  }
  picture = GFX_event_hearthswarming

  fire_only_once = yes

  is_triggered_only = yes

  option = {
    name = solarempire.5.a
    trigger = {
      CRY = { has_country_flag = SOL_CRY_force_protectorate }
    }
  }
  option = {
    name = solarempire.5.b
    trigger = {
      NOT  = { CRY = { has_country_flag = SOL_CRY_force_protectorate } }
    }
    add_political_power = -50
    if = {
      limit = { CRY = { is_subject_of = ROOT } }
      end_puppet = CRY
    }
    if = {
      limit = { CRY = { is_in_faction_with = ROOT } }
      remove_from_faction = CRY
    }
    create_wargoal = {
      type = annex_everything
      target = CRY
    }
  }
}

#For CRY
country_event = {
  id = solarempire.6
  title = solarempire.6.t
  desc = solarempire.6.d
  picture = GFX_event_hearthswarming

  fire_only_once = yes

  is_triggered_only = yes

  option = { #Support luna
    name = solarempire.6.a
    reverse_add_opinion_modifier = { target = SOL modifier = cry_betrayal }
    ai_chance = {
      factor = 2
      modifier = {
        factor = 1.5
        strength_ratio = { tag = SOL ratio > 0.8 }
      }
      modifier = {
        factor = 0.5
        EQS = { strength_ratio = { tag = SOL ratio < 0.7 } }
      }
    }
  }
  option = { #Stay neutral
    name = solarempire.6.b
    if = {
      limit = { is_subject_of = EQS }
      EQS = { end_puppet = ROOT }
    }
    if = {
      limit = { is_in_faction_with = EQS }
      EQS = { remove_from_faction = ROOT }
    }
    reverse_add_opinion_modifier = { target = SOL modifier = cry_betrayal }
    reverse_add_opinion_modifier = { target = EQS modifier = cry_betrayal }
    ai_chance = {
      factor = 5
    }
  }
  option = { #Support Daybreaker
    name = solarempire.6.c
    if = {
      limit = { is_subject_of = EQS }
      if = {
        limit = { has_autonomy_state = autonomy_integrated_puppet }
        hidden_effect = { set_country_flag = Former_integrated_puppet }
        else = {
          if = {
            limit = { has_autonomy_state = autonomy_puppet }
            hidden_effect = { set_country_flag = Former_puppet }
            else = {
              if = {
                limit = { has_autonomy_state = autonomy_colony }
                hidden_effect = { set_country_flag = Former_colony }
                if = {
                  limit = { has_autonomy_state = autonomy_dominion }
                  hidden_effect = { set_country_flag = former_dominion }
                }
              }
            }
          }
        }
      }
      EQS = { end_puppet = ROOT }
    }
    if = {
      limit = { is_in_faction_with = EQS }
      EQS = { remove_from_faction = ROOT }
    }
    reverse_add_opinion_modifier = { target = EQS modifier = cry_betrayal }
    add_popularity = { ideology = democratic popularity = -0.1 }
    add_to_war = {
      targeted_alliance = SOL enemy = EQS
    }
    hidden_effect = {
      set_country_flag = Supported_SOL
    }
    ai_chance = {
      factor = 0.8
      modifier = {
        factor = 1.4
        NOT = { original_tag = CRY }
      }
      modifier = {
        factor = 1.4
        has_autonomy_state = autonomy_integrated_puppet
      }
      modifier = {
        factor = 1.2
        has_autonomy_state = autonomy_puppet
      }
    }
  }
}

#For CRY
country_event = {
  id = solarempire.7
  title = solarempire.7.t
  desc = solarempire.7.d
  picture = GFX_event_hearthswarming

  fire_only_once = yes

  is_triggered_only = yes

  option = { #k bend the knee
    name = solarempire.7.a
    add_political_power = -200
    hidden_effect = {
      SOL = { set_politics = { ruling_party = democratic elections_allowed = no } }
    }
    SOL = { puppet = ROOT }
    hidden_effect = {
      SOL = {
        set_politics = { ruling_party = fascism elections_allowed = no }
        set_cosmetic_tag = EQS_SOL
        drop_cosmetic_tag = yes
      }
    }
    add_autonomy_ratio = { value = -0.2 }
    ai_chance = {
      factor = 1
      modifier = {
        factor = 0
        strength_ratio = { tag = SOL ratio > 0.8 }
      }
    }
  }
  option = { #refuse
    name = solarempire.7.b
    add_political_power = 100
    SOL = { country_event = { id = solarempire.5 days = 1 } }
    ai_chance = {
      factor = 1
    }
  }
}

#Investigate generals
country_event = {
  id = solarempire.8
  title = solarempire.8.t
  desc = solarempire.8.d
  picture = GFX_event_hearthswarming

  fire_only_once = yes

  is_triggered_only = yes

  option = { #very well
    name = solarempire.8.a
    country_event = { id = solarempire.81 days = 30 }
    hidden_effect = {
      country_event = { id = solarempire.82 days = 2 }
      country_event = { id = solarempire.83 days = 4 }
      country_event = { id = solarempire.84 days = 5 }
      country_event = { id = solarempire.85 days = 10 }
      country_event = { id = solarempire.86 days = 7 }
      country_event = { id = solarempire.87 days = 14 }
      country_event = { id = solarempire.89 days = 28 }
      country_event = { id = solarempire.810 days = 20 }
      country_event = { id = solarempire.811 days = 17 }
      country_event = { id = solarempire.812 days = 19 }
    }
  }
}

country_event = {
  id = solarempire.82 #solarin
  title = solarempire.82.t
  desc = solarempire.82.d
  picture = GFX_event_hearthswarming

  fire_only_once = yes

  is_triggered_only = yes

  option = { #very well#
    name = solarempire.8.a
    country_event = { id = solarempire.81 days = 30 }
    hidden_effect = {
      country_event = { id = solarempire.82 days = 2 }
      country_event = { id = solarempire.83 days = 4 }
      country_event = { id = solarempire.84 days = 5 }
      country_event = { id = solarempire.85 days = 10 }
      country_event = { id = solarempire.86 days = 7 }
      country_event = { id = solarempire.87 days = 14 }
      country_event = { id = solarempire.89 days = 28 }
      country_event = { id = solarempire.810 days = 20 }
      country_event = { id = solarempire.811 days = 17 }
      country_event = { id = solarempire.812 days = 19 }
    }
  }
}

country_event = { # Changeling Puppet
    id = solarempire.906
    title = solarempire.902.t
    desc = solarempire.902.d
    picture = GFX_event_canterlot

    trigger = {
        original_tag = CHN
        is_subject = yes
        has_government = fascism
        NOT = { has_country_flag = chn_is_fascist_puppet }
    }
    mean_time_to_happen = { days = 1 }
    option = {
        name = solarempire.902.a
        hidden_effect = {
          set_country_flag = chn_is_fascist_puppet
          set_party_name = { ideology = fascism long_name = CHN_fascism_puppet_party name = CHN_fascism_puppet_party }
          create_country_leader = {
          	name = "Changeling King"
          	expire = "1965.1.1"
          	ideology = fascism_ideology
          	picture = "Default.tga"
          	traits = {
          	}
          }
        }
    }
}
country_event = { # Removal of cosmetic
    id = solarempire.910
    title = solarempire.910.t
    desc = solarempire.910.d
    picture = GFX_event_canterlot

    trigger = {
        has_country_flag = chn_is_fascist_puppet
        is_subject = no
    }
    mean_time_to_happen = { days = 1 }
    option = {
        name = solarempire.910.a
        clr_country_flag = chn_is_fascist_puppet
        set_party_name = { ideology = fascism long_name = CHN_fascism_party name = CHN_fascism_party }
        hidden_effect = {
          if = {
            limit = { has_completed_focus = Chrysalis }
          create_country_leader = {
          	name = "Queen Chrysalis"
          	expire = "1965.1.1"
          	picture = "Chrysalis.tga"
           ideology = nazism
           desc = "POLITICS_CHRYSALIS_DESC"
          	traits = {
          		warmonger changeling_queen
          	}
            }
            else = {
            create_country_leader = {
              name = "Queen Chrysalis"
              expire = "1965.1.1"
              picture = "Chrysalis.tga"
             ideology = nazism
             desc = "POLITICS_CHRYSALIS_DESC"
              traits = {
                warmonger
              }
              }
            }
          }
        }
    }
}
