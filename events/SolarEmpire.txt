add_namespace = solarempire

country_event = {
  id = solarempire.1
  title = solarempire.1.t
  desc = solarempire.1.d
  picture = GFX_event_hearthswarming

  fire_only_once = yes

  is_triggered_only = yes

  option = {
    name = solarempire.1.a
    CRY = { country_event = { id = solarempire.2 days = 2 } } #pressure cadence
    ai_chance = {
      factor = 1
      modifier = {
        factor = 2
        has_completed_focus = SOL_empress_protector
      }
    }
  }
  option = {
    name = solarempire.1.b
    CRY = { country_event = { id = solarempire.3 days = 2 } } #replace cadence
    ai_chance = {
      factor = 1
      modifier = {
        factor = 2
        has_completed_focus = SOL_empress_mother
      }
    }
  }
  option = {
    name = solarempire.1.c
    CRY = { country_event = { id = solarempire.4 days = 2 } } #annex CRY
    ai_chance = {
      factor = 1
      modifier = {
        factor = 2
        has_completed_focus = SOL_god_empress
      }
    }
  }
}

#For CRY
country_event = {
  id = solarempire.2
  title = solarempire.2.t
  desc = solarempire.2.d
  picture = GFX_event_hearthswarming

  fire_only_once = yes

  is_triggered_only = yes

  option = {
    name = solarempire.2.a
    add_political_power = -100
    hidden_effect = {
      set_country_flag = SOL_CRY_force_protectorate
      FROM = { country_event = { id = solarempire.5 days = 1 }}
    }
    ai_chance = {
      factor = 2
      modifier = {
        factor = 0
        strength_ratio = { tag = SOL ratio > 0.8 }
      }
    }
  }
  option = {
    name = solarempire.2.b
    add_political_power = 100
    FROM = { country_event = { id = solarempire.5 days = 1 }}
    ai_chance = {
      factor = 1
      modifier = {
        factor = 1.2
        democratic > 0.8
      }
    }
  }
}

#For CRY
country_event = {
  id = solarempire.3
  title = solarempire.3.t
  desc = solarempire.3.d
  picture = GFX_event_hearthswarming

  fire_only_once = yes

  is_triggered_only = yes

  option = {
    name = solarempire.3.a
    add_political_power = -100
    hidden_effect = {
      set_country_flag = SOL_CRY_force_protectorate
      FROM = { country_event = { id = solarempire.5 days = 1 }}
    }
    ai_chance = {
      factor = 2
      modifier = {
        factor = 0
        strength_ratio = { tag = SOL ratio > 0.8 }
      }
    }
  }
  option = {
    name = solarempire.3.b
    add_political_power = 100
    FROM = { country_event = { id = solarempire.5 days = 1 }}
    ai_chance = {
      factor = 1
      modifier = {
        factor = 1.2
        democratic > 0.8
      }
    }
  }
}

#For CRY
country_event = {
  id = solarempire.4
  title = solarempire.4.t
  desc = solarempire.4.d
  picture = GFX_event_hearthswarming

  fire_only_once = yes

  is_triggered_only = yes

  option = {
    name = solarempire.4.a
    custom_effect_tooltip = GAME_OVER_TT
    FROM = { annex_country = { target = ROOT transfer_troops = yes } }
    ai_chance = {
      factor = 1
      modifier = {
        factor = 0
        strength_ratio = { tag = SOL ratio > 0.8 }
      }
    }
  }
  option = {
    name = solarempire.4.b
    add_political_power = 100
    FROM = { country_event = { id = solarempire.5 days = 1 }}
    ai_chance = {
      factor = 1
    }
  }
}

country_event = {
  id = solarempire.5
  title = solarempire.5.t
  desc = {
    text = solarempire.5.d_agree
    trigger = {
      CRY = { has_country_flag = SOL_CRY_force_protectorate }
    }
  }
  desc = {
    text = solarempire.5.d_noagree
    trigger = {
     NOT = { CRY = { has_country_flag = SOL_CRY_force_protectorate } }
    }
  }
  picture = GFX_event_hearthswarming

  fire_only_once = yes

  is_triggered_only = yes

  option = {
    name = solarempire.5.a
    trigger = {
      CRY = { has_country_flag = SOL_CRY_force_protectorate }
    }
  }
  option = {
    name = solarempire.5.b
    trigger = {
      NOT  = { CRY = { has_country_flag = SOL_CRY_force_protectorate } }
    }
    add_political_power = -50
    create_wargoal = {
      type = annex_everything
      target = CRY
    }
  }
}

#For CRY
country_event = {
  id = solarempire.6
  title = solarempire.6.t
  desc = solarempire.6.d
  picture = GFX_event_hearthswarming

  fire_only_once = yes

  is_triggered_only = yes

  option = { #Support luna
    name = solarempire.6.a
    reverse_add_opinion_modifier = { target = SOL modifier = cry_betrayal }
  }
  option = { #Stay neutral
    name = solarempire.6.b
    EQS = { end_puppet = ROOT }
    if = {
      limit = { is_in_faction_with = EQS }
      EQS = { remove_from_faction = ROOT }
    }
    reverse_add_opinion_modifier = { target = SOL modifier = cry_betrayal }
    reverse_add_opinion_modifier = { target = EQS modifier = cry_betrayal }
  }
  option = { #Support Daybreaker
    name = solarempire.6.c
    EQS = { end_puppet = ROOT }
    if = {
      limit = { is_in_faction_with = EQS }
      EQS = { remove_from_faction = ROOT }
    }
    reverse_add_opinion_modifier = { target = EQS modifier = cry_betrayal }
    add_popularity = { ideology = democratic popularity = -0.1 }
    add_to_war = {
      targeted_alliance = SOL enemy = EQS
    }
    hidden_effect = {
      set_country_flag = CRY_supported_SOL
    }
  }
}

#For CRY
country_event = {
  id = solarempire.7
  title = solarempire.7.t
  desc = solarempire.7.d
  picture = GFX_event_hearthswarming

  fire_only_once = yes

  is_triggered_only = yes

  option = { #k bend the knee
    name = solarempire.7.a
    add_political_power = -200
    hidden_effect = {
      SOL = { set_politics = { ruling_party = democratic elections_allowed = no } }
    }
    SOL = { puppet = ROOT }
    hidden_effect = {
      SOL = {
        set_politics = { ruling_party = fascism elections_allowed = no }
        set_cosmetic_tag = EQS_SOL
        drop_cosmetic_tag = yes
      }
    }
    add_autonomy_ratio = { value = -0.2 }
    ai_chance = {
      factor = 1
      modifier = {
        factor = 0
        strength_ratio = { tag = SOL ratio > 0.8 }
      }
    }
  }
  option = { #refuse
    name = solarempire.7.b
    add_political_power = 100
    SOL = { country_event = { id = solarempire.9 days = 1 } }
    ai_chance = {
      factor = 1
    }
  }
}
