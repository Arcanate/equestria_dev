add_namespace = rivercity
add_namespace = rivercity_news

### Intro Event ###
#country_event = {
#	id = rivercity.1
#	immediate = {log = "[Root.GetName]: event rivercity"}#Auto-logging
#	title = rivercity.1.t
#	desc = rivercity.1.d
#	picture = GFX_event_lake_city
#
#	is_triggered_only = yes
#
#	immediate = {
#		hidden_effect = {
#			country_event = { id = rivercity.2 days = 10 }
#		}
#	}
#
#	option = {
#		name = rivercity.1.a
#	}
#}

### Intro ###
country_event = {
	id = rivercity.2
	immediate = {log = "[Root.GetName]: event rivercity.2"}#Auto-logging
	title = rivercity.2.t
	desc = rivercity.2.d
	picture = GFX_event_river_city

	is_triggered_only = yes

	option = {
		name = rivercity.2.a
	}
}


country_event = { #New Treasury Officer
	id = rivercity.8
	immediate = {log = "[Root.GetName]: event rivercity.8"}#Auto-logging
	title = rivercity.8.t
	desc = rivercity.8.d
	picture = GFX_event_bank_vault

	trigger = {
		original_tag = RCT
		has_country_leader = { ruling_only = yes name = "River Swirl" }
		has_government = democratic
		NOT = { has_idea = RCT_unstable_government }
	}

	mean_time_to_happen = {
		days = 30
	}

	fire_only_once = yes

	option = { #Promote some low level administrator
		name = rivercity.8.a
		add_political_power = 150
		custom_effect_tooltip = RCT_idiot
		custom_effect_tooltip = RCT_babushka_mad
	}
	option = { #Put Cousin Pumpkin Swirl Incharge
		name = rivercity.8.b
		add_ideas = RCT_pumpkin_swirl
		custom_effect_tooltip = RCT_babushka
		hidden_effect = {
				set_country_flag = Promoted_Cousin_Pumpkin
		}
	}
}

################################################
########	Government Problems Events	########
################################################

country_event = {#The first issue comes up. The poverty crisis. The Socialist Party can support it, or block it. 
	id = rivercity.13 ####First
	immediate = {log = "[Root.GetName]: event rivercity.13"}#Auto-logging
	title = rivercity.13.t
	desc = rivercity.13.d
	picture = GFX_event_river_city

	is_triggered_only = yes

	option = {#The Harmonists force the bill through
		name = rivercity.13.a
		set_variable = { VARNAME = RCT.socialist_obstruction value = 0 }
		hidden_effect = {
		random_list = {
		70 = {set_country_flag = RCT_bill_succeeds 	country_event = {id = rivercity.14 days = 4 random = 48}}
		30 = {set_country_flag = RCT_bill_fails country_event = {id = rivercity.14 days = 4 random = 48}}
		}
		country_event = {id = rivercity.16 days = 9 random = 24}		
		}
	}
	option = {#The Socialists shoot the bill down
		name = rivercity.13.b
		set_variable = { VARNAME = RCT.socialist_obstruction value = 1 }
		if = {
			limit = {
				NOT = {
					has_country_flag = RCT_effin_gommies
				}
			}
			hidden_effect = {
			 country_event = {id = rivercity.26 days = 5 random = 24}
			}
		}
		hidden_effect = {
			random_list = {
				70 = {set_country_flag = RCT_public_blames_harmonists 	country_event = {id = rivercity.15 days = 4 random = 48}}
				30 = {set_country_flag = RCT_public_blames_you country_event = {id = rivercity.15 days = 4 random = 48}}
			}
			country_event = {id = rivercity.16 days = 9 random = 24}		
		}
	}
}

country_event = {#Response to the Harmonist attempt at 
	id = rivercity.14 ####First
	immediate = {log = "[Root.GetName]: event rivercity.14"}#Auto-logging
	title = rivercity.14.t
	desc = rivercity.14.d
	picture = GFX_event_river_city

	is_triggered_only = yes

	option = {#The Harmonists force the bill through
		name = rivercity.14.a
		if = {
			limit = {
			has_country_flag = RCT_bill_succeeds
			}
			add_political_power = 25
			add_popularity = { ideology = democratic popularity = 0.03}
			decrease_poverty = yes
		}
		else = {
			add_stability = -0.05
			add_popularity = { ideology = communism popularity = 0.05}
		}
	}
}

country_event = {#Response to the Socialist attempt to block
	id = rivercity.15 ####First
	immediate = {log = "[Root.GetName]: event rivercity.15"}#Auto-logging
	title = rivercity.15.t
	desc = rivercity.15.d
	picture = GFX_event_river_city_2

	is_triggered_only = yes

	option = {#
		name = rivercity.15.a
		if = {
			limit = {
				has_country_flag = RCT_public_blames_harmonists
			}
			add_stability = -0.03
			add_popularity = { ideology = democratic popularity = -0.04}
		}
		else = {
			add_stability = -0.05
			add_popularity = { ideology = communism popularity = -0.04}
		}
	}
}

country_event = {#Second Issue - the Rural/Urban Divide
	id = rivercity.16
	immediate = {log = "[Root.GetName]: event rivercity.15"}#Auto-logging
	title = rivercity.16.t
	desc = rivercity.16.d
	picture = GFX_event_river_city_3

	is_triggered_only = yes
	
	option = {#The Harmonists invest in the rural outskirts
		name = rivercity.16.a
		hidden_effect = {
			random_list = {
				70 = {set_country_flag = RCT_rural_success 	country_event = {id = rivercity.17 days = 4 random = 48}}
				30 = {set_country_flag = RCT_rural_failure country_event = {id = rivercity.17 days = 4 random = 48}}
			}
			country_event = {id = rivercity.19 days = 8 random = 24}		
		}
	}

	option = {#The Socialists force a compromise, diluting the bill, diverting spending into the cities
		name = rivercity.16.b

		add_to_variable = { var = RCT.socialist_obstruction value = 1 }
		if = {
			limit = {
				NOT = {
					has_country_flag = RCT_effin_gommies
				}
			}
			hidden_effect = {
			 country_event = {id = rivercity.26 days = 5 random = 24}
			}
		}
		hidden_effect = {
			random_list = {
				70 = {set_country_flag = RCT_mixed_investment_works 	country_event = {id = rivercity.18 days = 4 random = 48}}
				30 = {set_country_flag = RCT_mixed_investment_fails country_event = {id = rivercity.18 days = 4 random = 48}}
			}
			country_event = {id = rivercity.19 days = 9 random = 24}		
		}
	}
}

country_event = {#Rural investment results
	id = rivercity.17  ####First
	immediate = {log = "[Root.GetName]: event rivercity.17"}#Auto-logging
	title = rivercity.17.t
	desc = rivercity.17.d
	picture = GFX_event_river_city_3

	is_triggered_only = yes

	option = {
		name = rivercity.17.a
		if = {
			limit = {
				has_country_flag = RCT_rural_success
			}
			add_political_power = 25
			add_popularity = { ideology = democratic popularity = 0.04}
		}
		else = {
			add_political_power = -50
			add_popularity = { ideology = communism popularity = 0.06}
		}
	}

}

country_event = {#Mixed investment results
	id = rivercity.18 ####First
	immediate = {log = "[Root.GetName]: event rivercity.18"}#Auto-logging
	title = rivercity.18.t
	desc = rivercity.18.d
	picture = GFX_event_river_city_3

	is_triggered_only = yes

	option = {
		name = rivercity.18.a
		if = {
			limit = {
				has_country_flag = RCT_mixed_investment_works
			}
			add_political_power = 25
			add_popularity = { ideology = communism popularity = 0.05}
		}
		else = {
			add_political_power = -50
			add_popularity = { ideology = democratic popularity = 0.04}
		}
	}
}

country_event = {#Third Issue - The Talzar Commune
	id = rivercity.19
	immediate = {log = "[Root.GetName]: event rivercity.19"}#Auto-logging
	title = rivercity.19.t
	desc = rivercity.19.d
	picture = GFX_event_river_city_3

	is_triggered_only = yes
	
	option = {#Send the Harmonist-supported negotiator, Wildheart
		name = rivercity.19.a
		hidden_effect = {
			random_list = {
				70 = {set_country_flag = RCT_wildheart_success 	country_event = {id = rivercity.20 days = 4 random = 48}}
				30 = {set_country_flag = RCT_wildheart_failure country_event = {id = rivercity.20 days = 4 random = 48}}
			}
			country_event = {id = rivercity.22 days = 10 random = 24}		
		}
	}

	option = {#Send the Socialist-supported negotiator, Nova Whirl
		name = rivercity.19.b

		add_to_variable = { var = RCT.socialist_obstruction value = 1 }
		if = {
			limit = {
				NOT = {
					has_country_flag = RCT_effin_gommies
				}
			}
			hidden_effect = {
			 country_event = {id = rivercity.26 days = 7 random = 24}
			}
		}
		hidden_effect = {
			random_list = {
				70 = {set_country_flag = RCT_novaswirl_talz_success	country_event = {id = rivercity.21 days = 4 random = 48}}
				30 = {set_country_flag = RCT_novaswirl_talz_failure country_event = {id = rivercity.21 days = 4 random = 48}}
			}
			country_event = {id = rivercity.22 days = 10 random = 24}		
		}
	}
}

country_event = {#Hector's negotiations
	id = rivercity.20
	immediate = {log = "[Root.GetName]: event rivercity.20"}#Auto-logging
	title = rivercity.20.t
	desc = rivercity.20.d
	picture = GFX_event_river_city_3

	is_triggered_only = yes

	option = {
		name = rivercity.20.a
		if = {
			limit = {
				has_country_flag = RCT_wildheart_success
			}
			add_political_power = 25
			add_popularity = { ideology = democratic popularity = 0.04}
		}
		else = {
			add_political_power = -50
			add_stability = -0.05
			add_popularity = { ideology = democratic popularity = -0.05}
		}
	}
}

country_event = {#Nova Swirl's attempt
	id = rivercity.21
	immediate = {log = "[Root.GetName]: event rivercity.21"}#Auto-logging
	title = rivercity.21.t
	desc = rivercity.21.d
	picture = GFX_event_river_city

	is_triggered_only = yes

	option = {
		name = rivercity.21.a
		if = {
			limit = {
				has_country_flag = RCT_novaswirl_talz_success
			}
			add_political_power = 25
			add_popularity = { ideology = communism popularity = 0.05}
		}
		else = {
			add_political_power = -50
			add_stability = -0.05
			add_popularity = { ideology = communism popularity = -0.05}
		}
	}
}

country_event = {#Vote of No Confidence - Snap Election
	id = rivercity.22
	immediate = {log = "[Root.GetName]: event rivercity.22"}#Auto-logging
	title = rivercity.22.t
	desc = rivercity.22.d
	picture = GFX_event_the_vote

	is_triggered_only = yes

	option = {
		name = rivercity.22.a
		 add_stability = -0.30
		 set_country_flag = RCT_election_is_on
		 hidden_effect = {
		  country_event = {id = rivercity.23 days = 9 random = 24}		
		 }
		 custom_effect_tooltip = RCT_electioneering_active
	}
	option = {
		name = rivercity.22.b
		trigger = {
		 has_country_flag = RCT_emergency_mesures_active
		}
		add_stability = -0.1
		set_country_flag = RCT_harmony_prevails
		remove_ideas = RCT_unstable_government
		   
		 }
}

country_event = {#First Debate
	id = rivercity.23
	immediate = {log = "[Root.GetName]: event rivercity.23"}#Auto-logging
	title = rivercity.23.t
	desc = rivercity.23.d
	picture = GFX_event_democratic_opposition

	is_triggered_only = yes

	option = {
		name = rivercity.23.a
		  add_popularity = { ideology = democratic popularity = 0.03} 
		 hidden_effect = {
		  country_event = {id = rivercity.24 days = 9 random = 24}		
		 }
	}
	option = {
		name = rivercity.23.b
		  add_popularity = { ideology = communism popularity = 0.03} 		  
		 hidden_effect = {
		  country_event = {id = rivercity.24 days = 9 random = 24}		
		 }
	}
}

country_event = {#Second Debate
	id = rivercity.24
	immediate = {log = "[Root.GetName]: event rivercity.24"}#Auto-logging
	title = rivercity.24.t
	desc = rivercity.24.d
	picture = GFX_event_democratic_opposition

	is_triggered_only = yes

	option = {
		name = rivercity.24.a
		  add_popularity = { ideology = democratic popularity = 0.04} 
	}
	option = {
		name = rivercity.24.b
		  add_popularity = { ideology = communism popularity = 0.04} 		  
	}
}

country_event = {#Result Of The Election - Fired By Completing the first Focus
	id = rivercity.25
	immediate = {log = "[Root.GetName]: event rivercity.25"}#Auto-logging
	title = rivercity.25.t
	desc = rivercity.25.d
	picture = GFX_event_democratic_opposition

	is_triggered_only = yes

	option = {
		name = rivercity.25.a
		 clr_country_flag = RCT_election_is_on
			remove_ideas = RCT_unstable_government

		  if = {
		   limit = {
			check_variable = { party_popularity@communism > party_popularity@democratic }		   }
		   set_country_flag = RCT_communism_prevails
		   set_politics = { ruling_party = communism elections_allowed = no }
		  }
		  else = {#Then River Swirl Wins
		   set_country_flag = RCT_harmony_prevails		  
		  }
		 
	}
}


country_event = {##The Emergency Powers Bill
	id = rivercity.26
	immediate = {log = "[Root.GetName]: event rivercity.26"}#Auto-logging
	title = rivercity.26.t
	desc = rivercity.26.d
	picture = GFX_event_celestia_poster

	is_triggered_only = yes
	
	option = {
	 name = rivercity.26.a
	 set_country_flag = RCT_effin_gommies
	 custom_effect_tooltip = RCT_gommies_tooltip
	}
}

country_event = {##Red Saturday
	id = rivercity.27
	immediate = {log = "[Root.GetName]: event rivercity.27"}#Auto-logging
	title = rivercity.27.t
	desc = rivercity.27.d
	picture = GFX_event_eqs_communists

	is_triggered_only = yes
	
	option = {#Caramel's militia seize control of the state
	 name = rivercity.27.a
		set_country_flag = RCT_caramels_coup
		kill_country_leader = yes
			create_country_leader = {
				name = "General Secretary Caramel Haze"
				picture = "Caramel_Haze_Com.tga"
				desc = ""
				expire = "1965.1.1"
				ideology = leninism
			}		
	}
	option = {#Nova's spies intercept Caramel and remove him from power
	 name = rivercity.27.b
		set_country_flag = RCT_nova_remains    
		if = {
        limit = { has_unit_leader = 652 }
        remove_unit_leader = 652
		}

	}
}